<html>
<!-- Mirrored from nnc3.com/mags/Networking2/tcp/appe_02.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:36 GMT -->
<head><title>The sendmail Command (TCP/IP Network Administration, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Craig Hunt" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0596002971L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="TCP/IP Network Administration, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.html" alt="TCP/IP Network Administration" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appe_01.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="appe_03.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>



<h2 class="sect1">E.2. The sendmail Command</h2>

<p>The syntax of the <a name="INDEX-3642" /> <a name="INDEX-3643" /><tt class="literal">sendmail</tt> command is
deceptively simple:
</p>

<blockquote><pre class="code">sendmail [<em class="replaceable">arguments</em>] [<em class="replaceable">address ...</em>]</pre></blockquote>

<p>The syntax is deceptive because it hides the fact that there are a
very large number of command-line arguments. <a href="appe_02.html#tcp3-APP-E-TABLE-2">Table E-2</a> lists all of them.
</p>

<a name="tcp3-APP-E-TABLE-2" /><h4 class="objtitle">Table E-2. sendmail command-line arguments </h4><table border="1">



<tr>
<th>
<p>Argument</p>
</th>
<th>
<p>Function</p>
</th>
</tr>


<tr>
<td>
<p>-U</p>
</td>
<td>
<p>Indicate initial user submission.</p>
</td>
</tr>
<tr>
<td>
<p>-V<em class="emphasis">envid</em></p>
</td>
<td>
<p>Set the envelope ID to <em class="emphasis">envid</em>.</p>
</td>
</tr>
<tr>
<td>
<p>-N<em class="emphasis">dsn</em></p>
</td>
<td>
<p>Set delivery status notification to <em class="emphasis">dsn</em>.</p>
</td>
</tr>
<tr>
<td>
<p>-M<em class="emphasis">xvalue</em></p>
</td>
<td>
<p>Set macro <em class="emphasis">x</em> to <em class="emphasis">value</em>.</p>
</td>
</tr>
<tr>
<td>
<p>-R<em class="emphasis">return</em></p>
</td>
<td>
<p>Set the part of the message returned with an error.</p>
</td>
</tr>
<tr>
<td>
<p>-B<em class="emphasis">type</em></p>
</td>
<td>
<p>Set the MIME body type.</p>
</td>
</tr>
<tr>
<td>
<p>-p<em class="emphasis">protocol</em></p>
</td>
<td>
<p>Set the receiving protocol and hostname.</p>
</td>
</tr>
<tr>
<td>
<p>-X<em class="emphasis">logfile</em></p>
</td>
<td>
<p>Log all traffic in the indicated log file.</p>
</td>
</tr>
<tr>
<td>
<p>-f<em class="emphasis">addr</em></p>
</td>
<td>
<p>Sender's machine address is <em class="emphasis">addr</em>.</p>
</td>
</tr>
<tr>
<td>
<p>-r <em class="emphasis">addr</em></p>
</td>
<td>
<p>Obsolete form of -f.</p>
</td>
</tr>
<tr>
<td>
<p>-h <em class="emphasis">cnt</em></p>
</td>
<td>
<p>Drop mail if forwarded <em class="emphasis">cnt</em> times.</p>
</td>
</tr>
<tr>
<td>
<p>-F<em class="emphasis">name</em></p>
</td>
<td>
<p>Set the full name of this user to <em class="emphasis">name</em>.</p>
</td>
</tr>
<tr>
<td>
<p>-n</p>
</td>
<td>
<p>Don't do aliasing or forwarding.</p>
</td>
</tr>
<tr>
<td>
<p>-T<em class="emphasis">value</em></p>
</td>
<td>
<p>Set the QueueTimeout option to <em class="emphasis">value</em>.</p>
</td>
</tr>
<tr>
<td>
<p>-t</p>
</td>
<td>
<p>Send to everyone listed in To:, Cc:, and Bcc:.</p>
</td>
</tr>
<tr>
<td>
<p>-bm</p>
</td>
<td>
<p>Deliver mail (default).</p>
</td>
</tr>
<tr>
<td>
<p>-bD</p>
</td>
<td>
<p>Run as a daemon in the foreground.</p>
</td>
</tr>
<tr>
<td>
<p>-ba</p>
</td>
<td>
<p>Run in arpanet mode.</p>
</td>
</tr>
<tr>
<td>
<p>-bs</p>
</td>
<td>
<p>Speak SMTP on input side.</p>
</td>
</tr>
<tr>
<td>
<p>-bd</p>
</td>
<td>
<p>Run as a daemon.</p>
</td>
</tr>
<tr>
<td>
<p>-bH</p>
</td>
<td>
<p>Clear the host status directory; equivalent to purgestat.</p>
</td>
</tr>
<tr>
<td>
<p>-bh</p>
</td>
<td>
<p>Display the host status report; equivalent to hoststat.</p>
</td>
</tr>
<tr>
<td>
<p>-bt</p>
</td>
<td>
<p>Run in test mode.</p>
</td>
</tr>
<tr>
<td>
<p>-bv</p>
</td>
<td>
<p>Verify addresses; don't collect or deliver mail.</p>
</td>
</tr>
<tr>
<td>
<p>-bi</p>
</td>
<td>
<p>Initialize the alias database.</p>
</td>
</tr>
<tr>
<td>
<p>-bp</p>
</td>
<td>
<p>Print the mail queue.</p>
</td>
</tr>
<tr>
<td>
<p>-bz</p>
</td>
<td>
<p>Create a parsed copy of the <em class="emphasis">sendmail.cf</em> file.</p>
</td>
</tr>
<tr>
<td>
<p>-q[<em class="emphasis">time</em>]</p>
</td>
<td>
<p>Process queued mail. Repeat at interval <em class="emphasis">time</em>.</p>
</td>
</tr>
<tr>
<td>
<p>-C<em class="emphasis">file</em></p>
</td>
<td>
<p>Use <em class="emphasis">file</em> as the configuration file.</p>
</td>
</tr>
<tr>
<td>
<p>-c</p>
</td>
<td>
<p>Set the HoldExpensive option to true.</p>
</td>
</tr>
<tr>
<td>
<p>-d<em class="emphasis">level</em></p>
</td>
<td>
<p>Set debugging level.</p>
</td>
</tr>
<tr>
<td>
<p>-e</p>
</td>
<td>
<p>Set the ErrorMode option.</p>
</td>
</tr>
<tr>
<td>
<p>-O<em class="emphasis">option</em>=<em class="emphasis">value</em></p>
</td>
<td>
<p>Set option <em class="emphasis">option</em> to <em class="emphasis">value</em>.</p>
</td>
</tr>
<tr>
<td>
<p>-o<em class="emphasis">xvalue</em></p>
</td>
<td>
<p>Set an option using its old single-character name.</p>
</td>
</tr>
<tr>
<td>
<p>-I</p>
</td>
<td>
<p>Alternate way to specify -bi.</p>
</td>
</tr>
<tr>
<td>
<p>-i</p>
</td>
<td>
<p>Ignore dots in incoming messages.</p>
</td>
</tr>
<tr>
<td>
<p>-m</p>
</td>
<td>
<p>Send to me, too.</p>
</td>
</tr>
<tr>
<td>
<p>-v</p>
</td>
<td>
<p>Run in verbose mode.</p>
</td>
</tr>
<tr>
<td>
<p>-s<em class="emphasis">addr</em></p>
</td>
<td>
<p>Alternate form of -f.</p>
</td>
</tr>

</table><p>

<p><a href="appe_02.html#tcp3-APP-E-TABLE-2">Table E-2</a> lists over 30 command-line arguments.
The table is a quick reference to all possible arguments, some of
which are outdated in the latest version of sendmail. Perhaps the
best-known argument that is now outdated is -<tt class="literal">bz</tt>.
At one time it was used to preprocess the
<em class="emphasis">sendmail.cf</em> file. The idea was that storing the
processed configuration would enhance speed. This outdated switch
does not work in the newest versions of sendmail. If you used this
argument with an older version of sendmail you might mistakenly
believe it is still needed. Attempting to run it with the current
sendmail release will just return an error.
</p>

<p>Several arguments are redundant forms of other switches. For example,
-<tt class="literal">c</tt>, -<tt class="literal">e</tt>, -<tt class="literal">I</tt>,
-<tt class="literal">m</tt>, -<tt class="literal">r</tt>, <tt class="literal">-T</tt>,
and <tt class="literal">-s</tt> are all deprecated switches that have been
replaced by newer arguments. All of the arguments that set
<em class="emphasis">sendmail.cf</em> options, even those that are not
deprecated, such as <tt class="literal">-i</tt> and <tt class="literal">-o</tt>,
can be replaced with the <tt class="literal">-O</tt> switch. For example,
the command line:
</p>

<blockquote><pre class="code">sendmail -m -s &lt; mail.file</pre></blockquote>

<p>could be replaced by:</p>

<blockquote><pre class="code">sendmail -OMeToo=true -OSaveFromLine=true &lt; mail.file </pre></blockquote>

<p>The -<tt class="literal">O</tt> argument provides the distinct advantage of
being able to set any <em class="emphasis">sendmail.cf</em> option.
Arguments such as -<tt class="literal">m</tt> and -<tt class="literal">s</tt> set
only one option each. The <tt class="literal">-O</tt> format is also easier
to read and comprehend, particularly when the
<tt class="literal">sendmail</tt> command is included inside a script.
</p>

<p>Several of the command-line arguments from <a href="appe_02.html#tcp3-APP-E-TABLE-2">Table E-2</a> are covered in <a href="ch10_01.html">Chapter 10, "sendmail "</a>.
These are:
</p>

<dl>
<dt><b><tt class="literal">-f</tt></b></dt>
<dd>
<p>Allows trusted
<a name="INDEX-3644" /> <a name="INDEX-3645" />users to override
the sender address on outgoing messages. For security reasons, it is
disabled on some systems. Obsolete alternative forms of this argument
are <tt class="literal">-r</tt> and <tt class="literal">-s</tt>.
</p>
</dd>


<dt><b><tt class="literal">-t</tt></b></dt>
<dd>
<p>Reads the To:, Cc:, and Bcc: headers
<a name="INDEX-3646" />from
standard input. Used to send a file that contains these headers or
when typing in a test message, as in <a href="ch10_01.html">Chapter 10, "sendmail "</a>.
</p>
</dd>


<dt><b><tt class="literal">-bd</tt></b></dt>
<dd>
<p>Runs sendmail in <a name="INDEX-3647" />background mode, causing it to
collect incoming mail. Use this argument on the
<tt class="literal">sendmail</tt> command in the boot script.
</p>
</dd>


<dt><b><tt class="literal">-bt</tt></b></dt>
<dd>
<p>Used to test sendmail
<a name="INDEX-3648" />
<a name="INDEX-3649" />address rewrite rules.
</p>
</dd>


<dt><b><tt class="literal">-bi</tt></b></dt>
<dd>
<p>Initializes the <a name="INDEX-3650" />aliases database. This is the same as
the <tt class="literal">newaliases</tt> command covered in <a href="ch10_01.html">Chapter 10, "sendmail "</a>. 
</p>
</dd>


<dt><b><tt class="literal">-q</tt></b></dt>
<dd>
<p>Sets the time interval at which the
<a name="INDEX-3651" />mail queue
is processed. Use on the <tt class="literal">sendmail</tt> command in the
boot script.
</p>
</dd>


<dt><b><tt class="literal">-C</tt></b></dt>
<dd>
<p>Loads an alternative
<a name="INDEX-3652" />
<a name="INDEX-3653" />sendmail configuration file. Use
this to test the configuration before moving the new file to
<em class="emphasis">sendmail.cf</em>.
</p>
</dd>


<dt><b><tt class="literal">-v</tt></b></dt>
<dd>
<p>Permits you to view the exchange of <a name="INDEX-3654" />SMTP
commands in real time.
</p>
</dd>


<dt><b><tt class="literal">-bv</tt></b></dt>
<dd>
<p>Verifies address
<a name="INDEX-3655" />processing without actually sending
mail.
</p>
</dd>

</dl>

<p>Other than the two arguments (<tt class="literal">-bd</tt> and
<tt class="literal">-q</tt>) used on the <tt class="literal">sendmail</tt>
command line in the boot script to process incoming mail, the most
common use for <tt class="literal">sendmail</tt> arguments is debugging.
From the list above, <tt class="literal">-bt</tt>, <tt class="literal">-C</tt>,
<tt class="literal">-bv</tt>, <tt class="literal">-v</tt>, and
<tt class="literal">-t</tt> are all used in <a href="ch10_01.html">Chapter 10, "sendmail "</a> in
debugging examples. Other debugging
<a name="INDEX-3656" />arguments are:
</p>

<dl>
<dt><b><tt class="literal">-bp</tt></b></dt>
<dd>
<p>Prints a list of mail that is queued for delivery. It is the same as
the <tt class="literal">mailq</tt> command. Mail is queued when it cannot
be delivered immediately because the remote host is temporarily
unable to accept the mail. sendmail periodically processes the queue,
based on the time interval you set with the <tt class="literal">-q</tt>
argument, and attempts to deliver the mail in the queue. The queue
can grow large enough to impede sendmail's performance if an
important remote host is down. <tt class="literal">mailq</tt> shows how
many items are queued as well as the source and destination of each
piece of mail.
</p>


<p>When the queue requires immediate processing, invoke
<tt class="literal">sendmail</tt> using <tt class="literal">-q</tt> with no time
interval. This processes the entire queue. Some variations of the
<tt class="literal">-q</tt> argument allow you to selectively process the
queue. Use <tt class="literal">-qI</tt><em class="replaceable">queue-id</em>
to process only those queue entries with the specified queue
identifier;
<tt class="literal">-qR</tt><em class="replaceable">recipient</em> to process
only items being sent to the specified recipient; or
<tt class="literal">-qS</tt><em class="replaceable">sender</em> to process
only mail sent from the specified sender. The
<tt class="literal">mailq</tt> command displays the queue identifier,
sender address, and recipient address for every item in the queue.
</p>
</dd>


<dt><b><tt class="literal">-o</tt></b></dt>
<dd>
<p>Sets a sendmail option for this one instantiation of sendmail, e.g.,
<tt class="literal">-oA/tmp/test-aliases</tt>. Use this argument to test
alternative option settings without editing the
<em class="emphasis">sendmail.cf</em> file. <tt class="literal">-o</tt> uses the
old sendmail option syntax. An alternate form of the argument is
<tt class="literal">-O</tt>, which uses the new option syntax, e.g.,
<tt class="literal">-OAilasFile=/tmp/test-aliases</tt>. See <a href="appe_04.html#tcp3-APP-E-SECT-4.3">Section E.4.3, "sendmail Options"</a> later in
this appendix.
</p>
</dd>


<dt><b><tt class="literal">-d</tt></b></dt>
<dd>
<p>Sets the level of detail displayed when debugging sendmail code. Can
be used to debug rewrite rules or to check configuration settings,
e.g., <tt class="literal">sendmail -bt -d0.4</tt>. Most debug settings are
useful only for sendmail source code debugging.
</p>
</dd>


<dt><b><tt class="literal">-h</tt></b></dt>
<dd>
<p>Sets the counter used to determine if mail is looping. By default, it
is set to 30, which is a good operational value. When you are
debugging a mail loop problem, set the hop count lower, e.g.,
<tt class="literal">-h10</tt>, to reduce the number of times a piece of
mail is handled by the system. Otherwise, leave this value alone.
</p>
</dd>


<dt><b><tt class="literal">-bh</tt></b></dt>
<dd>
<p>Displays the persistent host status, if sendmail is configured to
maintain this status. The host status displays the name of each
remote host that mail was sent to, the time the status of that host
was last updated, and the result of the last attempt to deliver mail
to that host. The directory of host status files can grow very large.
Use <tt class="literal">-bH</tt> to clean out the host status directory.
</p>
</dd>

</dl>

<p>The remaining arguments are rarely used on the command line:</p>

<dl>
<dt><b><tt class="literal">-B</tt></b></dt>
<dd>
<p>Indicates the <a name="INDEX-3657" />MIME message body type. Acceptable
values are either 7BIT or 8BITMIME.
</p>
</dd>


<dt><b><tt class="literal">-N</tt></b></dt>
<dd>
<p>Requests that the
<a name="INDEX-3658" />sender be notified of
the delivery status of the mail. The default value is FAILURE, DELAY,
which notifies the sender when mail delivery fails or is delayed in
the queue. Other acceptable values are NEVER, to request that no
status notifications be returned to the sender, and SUCCESS, to
request notification of successful mail delivery.
</p>
</dd>


<dt><b><tt class="literal">-M</tt></b></dt>
<dd>
<p>Sets a macro value for this instantiation of sendmail. For example,
entering the command <tt class="literal">-MMwrotethebook.com</tt> sets
macro M to <em class="emphasis">wrotethebook.com</em>.
</p>
</dd>


<dt><b><tt class="literal">-p</tt></b></dt>
<dd>
<p>Sets the sending protocol and the sending host. This is equivalent to
setting the internal <tt class="literal">s</tt> and <tt class="literal">r</tt>
macros. If a system has more than one external mail protocol, for
example, UUCP and SMTP, this forces the system to use a specific
protocol for this piece of mail.
</p>
</dd>


<dt><b><tt class="literal">-R</tt></b></dt>
<dd>
<p>Sets the amount of information returned to the sender when a message
cannot be delivered. This can be either HDRS for headers-only, or
FULL for the headers and the full message body.
</p>
</dd>


<dt><b><tt class="literal">-U</tt></b></dt>
<dd>
<p>Indicates that this mail comes directly from a user interface and was
not forwarded from a remote mail handler.
</p>
</dd>


<dt><b><tt class="literal">-V</tt></b></dt>
<dd>
<p>Inserts an "envelope ID" into the outbound message that
is returned if message delivery fails.
</p>
</dd>


<dt><b><tt class="literal">-X</tt></b></dt>
<dd>
<p>Logs all mail <a name="INDEX-3659" /> <a name="INDEX-3660" />messages to
the specified log file. This rapidly produces an enormous log file.
</p>
</dd>


<dt><b><tt class="literal">-n</tt></b></dt>
<dd>
<p>Disables the processing of aliases and mail forwarding.</p>
</dd>


<dt><b><tt class="literal">-bm</tt></b></dt>
<dd>
<p>Tells sendmail to deliver mail, which it will do anyway.</p>
</dd>


<dt><b><tt class="literal">-ba</tt></b></dt>
<dd>
<p>Reads the header From: line to find the sender. It uses three-digit
reply codes, and ends error lines with &lt;CRLF&gt;. This is an
obsolete argument.
</p>
</dd>


<dt><b><tt class="literal">-bs</tt></b></dt>
<dd>
<p>Tells sendmail to use SMTP for incoming mail. When appropriate,
sendmail will do this even without the <tt class="literal">-bs</tt>
argument.
</p>
</dd>


<dt><b><tt class="literal">-i</tt></b></dt>
<dd>
<p>Normally, an SMTP message terminates when a line containing only a
dot is encountered. This argument tells sendmail to ignore the dots
in incoming messages.
</p>
</dd>


<dt><b><tt class="literal">-m</tt></b></dt>
<dd>
<p>Sends a copy of the
<a name="INDEX-3661" />mail to the person sending the
mail. Normally this is done with a CC: or BCC: header in the message,
not with the <tt class="literal">-m</tt> argument.
</p>
</dd>


<dt><b><tt class="literal">-bD</tt></b></dt>
<dd>
<p>Runs sendmail as a foreground daemon so that it remains attached to
the controlling terminal.
</p>
</dd>


<dt><b><tt class="literal">-F</tt></b></dt>
<dd>
<p>Sets the sender's full name.</p>
</dd>

</dl>

<p>This is a complete list of sendmail command-line arguments at this
writing. Some of these arguments were recently introduced. Others are
obsolete in the latest version of sendmail. Check the manpage for
your system to find out exactly what arguments are available on your
system.
</p>

<p>When the <tt class="literal">sendmail</tt> command is executed, it reads
its configuration from the <em class="emphasis">sendmail.cf</em> file. A
basic <em class="emphasis">sendmail.cf</em> file can be built from
<tt class="literal">m4</tt> macros that come with the sendmail source code.
<a href="ch10_01.html">Chapter 10, "sendmail "</a> provides examples of how this is done.
The next section provides a complete list of the
<tt class="literal">m4</tt> macros that come with the <a name="INDEX-3662" /> <a name="INDEX-3663" />sendmail
distribution.
</p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appe_01.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="appe_03.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">E. A sendmail Reference</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">E.3. m4 sendmail Macros</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="index.html" /><area shape="rect" coords="266,0,333,90" href="../nfs/index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="../tshoot/index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="../fire/index-2.html" /></map>

</body>
<!-- Mirrored from nnc3.com/mags/Networking2/tcp/appe_02.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:36 GMT -->
</html>