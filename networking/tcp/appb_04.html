<html>
<!-- Mirrored from nnc3.com/mags/Networking2/tcp/appb_04.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:36 GMT -->
<head><title>Trace Statements (TCP/IP Network Administration, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Craig Hunt" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0596002971L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="TCP/IP Network Administration, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.html" alt="TCP/IP Network Administration" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appb_03.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="appb_05.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>



<h2 class="sect1">B.4. Trace Statements</h2>

<p>Trace statements
<a name="INDEX-3190" />allow you to control the trace file
and its contents from within the <em class="emphasis">gated.conf</em>
file. The trace statement is:
</p>

<blockquote><pre class="code">traceoptions
 ["<em class="replaceable">trace_file</em>" [replace] [size <em class="replaceable">bytes</em>[k|m] files n]]
 [nostamp]
 <em class="replaceable">trace_options</em> [except <em class="replaceable">trace_options</em>] 
;</pre></blockquote>

<p>Its components are as follows:</p>

<dl>
<a name="INDEX-3191" /><dt><i><em class="replaceable">trace_file</em></i></dt>
<dd>
<p>Identifies the file that receives the trace output. It has exactly
the same function as the <em class="replaceable">trace_file</em>
argument on the <tt class="literal">gated</tt> command line.
</p>
</dd>


<a name="INDEX-3192" /><dt><b><tt class="literal">replace</tt></b></dt>
<dd>
<p>Replaces the existing trace file. If you do not use this keyword, the
trace output is appended to the current contents of the file.
</p>
</dd>


<a name="INDEX-3193" /><dt><b><tt class="literal">size</tt> <em class="replaceable">bytes</em><tt class="literal">[k|m] [files</tt> <em class="replaceable">n</em><tt class="literal">]</tt></b></dt>
<dd>
<p>Limits the trace file to a maximum size of
<em class="replaceable">bytes</em>. The optional <tt class="literal">k</tt>
or <tt class="literal">m</tt> indicates thousands (<tt class="literal">k</tt>) or
millions (<tt class="literal">m</tt>) of bytes. Thus
<tt class="literal">1000000</tt> and <tt class="literal">10m</tt> are equivalent
entries. The size of the trace file cannot be less than 10k bytes.
<em class="replaceable">n</em> defines the maximum number of trace
files that should be saved. When the trace file reaches the maximum
size, it is saved as <em class="replaceable">trace_file</em>.0,
<em class="replaceable">trace_file</em>.1,
<em class="replaceable">trace_file</em>.2 up to
<em class="replaceable">trace_file</em>.<em class="replaceable">n</em>.
The next save then overwrites
<em class="replaceable">trace_file</em>.0. The value for
<em class="replaceable">n</em> must be at least 2.
</p>
</dd>


<a name="INDEX-3194" /><dt><b><tt class="literal">nostamp</tt></b></dt>
<dd>
<p>Specifies that trace lines should not begin with a timestamp.
Timestamping each line of trace data is the default.
</p>
</dd>


<a name="INDEX-3195" /><dt><i><em class="replaceable">trace_options</em></i></dt>
<dd>
<p>Defines the events to be traced by <tt class="literal">gated</tt>. Each
trace option is specified by a keyword name. The available trace
options are:
</p>

<dl>
<dt><b><tt class="literal">none</tt></b></dt>
<dd>
<p>Turns off all tracing. </p>
</dd>


<dt><b><tt class="literal">all</tt></b></dt>
<dd>
<p>Turns on all types of global tracing. </p>
</dd>


<a name="INDEX-3196" /><dt><b><tt class="literal">general</tt></b></dt>
<dd>
<p>Turns on both <tt class="literal">normal</tt> and <tt class="literal">route</tt>
tracing.
</p>
</dd>


<a name="INDEX-3197" /><dt><b><tt class="literal">state</tt></b></dt>
<dd>
<p>Traces state machine transitions for protocols such as OSPF and BGP.
The RFCs describe these protocols using <em class="emphasis">finite state
machine</em> (FSM) diagrams or tables. The protocols transition
from one state to another based on the occurrence of certain events.
For example, the state might change from <em class="emphasis">idle</em> to
<em class="emphasis">connect</em> when a <em class="emphasis">connection
open</em> event occurs. This is a highly specialized trace
flag, useful only to those who have a thorough understanding of the
protocols involved. Use this option within the protocol statement to
trace a specific protocol's transitions.
</p>
</dd>


<a name="INDEX-3198" /><dt><b><tt class="literal">normal</tt></b></dt>
<dd>
<p>Traces normal protocol interactions. Errors are always traced. </p>
</dd>


<a name="INDEX-3199" /><dt><b><tt class="literal">policy</tt></b></dt>
<dd>
<p>Traces the application of routing policies. Use this to check that
you have properly configured your routing policy.
</p>
</dd>


<a name="INDEX-3200" /><dt><b><tt class="literal">task</tt></b></dt>
<dd>
<p>Traces system-level processing. </p>
</dd>


<a name="INDEX-3201" /><dt><b><tt class="literal">timer</tt></b></dt>
<dd>
<p>Traces the various timers used by a protocol or peer. </p>
</dd>


<a name="INDEX-3202" /><dt><b><tt class="literal">route</tt></b></dt>
<dd>
<p>Traces routing table changes. Use this to check that routes are
properly installed by the protocol.
</p>
</dd>


<a name="INDEX-3203" /><dt><b><tt class="literal">detail</tt></b></dt>
<dd>
<p>Traces the contents of the packets exchanged by the router. Must be
specified before <tt class="literal">send</tt> or <tt class="literal">recv</tt>.
</p>
</dd>


<a name="INDEX-3204" /><dt><b><tt class="literal">send</tt></b></dt>
<dd>
<p>Limits the <tt class="literal">detail</tt> trace to packets sent by this
router.
</p>
</dd>


<a name="INDEX-3205" /><dt><b><tt class="literal">recv</tt></b></dt>
<dd>
<p>Limits the <tt class="literal">detail</tt> trace to packets received by
this router. Without these two options, all packets are traced when
<tt class="literal">detail</tt> is specified.
</p>
</dd>


<a name="INDEX-3206" /><dt><b><tt class="literal">symbols</tt></b></dt>
<dd>
<p>Traces the symbols read from the kernel at startup. See the
<tt class="literal">-t</tt> command-line argument.
</p>
</dd>


<a name="INDEX-3207" /><dt><b><tt class="literal">iflist</tt></b></dt>
<dd>
<p>Traces the kernel interface list. See the <tt class="literal">-t</tt>
command-line argument.
</p>
</dd>


<a name="INDEX-3208" /><dt><b><tt class="literal">parse</tt></b></dt>
<dd>
<p>Traces the lexical analyzer and parser. </p>
</dd>


<a name="INDEX-3209" /><dt><b><tt class="literal">adv</tt></b></dt>
<dd>
<p>Traces the allocation and release of blocks. </p>
</dd>

</dl>
</dd>


<a name="INDEX-3210" /><dt><b><tt class="literal">except</tt> <em class="replaceable">trace_options</em></b></dt>
<dd>
<p>Disables specific trace options. Must be used in conjunction with
<em class="replaceable">trace_options</em> that enable a wide variety
of tracing. For example, <tt class="literal">traceoptions</tt>
<tt class="literal">all</tt> <tt class="literal">except</tt>
<tt class="literal">state</tt> turns on all traces except for finite state
machine tracing.
</p>
</dd>

</dl>

<p><tt class="literal">gated</tt> provides the flexibility for you to choose
where you want to control tracing -- on the command line or in the
configuration file. By and large, the same trace options can be set
on the <tt class="literal">gated</tt> command line or in the configuration
file. <tt class="literal">detail</tt>, <tt class="literal">send</tt>, and
<tt class="literal">recv</tt> can be set only in the configuration file.
</p>

<p>Two others, <tt class="literal">symbols</tt> and <tt class="literal">iflist</tt>,
are primarily used on the command line. Refer to the section on the
<tt class="literal">gated</tt> command for a description of setting trace
options with <tt class="literal">-t</tt>.
</p>

<p>Some trace options are useful only for protocol developers and other
experts. For most of us, <tt class="literal">general</tt>, which enables
<tt class="literal">normal</tt> and <tt class="literal">route</tt> tracing, is an
appropriate level of information for debugging routing problems.
Occasionally, <tt class="literal">policy</tt> is useful for testing a
routing policy. Most of the time, however, no tracing is needed.
</p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appb_03.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="appb_05.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">B.3. Directive Statements</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">B.5. Options Statements</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="index.html" /><area shape="rect" coords="266,0,333,90" href="../nfs/index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="../tshoot/index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="../fire/index-2.html" /></map>

</body>
<!-- Mirrored from nnc3.com/mags/Networking2/tcp/appb_04.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:36 GMT -->
</html>