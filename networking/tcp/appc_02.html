<html>
<!-- Mirrored from nnc3.com/mags/Networking2/tcp/appc_02.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:36 GMT -->
<head><title>named.conf Configuration Commands (TCP/IP Network Administration, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Craig Hunt" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0596002971L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="TCP/IP Network Administration, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.html" alt="TCP/IP Network Administration" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appc_01.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="appc_03.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>



<h2 class="sect1">C.2. named.conf Configuration Commands</h2>

<p>The <em class="emphasis">named.conf</em> file defines
<a name="INDEX-3438" />the name server configuration and
tells <tt class="literal">named</tt> where to obtain the name server
database information. BIND 8 uses the following configuration
commands: <tt class="literal">key</tt>, <tt class="literal">acl</tt>,
<tt class="literal">options</tt>, <tt class="literal">logging</tt>,
<tt class="literal">zone</tt>, <tt class="literal">server</tt>,
<tt class="literal">controls</tt>, and <tt class="literal">trusted-keys</tt>.
BIND 9 uses the same eight commands and adds the
<tt class="literal">view</tt> command.
</p>

<p>In addition to these configuration commands, both BIND 8 and BIND 9
provide an <tt class="literal">include</tt> statement used to load an
external file that contains any of the configuration commands. For
example:
</p>

<blockquote><pre class="code">include /var/named/keys</pre></blockquote>

<p>copies the file <em class="emphasis">/var/named/keys</em>, which might be
a file containing <tt class="literal">key</tt> and
<tt class="literal">trusted-key</tt> commands into the
<em class="emphasis">named.conf</em> file.
</p>

<a name="tcp3-APP-C-SECT-2.1" /><div class="sect2">
<h3 class="sect2">C.2.1. The key Statement</h3>

<p>The <tt class="literal">key</tt><a name="INDEX-3439" /> statement assigns an internal
name used to reference an authentication method.
<tt class="literal">key</tt> statements usually occur near the start of the
configuration because forward references are not allowed. The syntax
of the <tt class="literal">key</tt> statement for both BIND 8 and BIND 9
is:
</p>

<blockquote><pre class="code">key <em class="emphasis">key_id</em> {
  algorithm <em class="emphasis">algorithm_id</em>;
  secret <em class="emphasis">secret_string</em>;
};</pre></blockquote>

<dl>
<dt><i><em class="replaceable">key_id</em> </i></dt>
<dd>
<p>The name assigned to the authentication method.</p>
</dd>


<dt><i><em class="replaceable">algorithm_id</em> </i></dt>
<dd>
<p>The authentication algorithm used.</p>
</dd>


<dt><i><em class="replaceable">secret_string</em> </i></dt>
<dd>
<p>A base64-encoded key used by the algorithm.</p>
</dd>

</dl>

</div>
<a name="tcp3-APP-C-SECT-2.2" /><div class="sect2">
<h3 class="sect2">C.2.2. The acl Statement</h3>

<p>The <tt class="literal">acl</tt><a name="INDEX-3440" /> command assigns a name to an
address match list so that it can be referenced later in the
configuration. Forward references are not allowed. The syntax of the
<tt class="literal">acl</tt> command for both BIND 8 and BIND 9 is:
</p>

<blockquote><pre class="code">acl <em class="emphasis">name</em> {
   <em class="emphasis">address_match_list</em>
};</pre></blockquote>

<dl>
<dt><i><em class="replaceable">name</em> </i></dt>
<dd>
<p>An internal name for the list. There are four predefined names:</p>

<dl>
<dt><b><tt class="literal">any</tt></b></dt>
<dd>
<p>Match every possible address.</p>
</dd>


<dt><b><tt class="literal">none</tt></b></dt>
<dd>
<p>Match no address.</p>
</dd>


<dt><b><tt class="literal">localhost</tt></b></dt>
<dd>
<p>Match every address assigned to the local host.</p>
</dd>


<dt><b><tt class="literal">localnet</tt></b></dt>
<dd>
<p>Match every address where the network portion is the same as the
network portion of any address assigned to the local hosts.
</p>
</dd>

</dl>
</dd>


<dt><i><em class="replaceable">address_match_list</em> </i></dt>
<dd>
<p>A list of IP addresses written in dotted decimal notation with an
optional address mask prefix. An exclamation point
(<tt class="literal">!</tt>) before an address means "don't
match" the value. An
<em class="replaceable">address_match_list</em> can also contain the
name of a previously defined access control list, including the four
predefined names.
</p>
</dd>

</dl>

</div>
<a name="tcp3-APP-C-SECT-2.3" /><div class="sect2">
<h3 class="sect2">C.2.3. The trusted-keys Statement</h3>

<p>The <tt class="literal">trusted-keys</tt><a name="INDEX-3441" /> statement manually
defines the public key for a remote domain when that key cannot be
securely obtained from the network. The BIND 8 and BIND 9 syntax for
the <tt class="literal">trusted-keys</tt> statement is:
</p>

<blockquote><pre class="code">trusted-keys {
   domain_name flags protocol algorithm key; [...]
};</pre></blockquote>

<dl>
<dt><i><em class="replaceable">domain_name</em></i></dt>
<dd>
<p>The name of the remote domain. </p>
</dd>


<dt><i><em class="replaceable">flags</em>, <em class="replaceable">protocol</em>, <em class="replaceable">algorithm</em></i></dt>
<dd>
<p>Attributes of the authentication method used by
the remote domain.
</p>
</dd>


<dt><i><em class="replaceable">key</em></i></dt>
<dd>
<p>A base64-encoded string representing the remote domain's public
key.
</p>
</dd>

</dl>

</div>
<a name="tcp3-APP-C-SECT-2.4" /><div class="sect2">
<h3 class="sect2">C.2.4. The server Statement</h3>

<p>The <tt class="literal">server</tt><a name="INDEX-3442" /> statement defines the
characteristics of a remote server. The BIND 8 syntax is:
</p>

<blockquote><pre class="code">server <em class="emphasis">address</em> {
  [ bogus yes|no; ]
  [ support-ixfr yes|no; ]
  [ transfers <em class="emphasis">number</em>; ]
  [ transfer-format one-answer<em class="emphasis">|</em>many-answers; ]
  [ keys { <em class="emphasis">key_id</em> [<em class="emphasis">key_id</em> ... ] }; ]
};</pre></blockquote>

<p>The <tt class="literal">server</tt> statement applies to the remote server
identified by <em class="replaceable">address</em>.
</p>

<dl>
<dt><b><tt class="literal">transfer-format</tt></b></dt>
<dd>
<p>Sets the format used for zone transfers with this server to either
the more efficient <tt class="literal">many-answers</tt> format or the
backward-compatible <tt class="literal">one-answer</tt> format.
</p>
</dd>


<dt><b><tt class="literal">bogus</tt> <tt class="literal">yes</tt></b></dt>
<dd>
<p>Prevents the local server from sending queries to this server. The
default is <tt class="literal">no</tt>, which permits queries to the remote
server.
</p>
</dd>


<dt><b><tt class="literal">support-ixfr yes</tt></b></dt>
<dd>
<p>Indicates that the remote server can support incremental transfers.
<tt class="literal">no</tt>, which is the default, says that the remote
server cannot perform incremental transfers.
</p>
</dd>


<dt><b><tt class="literal">transfers</tt></b></dt>
<dd>
<p>Defines the maximum number of concurrent inbound transfers permitted
from this server.
</p>
</dd>


<dt><b><tt class="literal">keys</tt></b></dt>
<dd>
<p>Identifies the key required by the remote host for transaction
security.
</p>
</dd>

</dl>

<a name="tcp3-APP-C-SECT-2.4.1" /><div class="sect3">
<h3 class="sect3">C.2.4.1. The BIND 9 server statement</h3>

<p>The <a name="INDEX-3443" /> <a name="INDEX-3444" />BIND 9
<tt class="literal">server</tt> statement syntax varies slightly. It is:
</p>

<blockquote><pre class="code">server <em class="emphasis">address</em> {
  [ bogus yes|no; ]
  [ provide-ixfr yes|no; ]
  [ request-ixfr yes|no; ]
  [ transfers <em class="emphasis">number</em>; ]
  [ transfer-format one-answer<em class="emphasis">|</em>many-answers; ]
  [ keys { <em class="emphasis">key_id</em> [<em class="emphasis">key_id</em> ... ] }; ]
};</pre></blockquote>

<p>All of the fields are the same as BIND 8, with the exception that
<tt class="literal">support-ixfr</tt> has been replaced by two options:
</p>

<dl>
<dt><b><tt class="literal">provide-ixfr</tt></b></dt>
<dd>
<p>Indicates that the local server will provide incremental zone
transfers to the remote server.
</p>
</dd>


<dt><b><tt class="literal">request-ixfr</tt></b></dt>
<dd>
<p>Indicates that the local server will request incremental zone
transfers from the remote server.
</p>
</dd>

</dl>

</div>
</div>
<a name="tcp3-APP-C-SECT-2.5" /><div class="sect2">
<h3 class="sect2">C.2.5. The options Statement</h3>

<p>The <tt class="literal">options</tt><a name="INDEX-3445" />
statement defines global options for BIND and the DNS protocol. The
BIND 8 syntax of the <tt class="literal">options</tt> command is:
</p>

<blockquote><pre class="code">options {
  [ version <em class="emphasis">string</em>; ]
  [ directory <em class="emphasis">pathname</em>; ]
  [ named-xfer <em class="emphasis">pathname</em>; ]
  [ dump-file <em class="emphasis">pathname</em>; ]
  [ memstatistics-file <em class="emphasis">pathname</em>; ]
  [ pid-file <em class="emphasis">pathname</em>; ]
  [ statistics-file <em class="emphasis">pathname</em>; ]
  [ auth-nxdomain yes|no; ]
  [ deallocate-on-exit yes|no; ]
  [ dialup yes|no; ]
  [ fake-iquery yes|no; ]
  [ fetch-glue yes|no; ]
  [ has-old-clients yes|no; ]
  [ host-statistics yes|no; ]
  [ multiple-cnames yes|no; ]
  [ notify yes|no; ]
  [ recursion yes|no; ]
  [ rfc2308-type1 yes|no; ]
  [ use-id-pool yes|no; ]
  [ treat-cr-as-space yes|no; ]
  [ also-notify { <em class="emphasis">address-list</em>; };
  [ forward only|first; ]
  [ forwarders { <em class="emphasis">address-list</em>; }; ]
  [ check-names master|slave|response  warn|fail|ignore; ]
  [ allow-query { <em class="emphasis">address_match_list</em> }; ]
  [ allow-transfer { <em class="emphasis">address_match_list</em> }; ]
  [ allow-recursion { <em class="emphasis">address_match_list</em> }; ]
  [ blackhole { <em class="emphasis">address_match_list</em> }; ]
  [ listen-on [ port <em class="emphasis">ip_port</em> ] { <em class="emphasis">address_match_list</em> }; ]
  [ query-source [address <em class="emphasis">ip_addr</em>|*] [port <em class="emphasis">ip_port</em>|*] ; ]
  [ lame-ttl <em class="emphasis">number</em>; ]
  [ max-transfer-time-in <em class="emphasis">number</em>; ]
  [ max-ncache-ttl <em class="emphasis">number</em>; ]
  [ min-roots <em class="emphasis">number</em>; ]
  [ serial-queries <em class="emphasis">number</em>; ]
  [ transfer-format one-answer|many-answers; ]
  [ transfers-in  <em class="emphasis">number</em>; ]
  [ transfers-out <em class="emphasis">number</em>; ]
  [ transfers-per-ns <em class="emphasis">number</em>; ]
  [ transfer-source <em class="emphasis">ip_addr</em>; ]
  [ maintain-ixfr-base yes|no; ]
  [ max-ixfr-log-size <em class="emphasis">number</em>; ]
  [ coresize <em class="emphasis">size</em>; ]
  [ datasize <em class="emphasis">size</em>; ]
  [ files <em class="emphasis">size</em>; ]
  [ stacksize <em class="emphasis">size</em>; ]
  [ cleaning-interval <em class="emphasis">number</em>; ]
  [ heartbeat-interval <em class="emphasis">number</em>; ]
  [ interface-interval <em class="emphasis">number</em>; ]
  [ statistics-interval <em class="emphasis">number</em>; ]
  [ topology { <em class="emphasis">address_match_list</em> }; ]
  [ sortlist { <em class="emphasis">address_match_list</em> }; ]
  [ rrset-order { <em class="emphasis">order_spec</em> ; [ <em class="emphasis">order_spec</em> ; ... ] ] };
};</pre></blockquote>

<p>There are almost a dozen different types of values for these options.
Two options, <tt class="literal">check-names</tt> and
<tt class="literal">transfer-format</tt>, accept keyword values. Boolean
options accept either <tt class="literal">yes</tt> or
<tt class="literal">no</tt>. All other options expect an appropriate value
in a specific format. Some formats
(<em class="replaceable">string</em>,
<em class="replaceable">number</em>,
<em class="replaceable">pathname</em>,
<em class="replaceable">domain</em>, <em class="replaceable">type</em>,
<em class="replaceable">class</em>, <em class="replaceable">ip_port</em>,
and <em class="replaceable">ip_addr</em>) are self-explanatory. Some
formats require a little explanation:.
</p>

<dl>
<a name="INDEX-3446" /><dt><i><em class="replaceable">address-list</em></i></dt>
<dd>
<p><tt class="literal">A</tt> list of IP addresses separated by semicolons.
This is more limited than an
<em class="replaceable">address_match_list</em>.
</p>
</dd>


<a name="INDEX-3447" /><dt><i><em class="replaceable">address_match_list</em></i></dt>
<dd>
<p>A list of addresses, <tt class="literal">acl</tt> names, and
<tt class="literal">key_ids</tt>.
</p>
</dd>


<a name="INDEX-3448" /><dt><i><em class="replaceable">order_spec</em></i></dt>
<dd>
<p>A multi-part rule that defines how resource records are ordered when
multiple records are sent in response to a single query. The
structure of an <em class="replaceable">order_spec</em> is:
</p>


<blockquote><pre class="code">[ class <em class="emphasis">class</em> ][ type <em class="emphasis">type</em> ][ name "<em class="emphasis">domain</em>" ] order <em class="emphasis">order</em></pre></blockquote>

<p><em class="replaceable">class</em>, <em class="replaceable">type</em> and
<em class="replaceable">domain</em> are self-explanatory.
<em class="replaceable">order</em> is one of three possible values:
</p>

<dl>
<dt><b><tt class="literal">fixed</tt></b></dt>
<dd>
<p>The order in which records are defined in the zone file is
maintained.
</p>
</dd>


<dt><b><tt class="literal">random</tt></b></dt>
<dd>
<p>Resource records are shuffled into a random order. </p>
</dd>


<dt><b><tt class="literal">cyclic</tt></b></dt>
<dd>
<p>The resource records are rotated in a round-robin manner, which is
the default order.
</p>
</dd>

</dl>
</dd>

</dl>

<p>The BIND 8 options are:</p>

<dl>
<a name="INDEX-3449" /><dt><b><tt class="literal">version</tt></b></dt>
<dd>
<p>The string returned when the server is queried for its version.</p>
</dd>


<a name="INDEX-3450" /><dt><b><tt class="literal">directory</tt></b></dt>
<dd>
<p>The path of the working directory from which the server reads and
writes files.
</p>
</dd>


<a name="INDEX-3451" /><dt><b><tt class="literal">named-xfer</tt></b></dt>
<dd>
<p>The path to the <tt class="literal">named-xfer</tt> program.</p>
</dd>


<a name="INDEX-3452" /><dt><b><tt class="literal">dump-file</tt></b></dt>
<dd>
<p>The file where the database is dumped if <tt class="literal">named</tt>
receives a SIGINT signal. The default filename is
<em class="emphasis">named_dump.db</em>.
</p>
</dd>


<a name="INDEX-3453" /><dt><b><tt class="literal">memstatistics-file</tt></b></dt>
<dd>
<p>The file where memory usage statistics are written. The default
filename is <em class="emphasis">named.memstats</em>.
</p>
</dd>


<a name="INDEX-3454" /><dt><b><tt class="literal">pid-file</tt></b></dt>
<dd>
<p>The file where the process ID is stored.</p>
</dd>


<a name="INDEX-3455" /><dt><b><tt class="literal">statistics-file</tt></b></dt>
<dd>
<p>The file where statistics are written when <tt class="literal">named</tt>
receives a SIGILL signal. The default filename is
<em class="emphasis">named.stats</em>.
</p>
</dd>


<a name="INDEX-3456" /><dt><b><tt class="literal">auth-nxdomain</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt>, which is the default, causes the server to
respond as an authoritative server.
</p>
</dd>


<a name="INDEX-3457" /><dt><b><tt class="literal">deallocate-on-exit</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> writes memory usage to the
<em class="emphasis">named.memstats</em> file. The default is
<tt class="literal">no</tt>.
</p>
</dd>


<a name="INDEX-3458" /><dt><b><tt class="literal">dialup</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> optimizes the server for a dial-up network
operation. The default is <tt class="literal">no</tt>.
</p>
</dd>


<a name="INDEX-3459" /><dt><b><tt class="literal">fake-iquery</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> makes the server issue a fake reply instead of
an error in response to inverse queries. The default is
<tt class="literal">no</tt>.
</p>
</dd>


<a name="INDEX-3460" /><dt><b><tt class="literal">fetch-glue</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt>, which is the default, retrieves all of the
glue records for a response.
</p>
</dd>


<a name="INDEX-3461" /><dt><b><tt class="literal">has-old-clients</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> sets <tt class="literal">auth-nxdomain</tt> and
<tt class="literal">maintain-ixfr-base</tt> to <tt class="literal">yes</tt> and
<tt class="literal">rfc2308-type1</tt> to <tt class="literal">no</tt>.
</p>
</dd>


<a name="INDEX-3462" /><dt><b><tt class="literal">host-statistics</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> keeps statistics on every host. The default is
<tt class="literal">no</tt>.
</p>
</dd>


<a name="INDEX-3463" /><dt><b><tt class="literal">multiple-cnames</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> permits multiple CNAME records for a domain
name. The default is <tt class="literal">no</tt>.
</p>
</dd>


<a name="INDEX-3464" /><dt><b><tt class="literal">notify</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt>, which is the default, sends DNS NOTIFY
messages when a zone is updated.
</p>
</dd>


<a name="INDEX-3465" /><dt><b><tt class="literal">recursion</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt>, the default, recursively seeks answers to
queries.
</p>
</dd>


<a name="INDEX-3466" /><dt><b><tt class="literal">rfc2308-type1</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> returns NS records with the SOA record for
negative caching. <tt class="literal">no</tt>, the default, returns only
the SOA record for compatibility with old servers.
</p>
</dd>


<a name="INDEX-3467" /><dt><b><tt class="literal">use-id-pool</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> tracks outstanding query IDs to increase
randomness. <tt class="literal">no</tt> is the default.
</p>
</dd>


<a name="INDEX-3468" /><dt><b><tt class="literal">treat-cr-as-space</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> treats carriage returns as spaces when loading
a zone file. <tt class="literal">no</tt> is the default.
</p>
</dd>


<a name="INDEX-3469" /><dt><b><tt class="literal">also-notify</tt></b></dt>
<dd>
<p>Identifies unofficial name servers to which the server should send
DNS NOTIFY messages.
</p>
</dd>


<a name="INDEX-3470" /><dt><b><tt class="literal">forward</tt></b></dt>
<dd>
<p><tt class="literal">first</tt> causes the server to first query the
<tt class="literal">forwarders</tt> and then look for the answer itself.
<tt class="literal">only</tt> causes the server to query only the
forwarders.
</p>
</dd>


<a name="INDEX-3471" /><dt><b><tt class="literal">forwarders</tt></b></dt>
<dd>
<p>Lists the IP addresses of the servers to which queries are forwarded.
The default is not to use forwarding.
</p>
</dd>


<a name="INDEX-3472" /><dt><b><tt class="literal">check-names</tt></b></dt>
<dd>
<p>Checks hostnames for compliance with the RFC specifications. Names
can be checked when the master server loads the zone
(<tt class="literal">master</tt>), when the slave transfers the zone
(<tt class="literal">slave</tt>), or when a response is processed
(<tt class="literal">response</tt>). If an error is detected, it can be
ignored (<tt class="literal">ignore</tt>), a warning can be sent
(<tt class="literal">warn</tt>), or the bad name can be rejected
(<tt class="literal">fail</tt>).
</p>
</dd>


<a name="INDEX-3473" /><dt><b><tt class="literal">allow-query</tt></b></dt>
<dd>
<p>Only queries from hosts in the address list will be accepted. The
default is to accept queries from all hosts.
</p>
</dd>


<a name="INDEX-3474" /><dt><b><tt class="literal">allow-transfer</tt></b></dt>
<dd>
<p>Only hosts in the address list are allowed to receive zone transfers.
The default is to allow transfers to all hosts.
</p>
</dd>


<a name="INDEX-3475" /><dt><b><tt class="literal">allow-recursion</tt></b></dt>
<dd>
<p>Only listed hosts are allowed to make recursive queries through this
server. The default is to do recursive queries for all hosts.
</p>
</dd>


<a name="INDEX-3476" /><dt><b><tt class="literal">blackhole</tt></b></dt>
<dd>
<p>Lists hosts from which this server will not accept queries.</p>
</dd>


<a name="INDEX-3477" /><dt><b><tt class="literal">listen-on</tt></b></dt>
<dd>
<p>Defines the interfaces and ports on which the server provides name
service. By default, the server listens to the standard port (53) on
all installed interfaces.
</p>
</dd>


<a name="INDEX-3478" /><dt><b><tt class="literal">query-source</tt></b></dt>
<dd>
<p>Defines the address and port used to query other servers.</p>
</dd>


<a name="INDEX-3479" /><dt><b><tt class="literal">lame-ttl</tt></b></dt>
<dd>
<p>The amount of time a lame server indication will be cached. The
default is 10 minutes.
</p>
</dd>


<a name="INDEX-3480" /><dt><b><tt class="literal">max-transfer-time-in</tt></b></dt>
<dd>
<p>The maximum amount of time the server waits for an inbound transfer
to complete. The default is 120 minutes (2 hours).
</p>
</dd>


<a name="INDEX-3481" /><dt><b><tt class="literal">max-ncache-ttl</tt></b></dt>
<dd>
<p>The amount of time this server will cache negative answers. The
default is 3 hours and the maximum acceptable value is 7 days.
</p>
</dd>


<a name="INDEX-3482" /><dt><b><tt class="literal">min-roots</tt></b></dt>
<dd>
<p>The minimum number of root servers that must be reachable for queries
involving the root servers to be accepted. The default is 2.
</p>
</dd>


<a name="INDEX-3483" /><dt><b><tt class="literal">serial-queries</tt></b></dt>
<dd>
<p>The number of outstanding SOA queries a slave server can have at one
time. The default is 4.
</p>
</dd>


<a name="INDEX-3484" /><dt><b><tt class="literal">transfer-format</tt></b></dt>
<dd>
<p><tt class="literal">one-answer</tt> transfers one resource record per
message. <tt class="literal">many-answers</tt> transfers as many resource
records as possible in each message.
</p>
</dd>


<a name="INDEX-3485" /><dt><b><tt class="literal">transfers-in</tt></b></dt>
<dd>
<p>Sets the maximum number of concurrent inbound zone transfers. The
default value is 10.
</p>
</dd>


<a name="INDEX-3486" /><dt><b><tt class="literal">transfers-out</tt></b></dt>
<dd>
<p>Lists the number of concurrent outbound zone transfers.</p>
</dd>


<a name="INDEX-3487" /><dt><b><tt class="literal">transfers-per-ns</tt></b></dt>
<dd>
<p>Limits the number of concurrent inbound zone transfers from any one
name server. The default value is 2.
</p>
</dd>


<a name="INDEX-3488" /><dt><b><tt class="literal">transfer-source</tt></b></dt>
<dd>
<p>The IP address of the network interface this server uses to transfer
zones from remote masters.
</p>
</dd>


<a name="INDEX-3489" /><dt><b><tt class="literal">maintain-ixfr-base</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> keeps a log of incremental zone transfers.
<tt class="literal">no</tt> is the default.
</p>
</dd>


<a name="INDEX-3490" /><dt><b><tt class="literal">max-ixfr-log-size</tt></b></dt>
<dd>
<p>Sets the maximum size of the incremental zone transfer log file.</p>
</dd>


<a name="INDEX-3491" /><dt><b><tt class="literal">coresize</tt></b></dt>
<dd>
<p>Sets the maximum size of a core dump file. </p>
</dd>


<a name="INDEX-3492" /><dt><b><tt class="literal">datasize</tt></b></dt>
<dd>
<p>Limits the amount of data memory the server may use.</p>
</dd>


<a name="INDEX-3493" /><dt><b><tt class="literal">files</tt></b></dt>
<dd>
<p>Limits the number of files the server may have open concurrently. The
default is unlimited.
</p>
</dd>


<a name="INDEX-3494" /><dt><b><tt class="literal">stacksize</tt></b></dt>
<dd>
<p>Limits amount of stack memory the server may use.</p>
</dd>


<a name="INDEX-3495" /><dt><b><tt class="literal">cleaning-interval</tt></b></dt>
<dd>
<p>Sets the time interval for the server to remove expired resource
records from the cache. The default is 60 minutes.
</p>
</dd>


<a name="INDEX-3496" /><dt><b><tt class="literal">heartbeat-interval</tt></b></dt>
<dd>
<p>Sets the time interval used for zone maintenance when the
<tt class="literal">dialup</tt> option is set to <tt class="literal">yes</tt>. 60
minutes is the default.
</p>
</dd>


<a name="INDEX-3497" /><dt><b><tt class="literal">interface-interval</tt></b></dt>
<dd>
<p>Sets the time interval for the server to scan the network interface
list looking for new interfaces or interfaces that have been removed.
The default is every 60 minutes.
</p>
</dd>


<a name="INDEX-3498" /><dt><b><tt class="literal">statistics-interval</tt></b></dt>
<dd>
<p>Sets the time interval for the server to log statistics. The default
is every 60 minutes.
</p>
</dd>


<a name="INDEX-3499" /><dt><b><tt class="literal">topology</tt></b></dt>
<dd>
<p>Forces the server to prefer certain remote name servers over others.
Normally, the server prefers the remote name server that is
topologically closest to itself.
</p>
</dd>


<a name="INDEX-3500" /><dt><b><tt class="literal">sortlist</tt></b></dt>
<dd>
<p>Defines a sort algorithm applied to resource records before sending
them to the client.
</p>
</dd>


<a name="INDEX-3501" /><dt><b><tt class="literal">rrset-order</tt></b></dt>
<dd>
<p>Specifies the ordering used when multiple records are returned
<a name="INDEX-3502" />for a single query.
</p>
</dd>

</dl>

<a name="tcp3-APP-C-SECT-2.5.1" /><div class="sect3">
<h3 class="sect3">C.2.5.1. The BIND 9 options statement</h3>

<p>The <a name="INDEX-3503" /> <a name="INDEX-3504" />BIND 9
syntax of the <tt class="literal">options</tt> command is:
</p>

<blockquote><pre class="code">options {
  [ version <em class="emphasis">string</em>; ]
  [ directory <em class="emphasis">pathname</em>; ]
  [ additional-from-auth yes|no; ] 
  [ additional-from-cache yes|no; ]
  [ dump-file <em class="emphasis">pathname</em>; ]
  [ pid-file <em class="emphasis">pathname</em>; ]
  [ statistics-file <em class="emphasis">pathname</em>; ]
  [ auth-nxdomain yes|no; ]
  [ dialup yes|no; ]
  [ notify yes|no|explicit; ] 
  [ notify-source [<em class="emphasis">ip_addr</em>|*] [port <em class="emphasis">ip_port</em>] ; ]
  [ notify-source-v6 [<em class="emphasis">ip_addr</em>|*] [port <em class="emphasis">ip_port</em>] ; ]
  [ recursion yes|no; ]
  [ recursive-clients <em class="emphasis">number</em>; ] 
  [ tcp-clients <em class="emphasis">number</em>; ]
  [ also-notify { <em class="emphasis">address-list</em>; };
  [ forward only|first; ]
  [ forwarders { <em class="emphasis">address-list</em>; }; ]
  [ allow-notify { <em class="emphasis">address_match_list</em> }; ]
  [ allow-query { <em class="emphasis">address_match_list</em> }; ]
  [ allow-transfer { <em class="emphasis">address_match_list</em> }; ]
  [ allow-recursion { <em class="emphasis">address_match_list</em> }; ]
  [ blackhole { <em class="emphasis">address_match_list</em> }; ]
  [ listen-on [ port <em class="emphasis">ip_port</em> ] { <em class="emphasis">address_match_list</em> }; ] 
  [ listen-on-v6 [ port <em class="emphasis">ip_port</em> ] { <em class="emphasis">address_match_list</em> }; ]
  [ port <em class="emphasis">ip_port</em>; ]
  [ query-source [address <em class="emphasis">ip_addr</em>|*] [port <em class="emphasis">ip_port</em>|*] ; ] 
  [ query-source-v6 [address <em class="emphasis">ip6_addr</em>|*] [port <em class="emphasis">ip_port</em>|*] ; ]
  [ lame-ttl <em class="emphasis">number</em>; ]
  [ max-transfer-time-in <em class="emphasis">number</em>; ] 
  [ max-transfer-time-out <em class="emphasis">number</em>; ] 
  [ max-transfer-idle-in <em class="emphasis">number</em>; ] 
  [ max-transfer-idle-out <em class="emphasis">number</em>; ] 
  [ max-refresh-time <em class="emphasis">number</em>; ] 
  [ max-retry-time <em class="emphasis">number</em>; ] 
  [ max-cache-ttl <em class="emphasis">number</em>; ]
  [ max-ncache-ttl <em class="emphasis">number</em>; ]
  [ min-refresh-time <em class="emphasis">number</em>; ] 
  [ min-retry-time <em class="emphasis">number</em>; ]
  [ transfer-format one-answer|many-answers; ]
  [ transfers-in  <em class="emphasis">number</em>; ]
  [ transfers-out <em class="emphasis">number</em>; ]
  [ transfers-per-ns <em class="emphasis">number</em>; ]
  [ transfer-source <em class="emphasis">ip_addr</em>|*] [port <em class="emphasis">ip_port</em>|*]; ] 
  [ transfer-source-v6 <em class="emphasis">ip6_addr</em>|*] [port <em class="emphasis">ip_port</em>|*]; ]
  [ coresize <em class="emphasis">size</em>; ]
  [ datasize <em class="emphasis">size</em>; ]
  [ files <em class="emphasis">size</em>; ]
  [ stacksize <em class="emphasis">size</em>; ]
  [ cleaning-interval <em class="emphasis">number</em>; ]
  [ heartbeat-interval <em class="emphasis">number</em>; ]
  [ interface-interval <em class="emphasis">number</em>; ]
  [ sortlist { <em class="emphasis">address_match_list</em> }; ]
  [ sig-validity-interval <em class="emphasis">number</em>; ]
  [ tkey-dhkey <em class="emphasis">key_name</em> <em class="emphasis">key_tag</em>; ]
  [ tkey-domain <em class="emphasis">domain</em>; ]
  [ zone-statistics yes|no; ]
};</pre></blockquote>

<p>Many BIND 9 options are the same as those used for BIND 8 and perform
exactly the same functions. A few options have been added to BIND 9
to handle IPv6, which is an integral part of BIND 9. These options,
<tt class="literal">listen-on-v6</tt>, <tt class="literal">notify-source-v6</tt>,
<tt class="literal">query-source-v6</tt>, and
<tt class="literal">transfer-source-v6</tt>, perform exactly the same
functions as the like-named options do for IPv4. Many BIND 8 options
are no longer needed because important functions have been
incorporated into the new BIND 9 code. However, the list of options
is no shorter because many new options have been added:
</p>

<dl>
<a name="INDEX-3505" /><dt><b><tt class="literal">additional-from-auth</tt> </b></dt>
<dd>
<p><tt class="literal">yes</tt>, the default, causes the server to use
information from any zone for which it is authoritative when
completing the additional data section of a response.
</p>
</dd>


<a name="INDEX-3506" /><dt><b><tt class="literal">additional-from-cache</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt>, the default, causes the server to use
information from its cache when completing the additional data
section of a response.
</p>
</dd>


<a name="INDEX-3507" /><dt><b><tt class="literal">notify-source</tt></b></dt>
<dd>
<p>Defines the address and port used to send NOTIFY messages.</p>
</dd>


<a name="INDEX-3508" /><dt><b><tt class="literal">recursive-clients</tt> </b></dt>
<dd>
<p>Defines the maximum number of outstanding recursive lookups the
server will perform for its clients. The default is 1000.
</p>
</dd>


<a name="INDEX-3509" /><dt><b><tt class="literal">tcp-clients</tt></b></dt>
<dd>
<p>Defines the maximum number of concurrent client connections. The
default is 1000.
</p>
</dd>


<a name="INDEX-3510" /><dt><b><tt class="literal">allow-notify</tt></b></dt>
<dd>
<p>Identifies the servers that are permitted to send NOTIFY messages to
the slave servers.
</p>
</dd>


<a name="INDEX-3511" /><dt><b><tt class="literal">port</tt></b></dt>
<dd>
<p>Defines the port number used by the server. The default is standard
port 53.
</p>
</dd>


<a name="INDEX-3512" /><dt><b><tt class="literal">max-transfer-time-out</tt></b></dt>
<dd>
<p>Defines the maximum time allowed for outbound zone transfers. The
default is 2 hours.
</p>
</dd>


<a name="INDEX-3513" /><dt><b><tt class="literal">max-transfer-idle-in</tt> </b></dt>
<dd>
<p>Defines the maximum time that an inbound zone transfer will be
allowed to sit idle. The default is 1 hour.
</p>
</dd>


<a name="INDEX-3514" /><dt><b><tt class="literal">max-transfer-idle-out</tt> </b></dt>
<dd>
<p>Defines the maximum time that an outbound zone transfer will be
allowed to sit idle. The default is 1 hour.
</p>
</dd>


<a name="INDEX-3515" /><dt><b><tt class="literal">max-refresh-time</tt> </b></dt>
<dd>
<p>Sets the maximum refresh time this server will use when acting as a
slave. This value overrides the refresh time set in the SOA record of
the zone for which this server acts as a slave.
</p>
</dd>


<a name="INDEX-3516" /><dt><b><tt class="literal">max-retry-time</tt> </b></dt>
<dd>
<p>Sets the maximum retry time this server will use when acting as a
slave. This value overrides the retry time set in the SOA record of
the zone for which this server acts as a slave.
</p>
</dd>


<a name="INDEX-3517" /><dt><b><tt class="literal">max-cache-ttl</tt></b></dt>
<dd>
<p>Sets the maximum amount of time this server will cache data. This
value overrides the TTL values defined in the zone from which the
data was retrieved.
</p>
</dd>


<a name="INDEX-3518" /><dt><b><tt class="literal">min-refresh-time</tt> </b></dt>
<dd>
<p>Sets the minimum refresh time this server will use when acting as a
slave. This value overrides the refresh time set in the SOA record of
the zone for which this server acts as a slave.
</p>
</dd>


<a name="INDEX-3519" /><dt><b><tt class="literal">min-retry-time</tt></b></dt>
<dd>
<p>Sets the minimum retry time this server will use when acting as a
slave. This value overrides the retry time set in the SOA record of
the zone for which this server acts as a slave.
</p>
</dd>


<a name="INDEX-3520" /><dt><b><tt class="literal">sig-validity-interval</tt></b></dt>
<dd>
<p>Defines the amount of time that digital signatures generated for
automatic updates will be considered valid. The default is 30 days.
</p>
</dd>


<a name="INDEX-3521" /><dt><b><tt class="literal">tkey-dhkey</tt></b></dt>
<dd>
<p>Identifies the Diffie-Hellman key used by the server to generate
shared keys.
</p>
</dd>


<a name="INDEX-3522" /><dt><b><tt class="literal">tkey-domain</tt></b></dt>
<dd>
<p>Defines the domain name appended to shared keys. Normally this is the
server's domain name.
</p>
</dd>


<a name="INDEX-3523" /><dt><b><tt class="literal">zone-statistics</tt></b></dt>
<dd>
<p><tt class="literal">yes</tt> causes the server to collect statistics on all
zones. The default is <tt class="literal">no</tt>.
</p>
</dd>

</dl>

<p>Options change over time. Check the documentation that comes with the
BIND 9 distribution for the latest list of options.
</p>

</div>
</div>
<a name="tcp3-APP-C-SECT-2.6" /><div class="sect2">
<h3 class="sect2">C.2.6. The logging Statement</h3>

<p>The <tt class="literal">logging</tt> <a name="INDEX-3524" /> <a name="INDEX-3525" />statement defines the logging
options for the server. The <tt class="literal">logging</tt> statement can
include two different types of subordinate clauses: the
<tt class="literal">channel</tt> clause and the <tt class="literal">category</tt>
clause. The BIND 8 syntax of the command is:
</p>

<blockquote><pre class="code">logging {
  [ channel <em class="emphasis">channel_name</em> {
     file <em class="emphasis">pathname</em>
       [ versions <em class="emphasis">number</em>|unlimited ]
       [ size <em class="emphasis">size</em> ]
    |syslog kern|user|mail|daemon|auth|syslog|lpr
                |news|uucp|cron|authpriv|ftp
                |local0|local1|local2|local3
                |local4|local5|local6|local7
    |null;

    [ severity critical|error|warning|notice
                 |info|debug [<em class="emphasis">level</em>]|dynamic; ]
    [ print-category yes|no; ]
    [ print-severity yes|no; ]
    [ print-time yes|no; ]
  }; ]

  [ category <em class="emphasis">category_name</em> {
    <em class="emphasis">channel_name</em>; [ <em class="emphasis">channel_name</em>; ... ]
  }; ]
  ...
};</pre></blockquote>

<p>The <tt class="literal">channel</tt> clause defines how logging messages
are handled. Messages are written to a file
(<tt class="literal">file</tt>), sent to syslog
(<tt class="literal">syslog</tt>), or discarded (<tt class="literal">null</tt>).
If a file is used, you can specify how many old versions are retained
(<tt class="literal">version</tt>), how large the log file is allowed to
grow (<tt class="literal">size</tt>), and the severity of the messages
written to the log file (<tt class="literal">severity</tt>). You can
specify that the time (<tt class="literal">print-time</tt>), category
(<tt class="literal">print-category</tt>), and severity
(<tt class="literal">print-severity</tt>) of the message be included in the
log.
</p>

<p>The <tt class="literal">category</tt><a name="INDEX-3526" /> clause defines the
types of messages sent to the channel. Thus the
<tt class="literal">category</tt> clause defines what is logged, and the
<tt class="literal">channel</tt> clause defines where it is logged. The
categories are listed in <a href="appc_02.html#tcp3-APP-C-TABLE-1">Table C-1</a>.
</p>

<a name="tcp3-APP-C-TABLE-1" /><h4 class="objtitle">Table C-1. BIND 8 logging categories </h4><table border="1">



<tr>
<th>
<p>Category</p>
</th>
<th>
<p>Type of messages logged</p>
</th>
</tr>


<tr>
<td>
<p>cname</p>
</td>
<td>
<p>Messages recording CNAME references.</p>
</td>
</tr>
<tr>
<td>
<p>config</p>
</td>
<td>
<p>Messages about configuration file processing. </p>
</td>
</tr>
<tr>
<td>
<p>db</p>
</td>
<td>
<p>Messages that log database operations.</p>
</td>
</tr>
<tr>
<td>
<p>default</p>
</td>
<td>
<p>Various types of messages. This is the default if nothing is
specified.
</p>
</td>
</tr>
<tr>
<td>
<p>eventlib</p>
</td>
<td>
<p>Messages containing debugging data from the event system.</p>
</td>
</tr>
<tr>
<td>
<p>insist</p>
</td>
<td>
<p>Messages that report internal consistency check failures.</p>
</td>
</tr>
<tr>
<td>
<p>lame-servers</p>
</td>
<td>
<p>Messages about lame server delegations. </p>
</td>
</tr>
<tr>
<td>
<p>load</p>
</td>
<td>
<p>Messages about loading the zone.</p>
</td>
</tr>
<tr>
<td>
<p>maintenance</p>
</td>
<td>
<p>Messages reporting maintenance events. </p>
</td>
</tr>
<tr>
<td>
<p>ncache</p>
</td>
<td>
<p>Messages about negative caching.</p>
</td>
</tr>
<tr>
<td>
<p>notify</p>
</td>
<td>
<p>Messages tracing the NOTIFY protocol.</p>
</td>
</tr>
<tr>
<td>
<p>os</p>
</td>
<td>
<p>Messages reporting operating system problems.</p>
</td>
</tr>
<tr>
<td>
<p>packet</p>
</td>
<td>
<p>Messages containing dumps of all of the packets sent and received.</p>
</td>
</tr>
<tr>
<td>
<p>panic</p>
</td>
<td>
<p>Messages generated by a fault that causes the server to shut down.</p>
</td>
</tr>
<tr>
<td>
<p>parser</p>
</td>
<td>
<p>Messages about configuration command processing. </p>
</td>
</tr>
<tr>
<td>
<p>queries</p>
</td>
<td>
<p>Messages about every DNS query received. </p>
</td>
</tr>
<tr>
<td>
<p>response-checks</p>
</td>
<td>
<p>Messages reporting the results of response checking.</p>
</td>
</tr>
<tr>
<td>
<p>security</p>
</td>
<td>
<p>Messages concerning the application of security criteria. These are
most meaningful if allow-update, allow-query, and allow-transfer
options are in use.
</p>
</td>
</tr>
<tr>
<td>
<p>statistics</p>
</td>
<td>
<p>Messages containing server statistics. </p>
</td>
</tr>
<tr>
<td>
<p>update</p>
</td>
<td>
<p>Messages concerning dynamic updates.</p>
</td>
</tr>
<tr>
<td>
<p>xfer-in</p>
</td>
<td>
<p>Messages recording inbound zone transfers.</p>
</td>
</tr>
<tr>
<td>
<p>xfer-out</p>
</td>
<td>
<p>Messages recording outbound zone transfers.</p>
</td>
</tr>

</table><p>

<a name="tcp3-APP-C-SECT-2.6.1" /><div class="sect3">
<h3 class="sect3">C.2.6.1. The BIND 9 logging statement</h3>

<p>The <a name="INDEX-3527" /> <a name="INDEX-3528" />BIND 9
syntax of the <tt class="literal">logging</tt> command is:
</p>

<blockquote><pre class="code">logging {
  [ channel <em class="emphasis">channel_name</em> {
     file <em class="emphasis">pathname</em>
       [ versions <em class="emphasis">number</em>|unlimited ]
       [ size <em class="emphasis">size</em> ]
    |syslog kern|user|mail|daemon|auth|syslog|lpr
                |news|uucp|cron|authpriv|ftp
                |local0|local1|local2|local3
                |local4|local5|local6|local7
    |stderr
    |null;

    [ severity critical|error|warning|notice
                 |info|debug [<em class="emphasis">level</em>]|dynamic; ]
    [ print-category yes|no; ]
    [ print-severity yes|no; ]
    [ print-time yes|no; ]
  }; ]

  [ category <em class="emphasis">category_name</em> {
    <em class="emphasis">channel_name</em>; [ <em class="emphasis">channel_name</em>; ... ]
  }; ]
  ...
};</pre></blockquote>

<p>The <tt class="literal">channel</tt> clause is essentially the same as it
was in BIND 8 with the addition of stderr as a possible destination
for messages. The <tt class="literal">category</tt> clause looks the same,
but there has been a major change in the categories supported. One
category has been renamed from <tt class="literal">db</tt> to
<tt class="literal">database</tt>. A dozen categories are no longer
supported: <tt class="literal">cname</tt>, <tt class="literal">eventlib</tt>,
<tt class="literal">insist</tt>, <tt class="literal">load</tt>,
<tt class="literal">maintenance</tt>, <tt class="literal">ncache</tt>,
<tt class="literal">os</tt>, <tt class="literal">packet</tt>,
<tt class="literal">panic</tt>, <tt class="literal">parser</tt>,
<tt class="literal">response-check</tt>, and <tt class="literal">statistics</tt>.
Six new categories have been added:
</p>

<dl>
<dt><b><tt class="literal">general</tt></b></dt>
<dd>
<p>A wide variety of messages.</p>
</dd>


<dt><b><tt class="literal">resolver</tt></b></dt>
<dd>
<p>Messages relating to DNS resolution.</p>
</dd>


<dt><b><tt class="literal">client</tt></b></dt>
<dd>
<p>Messages concerning processing of client requests.</p>
</dd>


<dt><b><tt class="literal">network</tt></b></dt>
<dd>
<p>Messages relating to network operations.</p>
</dd>


<dt><b><tt class="literal">dispatch</tt></b></dt>
<dd>
<p>Messages that trace packets sent to various server modules.</p>
</dd>


<dt><b><tt class="literal">dnssec</tt></b></dt>
<dd>
<p>Messages that track the processing of the DNSSEC and TSIG protocols.</p>
</dd>

</dl>

</div>
</div>
<a name="tcp3-APP-C-SECT-2.7" /><div class="sect2">
<h3 class="sect2">C.2.7. The zone Statement</h3>

<p>The <tt class="literal">zone</tt>
<a name="INDEX-3529" />
<a name="INDEX-3530" />statement identifies the zone being
served and defines the source of DNS database information. There are
four variants of the <tt class="literal">zone</tt> statement: one for the
master server, one for the slave servers, one for the root cache
zone, and a special one for forwarding. The BIND 8 syntax of each
variant is:
</p>

<blockquote><pre class="code">zone <em class="emphasis">domain_name</em> [ in|hs|hesiod|chaos ] { 
  type master;
  file <em class="emphasis">pathname</em>;
  [ forward only|first; ]
  [ forwarders { <em class="emphasis">address-list</em>; }; ]
  [ check-names warn|fail|ignore; ]
  [ allow-update { <em class="emphasis">address_match_list</em> }; ]
  [ allow-query { <em class="emphasis">address_match_list</em> }; ]
  [ allow-transfer { <em class="emphasis">address_match_list</em> }; ]
  [ dialup yes|no; ]
  [ notify yes|no; ]
  [ also-notify { <em class="emphasis">address-list</em> };
  [ ixfr-base <em class="emphasis">pathname</em>; ]
  [ pubkey <em class="emphasis">flags protocol algorithm key</em>; ]
};

zone <em class="emphasis">domain_name</em> [ in|hs|hesiod|chaos ] { 
  type slave|stub;
  [ file <em class="emphasis">pathname</em>; ]
  [ ixfr-base <em class="emphasis">pathname</em>; ]
  masters [port <em class="emphasis">ip_port</em>]{ <em class="emphasis">address-list</em> };
  [ forward only|first; ]
  [ forwarders { <em class="emphasis">address-list</em>; }; ]
  [ check-names warn|fail|ignore; ]
  [ allow-update { <em class="emphasis">address_match_list</em> }; ]
  [ allow-query { <em class="emphasis">address_match_list</em> }; ]
  [ allow-transfer { <em class="emphasis">address_match_list</em> }; ]
  [ transfer-source <em class="emphasis">ip_addr</em>; ]
  [ dialup yes|no; ]
  [ max-transfer-time-in <em class="emphasis">number</em>; ]
  [ notify yes|no; ]
  [ also-notify { <em class="emphasis">address-list</em> };
  [ pubkey <em class="emphasis">flags protocol algorithm key</em>; ]
};

zone "." [ in|hs|hesiod|chaos ] { 
  type hint;
  file <em class="emphasis">pathname</em>;
  [ check-names warn|fail|ignore; ]
};

zone <em class="emphasis">domain_name</em> [in|hs|hesiod|chaos] { 
  type forward;
  [ forward only|first; ]
  [ forwarders { <em class="emphasis">address-list</em>; }; ]
  [ check-names warn|fail|ignore; ]
}; </pre></blockquote>

<p>The <tt class="literal">zone</tt> keyword is followed by the name of the
domain. For the root cache, the domain name is always
"<tt class="literal">.</tt>". The domain name is followed by
the data class. This is always IN for Internet DNS service, which is
the default if no value is supplied.
</p>

<p>The <tt class="literal">type</tt> clause defines whether this is a master
server, a slave server, a forwarded zone, or the hints file for the
root cache. A stub server is a slave server that loads only the NS
records instead of the entire domain.
</p>

<p>The <tt class="literal">file</tt> clause for a master server points to the
source file from which the zone is loaded. For the slave server, it
points to the file to which the zone is written, and the
<tt class="literal">master</tt> clause points to the source of the data
written to the file. For the root cache, the <tt class="literal">file</tt>
clause points to the hints file used to initialize the cache. A
forwarded domain does not have a <tt class="literal">file</tt> clause
because no data for the forwarded domain is stored on the local
server.
</p>

<p>With the exception of the <tt class="literal">pubkey</tt> option, all of
the options available for the BIND 8 <tt class="literal">zone</tt>
statement are covered earlier in this appendix. When defined in a
<tt class="literal">zone</tt> statement, an option applies only to the
specific zone. When specified in the <tt class="literal">options</tt>
statement, an option applies to all zones. The specific settings for
a zone override the global settings of the <tt class="literal">options</tt>
statement.
</p>

<p>The <tt class="literal">pubkey</tt> option defines the DNSSEC public
encryption key for the zone when there is no trusted mechanism for
distributing public keys over the network. <tt class="literal">pubkey</tt>
defines the DNSSEC flags, protocol, and algorithm as well as a
base64-encoded version of the key. The remote server that will be
accessing this domain through DNSSEC defines the same settings using
the <tt class="literal">trusted-key</tt> command described earlier in this
appendix.
</p>

<a name="tcp3-APP-C-SECT-2.7.1" /><div class="sect3">
<h3 class="sect3">C.2.7.1. The BIND 9 zone statement</h3>

<p>The BIND 9 <a name="INDEX-3531" /> <a name="INDEX-3532" />syntax of
the four <tt class="literal">zone</tt> statement variants is:
</p>

<blockquote><pre class="code">zone <em class="emphasis">domain_name</em> [ in|hs|hesiod|chaos ] { 
  type master;
  file <em class="emphasis">pathname</em>;
  [ forward only|first; ]
  [ forwarders { <em class="emphasis">address-list</em>; }; ]
  [ allow-update { <em class="emphasis">address_match_list</em> }; ] 
  [ allow-update-forwarding { <em class="emphasis">address_match_list</em> }; ]
  [ allow-query { <em class="emphasis">address_match_list</em> }; ]
  [ allow-transfer { <em class="emphasis">address_match_list</em> }; ]
  [ allow-notify { <em class="emphasis">address_match_list</em> }; ]
  [ dialup yes|no; ]
  [ notify yes|no|notify|notify-passive|refresh|passive; ]
  [ also-notify { <em class="emphasis">address-list</em> };
  [ database <em class="emphasis">string</em>; [...] ]
  [ update-policy { <em class="emphasis">policy</em> }; ]
  [ sig-validity-interval <em class="emphasis">number</em>; ]
  [ max-refresh-time <em class="emphasis">number</em>; ] 
  [ max-retry-time <em class="emphasis">number</em>; ] 
  [ max-transfer-idle-out <em class="emphasis">number</em>; ] 
  [ max-transfer-time-out <em class="emphasis">number</em>; ] 
  [ min-refresh-time <em class="emphasis">number</em>; ] 
  [ min-retry-time <em class="emphasis">number</em>; ]
};

zone <em class="emphasis">domain_name</em> [ in|hs|hesiod|chaos ] { 
  type slave|stub;
  [ file <em class="emphasis">pathname</em>; ]
  [ ixfr-base <em class="emphasis">pathname</em>; ]
  masters [port <em class="emphasis">ip_port</em>]{ <em class="emphasis">address-list</em> };
  [ forward only|first; ]
  [ forwarders { <em class="emphasis">address-list</em>; }; ]
  [ check-names warn|fail|ignore; ]
  [ allow-update { <em class="emphasis">address_match_list</em> }; ]
  [ allow-update-forwarding { <em class="emphasis">address_match_list</em> }; ]
  [ allow-query { <em class="emphasis">address_match_list</em> }; ]
  [ allow-transfer { <em class="emphasis">address_match_list</em> }; ]
  [ transfer-source <em class="emphasis">ip_addr</em>; ]
  [ dialup yes|no|notify|notify-passive|refresh|passive; ]
  [ max-transfer-time-in <em class="emphasis">number</em>; ]
  [ notify yes|no; ]
  [ also-notify { <em class="emphasis">address-list</em> };
  [ max-refresh-time <em class="emphasis">number</em>; ] 
  [ max-retry-time <em class="emphasis">number</em>; ] 
  [ max-transfer-idle-in <em class="emphasis">number</em>; ] 
  [ max-transfer-idle-out <em class="emphasis">number</em>; ] 
  [ max-transfer-time-in <em class="emphasis">number</em>; ] 
  [ max-transfer-time-out <em class="emphasis">number</em>; ] 
  [ min-refresh-time <em class="emphasis">number</em>; ] 
  [ min-retry-time <em class="emphasis">number</em>; ]  
  [ transfer-source <em class="emphasis">ip_addr</em>|*] [port <em class="emphasis">ip_port</em>|*]; ] 
  [ transfer-source-v6 <em class="emphasis">ip6_addr</em>|*] [port <em class="emphasis">ip_port</em>|*]; ]
};

zone "." [ in|hs|hesiod|chaos ] { 
  type hint;
  file <em class="emphasis">pathname</em>;
};

zone <em class="emphasis">domain_name</em> [in|hs|hesiod|chaos] { 
  type forward;
  [ forward only|first; ]
  [ forwarders { <em class="emphasis">address-list</em>; }; ]
}; </pre></blockquote>

<p>BIND 9 uses the same four <tt class="literal">zone</tt> command variations
as does BIND 8. The difference between the two versions of BIND is
that they use different options. Most of the options shown in the
BIND 9 syntax were explained in the discussion of the BIND 9
<tt class="literal">options</tt> statement. The two options that are unique
to the BIND 9 <tt class="literal">zone</tt> statement are:
</p>

<dl>
<dt><b><tt class="literal">allow-update-forwarding</tt></b></dt>
<dd>
<p>Identifies the systems that are allowed to submit dynamic zone
updates to a slave that will then be forwarded to the master.
</p>
</dd>


<dt><b><tt class="literal">database</tt></b></dt>
<dd>
<p>Specifies the type of database used for storing zone data. The
default is <tt class="literal">rbt</tt>, which is the only database type
supported by the standard BIND 9 executable.
</p>
</dd>

</dl>

</div>
</div>
<a name="tcp3-APP-C-SECT-2.8" /><div class="sect2">
<h3 class="sect2">C.2.8. The controls Statement</h3>

<p>The BIND 8 <tt class="literal">controls</tt>
<a name="INDEX-3533" /> <a name="INDEX-3534" />statement defines the control
channels used by <tt class="literal">ndc</tt>. <tt class="literal">ndc</tt> can
use a Unix socket or a network socket as a control channel. The
<tt class="literal">controls</tt> statement defines those sockets. The
syntax is:
</p>

<blockquote><pre class="code">controls {
  [ inet <em class="emphasis">ip_addr</em> 
    port <em class="emphasis">ip_port</em> 
    allow { <em class="emphasis">address_match_list</em>; }; ]
  [ unix <em class="emphasis">pathname</em> 
    perm <em class="emphasis">file_permissions</em>
    owner <em class="emphasis">uid</em>
    group <em class="emphasis">gid</em>; ]
};</pre></blockquote>

<p>The first three options, <tt class="literal">inet</tt>,
<tt class="literal">port</tt>, and <tt class="literal">allow</tt>, define the IP
address and the port number of a network socket and the access
control list of those systems allowed to control
<tt class="literal">named</tt> through that channel. Because BIND 8 has
weak authentication, creating a control channel that is accessible
from the network is a risky thing to do. Whoever gains access to that
channel has control over the name server process.
</p>

<p>The last four options, <tt class="literal">unix</tt>,
<tt class="literal">perm</tt>, <tt class="literal">owner</tt>, and
<tt class="literal">group</tt>, define the Unix control socket. The Unix
socket appears as a file in the filesystem. It is identified by a
normal file <em class="replaceable">pathname</em>, for example,
<em class="emphasis">/var/run/ndc</em>. Like any file, the Unix socket is
assigned the user ID (<em class="replaceable">uid</em>) of its owner
and a valid group ID (<em class="replaceable">gid</em>). It is
protected by standard file permissions. Only numeric
<em class="replaceable">uid</em>, <em class="replaceable">gid</em>, and
<em class="replaceable">file_permissions</em> values are acceptable.
The <em class="replaceable">file_permissions</em> value must start with
a 0. For example, to set owner read and write, group read, and world
no permissions, the numeric value would be 0640.
</p>

<a name="tcp3-APP-C-SECT-2.8.1" /><div class="sect3">
<h3 class="sect3">C.2.8.1. The BIND 9 controls statement</h3>

<p>The <a name="INDEX-3535" /> <a name="INDEX-3536" />BIND 9
<tt class="literal">controls</tt> statement defines the control channels
used by <tt class="literal">rndc</tt>. <tt class="literal">rndc</tt> performs the
same functions as the older <tt class="literal">ndc</tt> program, but it
can reliably be used over a network. The BIND 9
<tt class="literal">controls</tt> statement is:
</p>

<blockquote><pre class="code">controls {
  [ inet <em class="emphasis">ip_addr</em>|*
    port <em class="emphasis">ip_port</em> 
    allow <em class="emphasis">address_match_list</em>;
    keys key_list; ]
};</pre></blockquote>

<p>In BIND 9, the <tt class="literal">controls</tt> statement always defines a
network socket. However, strong authentication is used that requires
cryptographic keys.
</p>

</div>
</div>
<a name="tcp3-APP-C-SECT-2.9" /><div class="sect2">
<h3 class="sect2">C.2.9. BIND 9 view Statement</h3>

<p>The <tt class="literal">view</tt> <a name="INDEX-3537" />
<a name="INDEX-3538" />statement
allows the same zone to be viewed differently by different clients.
This makes it possible to provide an internal view to clients within
an organization, and a more limited, external view to clients in the
outside world. The syntax of the <tt class="literal">view</tt> command is:
</p>

<blockquote><pre class="code">view <em class="emphasis">view-name</em> {
  match-clients { <em class="emphasis">address_match_list</em> }; 
  [ <em class="emphasis">view-option</em>; ... ]
  [ <em class="emphasis">zone-statement</em>; ... ] 
};</pre></blockquote>

<dl>
<dt><i><em class="replaceable">view-name</em></i></dt>
<dd>
<p>An arbitrary name used inside the configuration to identify this
view. To prevent conflicts with keywords,
<em class="replaceable">view-name</em> should be enclosed in quotes,
e.g., <tt class="literal">"internal"</tt>.
</p>
</dd>


<dt><b><tt class="literal">match-clients</tt></b></dt>
<dd>
<p>Defines the list of clients that will access the zone through this
view.
</p>
</dd>


<dt><i><em class="replaceable">view-option</em></i></dt>
<dd>
<p>A standard BIND 9 option. Any option defined inside the
<tt class="literal">view</tt> statement applies only to this view. This
allows different options to be applied to the same zone depending on
which view of the zone is being used.
</p>
</dd>


<dt><i><em class="replaceable">zone-statement</em></i></dt>
<dd>
<p>A standard BIND 9 <tt class="literal">zone</tt> statement. A complete
<tt class="literal">zone</tt> statement is embedded inside the
<tt class="literal">view</tt> statement to define the zone accessed through
this view.
</p>
</dd>

</dl>

<p>The <tt class="literal">view</tt> statement is available only in BIND 9.
BIND 8 does not support views.
</p>

</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appc_01.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="appc_03.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">C. A named Reference</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">C.3. Zone File Records</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="index.html" /><area shape="rect" coords="266,0,333,90" href="../nfs/index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="../tshoot/index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="../fire/index-2.html" /></map>

</body>
<!-- Mirrored from nnc3.com/mags/Networking2/tcp/appc_02.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:36 GMT -->
</html>