<html>
<!-- Mirrored from nnc3.com/mags/Networking2/tcp/appb_08.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:36 GMT -->
<head><title>Protocol Statements (TCP/IP Network Administration, 3rd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Craig Hunt" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="0596002971L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="TCP/IP Network Administration, 3rd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.html" alt="TCP/IP Network Administration" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appb_07.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228" /><td align="right" valign="top" width="228"><a href="appb_09.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table></div>



<h2 class="sect1">B.8. Protocol Statements</h2>

<p>Protocol statements
<a name="INDEX-3239" />enable or disable protocols and set
protocol options. The protocol statements occur after the definition
statements and before the static statements. There are many protocol
statements, and more may be added at any time. There are statements
for the various interior and exterior routing protocols and for other
things that are not really routing protocols.
</p>

<p>In this section we begin with the interior protocols, move on to the
exterior protocols, and finish with the special
"protocols."
</p>

<a name="tcp3-APP-B-SECT-8.1" /><div class="sect2">
<h3 class="sect2">B.8.1. The ospf Statement</h3><a name="INDEX-3240" />
<a name="INDEX-3241" />

<blockquote><pre class="code">ospf yes | no | on | off  [{
  defaults {
    preference <em class="replaceable">preference</em> ;
    cost <em class="replaceable">cost</em> ;
    tag [as] <em class="replaceable">tag</em> ;
    type 1 | 2 ;
    inherit-metric; } ;
  exportlimit <em class="replaceable">routes</em> ;
  exportinterval <em class="replaceable">time</em> ;
  traceoptions <em class="replaceable">trace_options</em> ; 
  syslog [first <em class="replaceable">count</em>] [every <em class="replaceable">count</em>];
  monitorauthkey <em class="replaceable">key</em> ;
  backbone | area <em class="replaceable">number</em> {
    authtype 0 | 1 | none | simple ;
    stub [cost <em class="replaceable">cost</em>]  ;
    networks {
     <em class="replaceable">address</em> [mask <em class="replaceable">mask</em> | masklen <em class="replaceable">number</em>] [restrict]  ;
     host <em class="replaceable">address</em> [restrict]  ; } ;
    stubhosts { 
     <em class="replaceable">address</em> cost <em class="replaceable">cost</em> ; } ;
    interface <em class="replaceable">interface_list</em> [nonbroadcast] [cost <em class="replaceable">cost</em>]  {
     pollinterval <em class="replaceable">time</em> ;
     routers {
     <em class="replaceable">address</em> [eligible]  ; } ;
     <em class="replaceable">interface_parameters</em> } ;
    virtuallink neighborid <em class="replaceable">router_id</em> transitarea <em class="replaceable">area</em> {
     <em class="replaceable">interface_parameters</em> } ;
 } ; } ] ;</pre></blockquote>

<p>The <tt class="literal">ospf</tt> statement enables or disables the Open
Shortest Path First (OSPF) routing protocol. By default, OSPF is
disabled. It is enabled by specifying <tt class="literal">yes</tt> or
<tt class="literal">on</tt> (it doesn't matter which you use) and it
is disabled with <tt class="literal">no</tt> or <tt class="literal">off</tt>.
</p>

<a name="appb-2-fm2xml" /><blockquote><b>WARNING:</b> For the sake of brevity, this text explains only the first occurrence
of any <em class="emphasis">gated.conf</em> parameter if it is used the
same way in subsequent commands. Only differences between commands
are explained. For example, <tt class="literal">yes</tt>
<tt class="literal">|</tt> <tt class="literal">no</tt> <tt class="literal">|</tt>
<tt class="literal">on</tt> <tt class="literal">|</tt> <tt class="literal">off</tt> is
not explained again because it is always used in the same way to
enable or disable a protocol.
</p>
</blockquote>

<p>The <tt class="literal">ospf</tt> statement has many configuration
<a name="INDEX-3242" />parameters:
</p>

<dl>
<a name="INDEX-3243" /><dt><b><tt class="literal">defaults</tt></b></dt>
<dd>
<p>Defines the defaults used when importing OSPF routes from an external
autonomous system and announcing those routes to other OSPF routers.
The link-state advertisement (LSA) used to announce these routes is
called an ASE (autonomous system external) because it contains routes
from external autonomous systems. See the description of OSPF in
<a href="ch07_01.html">Chapter 7, "Configuring Routing "</a>.
</p>

<dl>
<dt><b><tt class="literal">preference</tt> <em class="replaceable">preference</em></b></dt>
<dd>
<p>Defines the preference of OSPF ASE routes. The default is 150.</p>
</dd>


<dt><b><tt class="literal">cost</tt> <em class="replaceable">cost</em></b></dt>
<dd>
<p>Defines the cost used when advertising a non-OSPF route in an ASE.
The default is 1.
</p>
</dd>


<dt><b><tt class="literal">tag [as]</tt> <em class="replaceable">tag</em></b></dt>
<dd>
<p>Defines the OSPF ASE tag value. The tag is not used by the OSPF
protocol but may be used by an export policy to filter routes. (See
the <tt class="literal">export</tt> statement later in this appendix.) When
the <tt class="literal">as</tt> keyword is specified, the tag field may
contain AS path information.
</p>
</dd>


<dt><b><tt class="literal">type 1 | 2</tt></b></dt>
<dd>
<p>Defines the type of ASE used. The default is type 1. Type 1 contains
routes learned from an external protocol that provides a metric
directly comparable to the OSPF metric. The metric is added to the
cost of reaching the border router when routes are advertised. A type
2 ASE contains routes learned from an exterior gateway protocol that
does not provide a routing metric comparable to the OSPF metric.
These routes are advertised with the cost of reaching the border
router. See <a href="ch07_01.html">Chapter 7, "Configuring Routing "</a>.
</p>
</dd>


<dt><b><tt class="literal">inherit-metric</tt></b></dt>
<dd>
<p>Directs <tt class="literal">gated</tt> to use the external metric for ASE
routes if no metric is defined in the <tt class="literal">export</tt>
statement.
</p>
</dd>

</dl>
</dd>


<a name="INDEX-3244" /><dt><b><tt class="literal">exportlimit</tt> <em class="replaceable">routes</em></b></dt>
<dd>
<p>Defines the maximum number of ASE LSAs that will be flooded at one
time. The default is 100.
</p>
</dd>


<a name="INDEX-3245" /><dt><b><tt class="literal">exportinterval</tt> <em class="replaceable">time</em></b></dt>
<dd>
<p>Defines how frequently ASE link-state advertisements are flooded to
the network. The default is once per second.
</p>
</dd>


<a name="INDEX-3246" /><dt><b><tt class="literal">traceoptions</tt> <em class="replaceable">trace_options</em></b></dt>
<dd>
<p>Defines the tracing used to debug OSPF. In addition to the standard
trace flags, OSPF supports:
</p>

<dl>
<dt><b><tt class="literal">lsabuild</tt></b></dt>
<dd>
<p>Traces construction of link-state advertisements (LSAs). </p>
</dd>


<dt><b><tt class="literal">spf</tt></b></dt>
<dd>
<p>Traces the Shortest Path First (SPF) calculations. </p>
</dd>


<dt><b><tt class="literal">hello</tt></b></dt>
<dd>
<p>Traces the OSPF HELLO packets. </p>
</dd>


<dt><b><tt class="literal">dd</tt></b></dt>
<dd>
<p>Traces the OSPF Database Description packets. </p>
</dd>


<dt><b><tt class="literal">request</tt></b></dt>
<dd>
<p>Traces the OSPF Link-State Request packets. </p>
</dd>


<dt><b><tt class="literal">lsu</tt></b></dt>
<dd>
<p>Traces the OSPF Link-State Update packets. </p>
</dd>


<dt><b><tt class="literal">ack</tt></b></dt>
<dd>
<p>Traces the OSPF Link-State Ack packets. </p>
</dd>

</dl>
</dd>


<a name="INDEX-3247" /><dt><b><tt class="literal">syslog [first</tt> <em class="replaceable">number</em><tt class="literal">] [every</tt> <em class="replaceable">count</em><tt class="literal">]</tt></b></dt>
<dd>
<p>Defines packet capture parameters. <tt class="literal">first</tt> specifies
the number of packets captured for each type of OSPF packet.
<tt class="literal">every</tt> specifies how often packets are captured
after the initial group is captured. For example, if
<em class="replaceable">count</em> is set to 50, every fiftieth packet
of each type is captured.
</p>
</dd>


<a name="INDEX-3248" /><dt><b><tt class="literal">monitorauthkey</tt> <em class="replaceable">password</em></b></dt>
<dd>
<p>Defines the password used for <tt class="literal">ospf_monitor</tt>
queries. By default these queries are not authenticated. If
<tt class="literal">monitorauthkey</tt> is specified, incoming queries must
contain the specified password.
</p>
</dd>


<a name="INDEX-3249" /><a name="INDEX-3250" /><dt><b><tt class="literal">backbone | area</tt> <em class="replaceable">number</em></b></dt>
<dd>
<p>Defines the OSPF area of which this router is a member. Every router
must belong to an area. If more than one area is configured, at least
one must be the backbone. The backbone is defined using the
<tt class="literal">backbone</tt> keyword. All other areas are defined by
the <tt class="literal">area</tt> keyword and the number of the area, e.g.,
<tt class="literal">area 1</tt>. See <a href="ch07_01.html">Chapter 7, "Configuring Routing "</a> for a
discussion of OSPF areas. Several configuration parameters are
associated with each area:
</p>

<dl>
<dt><i> <tt class="literal">stub [cost</tt> <em class="replaceable">cost</em><tt class="literal">]</tt></i></dt>
<dd>
<p>Specifies that this is a stub area. A stub area is one in which there
are no ASE routes. If a cost is specified, it is used to advertise a
default route into the stub area.
</p>
</dd>


<dt><b><tt class="literal">networks</tt></b></dt>
<dd>
<p>Defines the range of networks contained within this area. The
specified ranges are advertised into other areas as summary network
LSAs and not as inter-area routes. If <tt class="literal">restrict</tt> is
specified, the summary network LSAs are not advertised. The entries
in the networks list are either specified as a host address by using
the <tt class="literal">host</tt> keyword before the address, or as a
network address by simply specifying the address. An address mask can
be defined for a network address. The mask can be defined in dotted
decimal notation using the <tt class="literal">mask</tt> keyword or as a
numeric prefix length using the <tt class="literal">masklen</tt> keyword.
The address masks <tt class="literal">mask 255.255.0.0</tt> and
<tt class="literal">masklen 16</tt> are equivalent. If no address mask is
specified, the natural mask is used. This option can reduce the
amount of routing information propagated between areas.
</p>
</dd>

</dl>
</dd>


<a name="INDEX-3251" /><dt><b><tt class="literal">stubhosts</tt></b></dt>
<dd>
<p>Lists the directly attached hosts, and their costs, that should be
advertised as reachable from this router. List point-to-point
interfaces here.
</p>
</dd>


<a name="INDEX-3252" /><dt><b><tt class="literal">interface</tt> <em class="replaceable">interface_list</em> <tt class="literal">[nobroadcast] [cost</tt> <em class="replaceable">cost</em><tt class="literal">]</tt></b></dt>
<dd>
<p>Defines the interfaces used by OSPF. If the keyword
<tt class="literal">nobroadcast</tt> is specified, the interface connects
to a nonbroadcast multiple access (NBMA) network. If
<tt class="literal">nobroadcast</tt> is not used, the interface connects to
a broadcast or a point-to-point network. Specify the cost of the
interface with the <tt class="literal">cost</tt> keyword, e.g.,
<tt class="literal">cost</tt> <tt class="literal">5</tt>. The default cost is 1.
Two options are specific to NBMA interfaces:
</p>

<dl>
<dt><b><tt class="literal">pollinterval</tt> <em class="replaceable">time</em></b></dt>
<dd>
<p>Defines the time interval at which OSPF HELLO packets are sent to
neighbors.
</p>
</dd>


<dt><b><tt class="literal">routers</tt></b></dt>
<dd>
<p>Lists all neighbors by address. The <tt class="literal">eligible</tt>
keyword indicates if the neighbor can become a designated router.
</p>
</dd>

</dl>

<p>All interfaces -- NBMA and broadcast -- can use these
parameters:
</p>

<dl>
<dt><b><tt class="literal">enable | disable ;</tt></b></dt>
<dd>
<p>Enables or disables the interface.</p>
</dd>


<dt><b><tt class="literal">retransmitinterval</tt> <em class="replaceable">time</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Defines the number of seconds between link-state advertisement
retransmissions.
</p>
</dd>


<dt><b><tt class="literal">transitdelay</tt> <em class="replaceable">time</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Defines the estimated number of seconds required to transmit a
link-state update over this interface. It must be greater than 0.
</p>
</dd>


<dt><b><tt class="literal">priority</tt> <em class="replaceable">priority</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Defines this system's priority for the designated router
election. <em class="replaceable">priority</em> is a number from 0 to
255. The router with the highest priority becomes the designated
router. A router whose priority is 0 is ineligible to become the
designated router. See <a href="ch07_01.html">Chapter 7, "Configuring Routing "</a> for a discussion
of designated routers.
</p>
</dd>


<dt><b><tt class="literal">hellointerval</tt> <em class="replaceable">time</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Defines the number of seconds between transmissions of HELLO packets. </p>
</dd>


<dt><b><tt class="literal">routerdeadinterval</tt> <em class="replaceable">time</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Defines the timeout before a neighbor is declared down.
<em class="replaceable">time</em> is the maximum number of seconds this
router will wait for a neighbor's HELLO packet.
</p>
</dd>


<dt><b><tt class="literal">auth [ none | simple</tt> <em class="replaceable">password</em> <tt class="literal">| md5</tt> <em class="replaceable">key</em> <tt class="literal">] ;</tt></b></dt>
<dd>
<p>Defines the type of authentication used to authenticate OSPF packets.
<tt class="literal">none</tt> selects no authentication.
<tt class="literal">simple</tt> selects password authentication. The
<em class="replaceable">password</em> is specified as one to eight
decimal digits separated by periods, a one- to eight-byte hexadecimal
string preceded by 0x, or a one- to eight-character string in double
quotes. <tt class="literal">md5</tt> selects MD5 authentication.
<em class="replaceable">key</em> is a valid MD5 cryptographic key.
</p>
</dd>

</dl>
</dd>


<a name="INDEX-3253" /><dt><b><tt class="literal">virtuallink neighborid</tt> <em class="replaceable">router_id</em> <tt class="literal">transitarea</tt> <em class="replaceable">area</em></b></dt>
<dd>
<p>Defines a virtual link for the backbone area. The
<em class="replaceable">router_id</em> is the router identifier of the
remote router at the other end of the virtual link. The transit area
must be one of the other areas configured on this system. All
standard interface parameters defined above may be specified on a
virtual link.
</p>
</dd>

</dl>


</div>
<a name="tcp3-APP-B-SECT-8.2" /><div class="sect2">
<h3 class="sect2">B.8.2. The rip Statement</h3><a name="INDEX-3254" />
<a name="INDEX-3255" />

<blockquote><pre class="code">rip yes | no | on | off [ {
   broadcast ;
   nobroadcast ;
   nocheckzero ;
   preference <em class="replaceable">preference</em> ;
   defaultmetric <em class="replaceable">metric</em> ;
   query authentication [none | [simple | md5 <em class="replaceable">password</em>]]  ;
   interface <em class="replaceable">interface_list</em>
     [noripin] | [ripin]
     [noripout] | [ripout]
     [metricin <em class="replaceable">metric</em>]
     [metricout <em class="replaceable">metric</em>]
     [version 1 | 2 [multicast | broadcast]]
     [[secondary] authentication [none | [simple | md5 <em class="replaceable">password</em>]] ;
   trustedgateways <em class="replaceable">gateway_list</em> ;
   sourcegateways <em class="replaceable">gateway_list</em> ;
   traceoptions <em class="replaceable">trace_options</em> ; } ] ;</pre></blockquote>

<p>The <tt class="literal">rip</tt> statement enables or disables RIP. By
default RIP is enabled. The <tt class="literal">rip</tt>
<a name="INDEX-3256" />statement options are:
</p>

<dl>
<a name="INDEX-3257" /><dt><b><tt class="literal">broadcast</tt></b></dt>
<dd>
<p>Forces <tt class="literal">gated</tt> to broadcast RIP update packets even
if the system has only one network interface. By default, RIP updates
are not broadcast if the system has only one network interface and
are broadcast if it has more than one network interface; i.e., hosts
do not broadcast updates and routers do.
</p>
</dd>


<dt><b><tt class="literal">nobroadcast</tt></b></dt>
<dd>
<p>Forces <tt class="literal">gated</tt> to <em class="emphasis">not</em> broadcast
RIP update packets even if the system has more than one network
interface. If a <tt class="literal">sourcegateways</tt> clause is present,
routes are still unicast directly to that gateway. See
<tt class="literal">sourcegateways</tt> later in this section.
</p>
</dd>


<dt><b><tt class="literal">notcheckzero</tt></b></dt>
<dd>
<p>Specifies that <tt class="literal">gated</tt> should not reject incoming
version 1 RIP packets where the reserved fields are 0. Rejecting
those packets is standard practice.
</p>
</dd>


<a name="INDEX-3258" /><dt><b><tt class="literal">preference</tt> <em class="replaceable">preference</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Sets the <tt class="literal">gated</tt> preference for routes learned from
RIP. The default preference for these routes is 100.
</p>
</dd>


<a name="INDEX-3259" /><dt><b><tt class="literal">defaultmetric</tt> <em class="replaceable">metric</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Defines the metric used when advertising routes via RIP that were
learned from other protocols. The default
<em class="replaceable">metric</em> is 16, which to RIP indicates an
unusable route. This means that by default, routes learned from other
protocols are not advertised as valid routes by RIP. Set a lower
value only if you want all routes learned from other protocols
advertised at that metric.
</p>
</dd>


<a name="INDEX-3260" /><dt><b><tt class="literal">query authentication [none | [simple | md5</tt> <em class="replaceable">key</em><tt class="literal">]] ;</tt></b></dt>
<dd>
<p>Specifies the authentication used for nonrouter query packets. The
default is <tt class="literal">none</tt>. If <tt class="literal">simple</tt> is
specified, the <em class="replaceable">key</em> is a 16-byte password.
If <tt class="literal">md5</tt> is specified, the
<em class="replaceable">key</em> is a 16-byte value used with the
packet contents to generate a Message Digest 5 cryptographic
checksum.
</p>
</dd>


<a name="INDEX-3261" /><dt><b><tt class="literal">interface</tt> <em class="replaceable">interface_list</em></b></dt>
<dd>
<p>Identifies the interfaces over which RIP runs and defines the
configuration parameters of those interfaces. The
<em class="replaceable">interface_list</em> can contain interface
names, hostnames, IP addresses, or the keyword
<tt class="literal">all</tt>. Possible parameters are:
</p>

<dl>
<dt><b><tt class="literal">noripin</tt></b></dt>
<dd>
<p>Tells system to ignore RIP packets received on this interface. The
default is to listen to RIP packets on all nonloopback interfaces.
</p>
</dd>


<dt><b><tt class="literal">ripin</tt></b></dt>
<dd>
<p>Tells system to listen to RIP packets received on this interface.
This is the default.
</p>
</dd>


<dt><b><tt class="literal">noripout</tt></b></dt>
<dd>
<p>Tells system not to send RIP packets out this interface. The default
is to send RIP on all broadcast and nonbroadcast interfaces when in
broadcast mode. See the <tt class="literal">nobroadcast</tt> option defined
earlier in this list.
</p>
</dd>


<dt><b><tt class="literal">ripout</tt></b></dt>
<dd>
<p>Tells system to send RIP packets out this interface. This is the
default.
</p>
</dd>


<dt><b><tt class="literal">metricin</tt> <em class="replaceable">metric</em></b></dt>
<dd>
<p>Specifies the RIP metric used for routes received on this interface.
The default is the kernel interface metric plus 1, which is the
default RIP hop count. If this metric is specified, it is used as the
absolute value and is not added to the kernel metric.
</p>
</dd>


<dt><b><tt class="literal">metricout</tt></b></dt>
<dd>
<p>Specifies the RIP metric added to routes sent out this interface. The
default is 0. This option can only increase the metric.
</p>
</dd>


<dt><b><tt class="literal">version 1 | 2 [multicast | broadcast]</tt></b></dt>
<dd>
<p>Identifies the version of RIP used for updates sent out this
interface. Available versions are RIP 1 and RIP 2. RIP 1 is the
default. If RIP 2 is specified and IP multicast is supported, full
version 2 packets are sent via multicast. If multicast is not
available, version 1-compatible version 2 packets are sent via
broadcast. The keyword <tt class="literal">multicast</tt>, the default,
specifies this behavior. The keyword <tt class="literal">broadcast</tt>
specifies that RIP version 1-compatible version 2 packets should be
broadcast on this interface, even if IP multicast is available.
Neither keyword is used with version 1.
</p>
</dd>


<dt><b><tt class="literal">[secondary] authentication [none | simple | md5</tt> <em class="replaceable">key</em><tt class="literal">]</tt></b></dt>
<dd>
<p>Defines the RIP version 2 authentication used on this interface. The
default authentication type is <tt class="literal">none</tt>. If
<tt class="literal">simple</tt> is specified, the
<em class="replaceable">key</em> is a 16-byte password. If
<tt class="literal">md5</tt> is specified, the
<em class="replaceable">key</em> is a 16-byte value used with the
packet contents to generate a Message Digest 5 cryptographic
checksum. If <tt class="literal">secondary</tt> is specified, this defines
the secondary authentication type. Packets are always sent using the
primary authentication technique. The secondary authentication type
is defined only for incoming packets. Inbound packets are checked
against both the primary and secondary authentication methods before
being discarded as invalid.
</p>
</dd>

</dl>
</dd>


<a name="INDEX-3262" /><dt><b><tt class="literal">trustedgateways</tt> <em class="replaceable">gateway_list</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Defines the list of gateways from which RIP accepts updates. The
<em class="replaceable">gateway_list</em> is simply a list of hostnames
or IP addresses. By default, all gateways on the shared network are
trusted to supply routing information. But if the
<tt class="literal">trustedgateways</tt> statement is used, only updates
from the gateways in the list are accepted.
</p>
</dd>


<a name="INDEX-3263" /><dt><b><tt class="literal">sourcegateways</tt> <em class="replaceable">gateway_list</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Defines a list of gateways to which RIP sends packets directly. By
default, RIP packets are broadcast or multicast to several systems on
the shared network, but if this statement is used, RIP unicasts
packets directly to the listed gateways.
</p>
</dd>


<a name="INDEX-3264" /><dt><b><tt class="literal">traceoptions</tt> <em class="replaceable">trace_options</em></b></dt>
<dd>
<p>Defines tracing for RIP. RIP supports most of the standard tracing
options as well as these packet-tracing options:
</p>

<dl>
<dt><b><tt class="literal">packets</tt></b></dt>
<dd>
<p>Traces all RIP packets. </p>
</dd>


<dt><b><tt class="literal">request</tt></b></dt>
<dd>
<p>Traces the RIP information request packets, such as REQUEST, POLL,
and POLLENTRY.
</p>
</dd>


<dt><b><tt class="literal">response</tt></b></dt>
<dd>
<p>Traces all RIP RESPONSE packets. </p>
</dd>


<dt><b><tt class="literal">other</tt></b></dt>
<dd>
<p>Traces any other type of RIP packet. </p>
</dd>

</dl>
</dd>

</dl>

</div>
<a name="tcp3-APP-B-SECT-8.3" /><div class="sect2">
<h3 class="sect2">B.8.3. The isis Statement</h3><a name="INDEX-3265" />
<a name="INDEX-3266" />

<blockquote><pre class="code">isis on | off {
     [ area <em class="replaceable">areaid</em> ; ]
     [ area auth simple <em class="replaceable">key</em> ; ]
     [ domain auth simple <em class="replaceable">key</em> ; ]
     [ domain-wide on | off ; ]
     [ export-defaults ; ]
     [ export-defaults level 1 | 2 ; ]
     [ export-defaults metric <em class="replaceable">metric</em> | inherit ; ]
     [ export-defaults metric-type internal | external ; ] 
     [ external preference <em class="replaceable">preference</em> ; ] 
     [ level 1 | 2 | 1 and 2 ; ]
     [ interface <em class="replaceable">name</em> | <em class="replaceable">address</em> [ {
         [ enable | disable ; ]
         [ auth simple <em class="replaceable">key</em> ; ]
         [ csn-interval <em class="replaceable">interval</em> [ level 1 | 2 | 1 and 2 ] ; ]
         [ dis-hello-interval <em class="replaceable">interval</em> [ level 1 | 2 | 1 and 2 ] ; ]
         [ encap [ iso | ip ] ; ]
         [ hello-interval <em class="replaceable">interval</em> [ level 1 | 2 | 1 and 2 ] ; ]
         [ hello-multiplier <em class="replaceable">number</em> [ level 1 | 2 | 1 and 2 ] ; ]
         [ lsp-interval <em class="replaceable">interval</em> ; ] 
         [ level 1 | 2 | 1 and 2 ; ]
         [ max-burst <em class="replaceable">number</em> ; ]
         [ metric <em class="replaceable">metric</em> [ level 1 | 2 | 1 and 2 ] ; ]
         [ passive on | off ; ]
         [ priority <em class="replaceable">priority</em> [ level 1 | 2 | 1 and 2 ] ; ]
         [ retransmit-interval <em class="replaceable">interval</em> ; ]
     } ] ; ]
     [ overload-bit on | off ; ]
     [ preference <em class="replaceable">preference</em> ; ]
     [ psn-interval <em class="replaceable">intervalt</em> ; ]
     [ require-snp-auth on | off ; ] 
     [ ribs unicast | unicast multicast ; ]
     [ spf-interval <em class="replaceable">interval</em> ; ] 
     [ inet6 on | off ; ]
     [ summary-originate [ inet | inet6 ] {
         [<em class="replaceable">network</em> (mask <em class="replaceable">mask</em> | masklen <em class="replaceable">n</em> ) metric <em class="replaceable">cost-value</em> ; ]
     } ; ]
     [ summary-filter [ inet | inet6 ] {
         [<em class="replaceable">network</em> mask <em class="replaceable">mask</em> | masklen <em class="replaceable">number</em> ; ]
     } ; ]
     [ systemid <em class="replaceable">systemid</em> ; ]
     [ traceoptions <em class="replaceable">traceoptions</em> ; ] 
     [ config-time <em class="replaceable">seconds</em> ; ]
     [ es-config-time <em class="replaceable">seconds</em> ; ]
     [ hold-time <em class="replaceable">seconds</em> ; ]
}; </pre></blockquote>

<p>The <tt class="literal">isis</tt> statement enables the IS-IS protocol. By
default, it is disabled. The options that may appear in the
<tt class="literal">isis</tt>
<a name="INDEX-3267" />statement are:
</p>

<dl>
<a name="INDEX-3268" /><dt><b><tt class="literal">area</tt> <em class="replaceable">areaid</em></b></dt>
<dd>
<p>Adds area addresses to those configured automatically from the
circuits. IS-IS area addresses are automatically configured based on
the real circuits over which IS-IS runs. Up to three areas can be
added using <tt class="literal">area</tt> statements.
</p>
</dd>


<a name="INDEX-3269" /><dt><b><tt class="literal">area auth simple</tt> <em class="replaceable">key</em> </b></dt>
<dd>
<p>Enables authentication for level 1 routing and selects the key. The
format for <em class="replaceable">key</em> is one to eight decimal
digits separated by periods, a one- to eight-byte hexadecimal string
preceded by 0x, or a one- to eight-character string in double quotes.
The same <em class="replaceable">key</em> format is used throughout the
<tt class="literal">isis</tt> statement.
</p>
</dd>


<a name="INDEX-3270" /><dt><b><tt class="literal">domain auth simple</tt> <em class="replaceable">key</em> </b></dt>
<dd>
<p>Enables authentication and selects the key for level 2 routing. </p>
</dd>


<a name="INDEX-3271" /><dt><b><tt class="literal">export-defaults level 1 | 2</tt> </b></dt>
<dd>
<p>Sets the protocol level used for exported routes. By default, a level
1 router exports at level 1, and a level 2 router supports both level
1 and 2.
</p>
</dd>


<a name="INDEX-3272" /><dt><b><tt class="literal">export-defaults metric</tt> <em class="replaceable">metric</em> <tt class="literal">| inherit</tt> </b></dt>
<dd>
<p>Defines the default metric used on routes exported as IS-IS from
another protocol. The default is to use the metric already contained
in the route, which is indicated by the <tt class="literal">inherit</tt>
keyword.
</p>
</dd>


<a name="INDEX-3273" /><dt><b><tt class="literal">export-defaults metric-type internal | external</tt> </b></dt>
<dd>
<p>Defines the type of the metric used on routes exported as IS-IS from
another protocol. The default is <tt class="literal">internal</tt>.
</p>
</dd>


<a name="INDEX-3274" /><dt><b><tt class="literal">external preference</tt> <em class="replaceable">preference</em> </b></dt>
<dd>
<p>Defines the preference of external routes learned from IS-IS. The
default preference is 151.
</p>
</dd>


<a name="INDEX-3275" /><dt><b><tt class="literal">level 1 | 2 | 1 and 2</tt> </b></dt>
<dd>
<p>Sets the protocol level for this intermediate system. A
<tt class="literal">level</tt> <tt class="literal">1</tt> system is an intra-area
router. A <tt class="literal">level</tt> <tt class="literal">1</tt> system cannot
have any level 2 interfaces. A <tt class="literal">level</tt>
<tt class="literal">2</tt> system is an inter-area router, and it cannot
have any level 1 interfaces. A <tt class="literal">level</tt>
<tt class="literal">1</tt> <tt class="literal">and 2</tt> system may have level
1, level 2, and level 1 and 2 interfaces. Additionally, individual
options relating to protocol settings can be specified as level 1,
level 2 or level 1 and 2 depending on the specific level for which
the option is being set when the system supports level 1 and 2. The
default is <tt class="literal">level 1 and 2</tt>.
</p>
</dd>


<a name="INDEX-3276" /><dt><b><tt class="literal">interface</tt> <em class="replaceable">name</em> <tt class="literal">|</tt> <em class="replaceable">address</em> </b></dt>
<dd>
<p>Identifies the interfaces on which to run IS-IS. The default is all.
The following options can be set for each interface:
</p>

<dl>
<dt><b><tt class="literal">enable | disable</tt> </b></dt>
<dd>
<p><tt class="literal">enable</tt> or <tt class="literal">disable</tt> the
interface. The default is <tt class="literal">enable</tt>.
</p>
</dd>


<dt><b><tt class="literal">auth simple</tt> <em class="replaceable">key</em> </b></dt>
<dd>
<p>Enables authentication and selects the authentication key for this
interface.
</p>
</dd>


<dt><b><tt class="literal">csn-interval</tt> <em class="replaceable">interval</em> <tt class="literal">[ level 1 | 2 | 1 and 2 ]</tt> </b></dt>
<dd>
<p>Sets the interval at which this system will multicast CSN packets if
it is elected the Designated Intermediate System (DIS). The
<em class="replaceable">interval</em> can be from 1 to 100 seconds.
</p>
</dd>


<dt><b><tt class="literal">dis-hello-interval</tt> <em class="replaceable">interval</em> <tt class="literal">[level 1 | 2 | 1 and 2]</tt> </b></dt>
<dd>
<p>Sets the interval at which this system will send hello messages if it
is elected the DIS. The <em class="replaceable">interval</em> can be
from 1 to 100 seconds.
</p>
</dd>


<dt><b><tt class="literal">encap [ ip | iso ]</tt> </b></dt>
<dd>
<p>Selects the type of encapsulation used. The default is
<tt class="literal">ip</tt>.
</p>
</dd>


<dt><b><tt class="literal">hello-interval</tt> <em class="replaceable">interval</em> <tt class="literal">[ level 1 | 2 | 1 and 2 ]</tt> </b></dt>
<dd>
<p>Defines the interval at which hello packets are sent on the
interface. <em class="replaceable">interval</em> can be from 1 to 300
seconds.
</p>
</dd>


<dt><b><tt class="literal">hello-multiplier</tt> <em class="replaceable">number</em> <tt class="literal">[ level 1 | 2 | 1 and 2 ]</tt> </b></dt>
<dd>
<p>Defines the number of hello packets that must be missed before a
neighbor is considered "down." Thus if
<em class="replaceable">number</em> is set to 3 and no hello packets
are received from a neighbor in the amount of time in which three
hello packets are normally received, the neighbor is considered down.
<em class="replaceable">number</em> can be from 1 to 100.
</p>
</dd>


<dt><b><tt class="literal">lsp-interval</tt> <em class="replaceable">interval</em></b></dt>
<dd>
<p>Defines the interval at which LSP packets are sent on the interface.</p>
</dd>


<dt><b><tt class="literal">level 1 | 2 | 1 and 2 ;</tt></b></dt>
<dd>
<p>Defines the protocol level used on this interface.</p>
</dd>


<dt><b><tt class="literal">max-burst</tt> <em class="replaceable">number</em> </b></dt>
<dd>
<p>Defines the maximum number of packets that can be sent in a burst.</p>
</dd>


<dt><b><tt class="literal">metric</tt> <em class="replaceable">metric</em> <tt class="literal">[ level 1 | 2 | 1 and 2 ]</tt></b></dt>
<dd>
<p>Defines the cost associated with this interface.</p>
</dd>


<dt><b><tt class="literal">passive on | off</tt> </b></dt>
<dd>
<p>Indicates whether this interface should be treated as an active or
passive interface.
</p>
</dd>


<dt><b><tt class="literal">priority</tt> <em class="replaceable">priority</em> <tt class="literal">[ level 1 | 2 | 1 and 2 ]</tt></b></dt>
<dd>
<p>Sets the priority number used for the DIS election.
<em class="replaceable">priority</em> is a value from 1 to 127.
</p>
</dd>


<dt><b><tt class="literal">retransmit-interval</tt> <em class="replaceable">interval</em></b></dt>
<dd>
<p>Defines the interval at which packets are retransmitted on the
interface.
</p>
</dd>

</dl>
</dd>


<a name="INDEX-3277" /><dt><b><tt class="literal">overload-bit on | off</tt></b></dt>
<dd>
<p>Enables or disables use of the overload bit.</p>
</dd>


<a name="INDEX-3278" /><dt><b><tt class="literal">preference</tt> <em class="replaceable">preference</em> </b></dt>
<dd>
<p>Sets the <tt class="literal">gated</tt> preference for IS-IS routes. The
default is 11.
</p>
</dd>


<a name="INDEX-3279" /><dt><b><tt class="literal">psn-interval</tt> <em class="replaceable">interval</em> </b></dt>
<dd>
<p>Defines how often PSN packets are sent by this system.
<em class="replaceable">interval</em> can be 1 to 20 seconds.
</p>
</dd>


<a name="INDEX-3280" /><a name="INDEX-3281" /><dt><b><tt class="literal">ribs unicast | unicast multicast</tt> </b></dt>
<dd>
<p>Defines the routing information base format used for IS-IS routes.
The default is <tt class="literal">unicast</tt>.
</p>
</dd>


<a name="INDEX-3282" /><dt><b><tt class="literal">spf-interval</tt> <em class="replaceable">interval</em> </b></dt>
<dd>
<p>Defines the amount of time to wait for more changes to occur before
recalculating the routing table. <em class="replaceable">interval</em>
can be from 1 to 60 seconds.
</p>
</dd>


<a name="INDEX-3283" /><dt><b><tt class="literal">inet6 on | off</tt></b></dt>
<dd>
<p>Enables support for IPv6 routing.</p>
</dd>


<a name="INDEX-3284" /><dt><b><tt class="literal">summary-originate</tt> </b></dt>
<dd>
<p>Defines how level 1 routes are summarized in this system's
routing information base for level 2 routing.
<tt class="literal">summary-originate</tt> is used only if this system is a
level 2 router. <em class="replaceable">network</em> identifies the
level 1 address received, and the network mask, defined as either a
mask or a numeric mask length, aggregates the routes.
</p>
</dd>


<a name="INDEX-3285" /><dt><b><tt class="literal">summary-filter</tt></b></dt>
<dd>
<p>Defines how level 1 routes are summarized when this system advertises
them through level 2 routing. <tt class="literal">summary-filter</tt> is
used only if this system is a level 2 router.
</p>
</dd>


<a name="INDEX-3286" /><dt><b><tt class="literal">systemid</tt> <em class="replaceable">systemid</em></b></dt>
<dd>
<p>Defines the IS-IS system ID. If no system identifier is specified,
the system ID portion of the first circuit's NSAP address is
used.
</p>
</dd>


<a name="INDEX-3287" /><dt><b><tt class="literal">traceoptions</tt> <em class="replaceable">traceoptions</em> </b></dt>
<dd>
<p>Defines the trace options used for IS-IS. The default is none. </p>
</dd>

</dl>

</div>
<a name="tcp3-APP-B-SECT-8.4" /><div class="sect2">
<h3 class="sect2">B.8.4. The bgp Statement</h3><a name="INDEX-3288" />
<a name="INDEX-3289" />

<blockquote><pre class="code">bgp yes | no | on | off [{
    preference <em class="replaceable">preference</em> ;
    defaultmetric <em class="replaceable">metric</em> ;
    traceoptions <em class="replaceable">trace_options</em> ;
    group type external peeras <em class="replaceable">as_number</em>
       | internal peeras <em class="replaceable">as_number</em>
       | igp peeras <em class="replaceable">as_number</em> proto <em class="replaceable">proto</em>
       | routing peeras <em class="replaceable">as_number</em> proto <em class="replaceable">proto</em> interface <em class="replaceable">interface_list</em>
      | test peeras <em class="replaceable">as_number</em> {
      allow {
         <em class="replaceable">address</em> mask <em class="replaceable">mask</em> | masklen <em class="replaceable">number</em>
         all
         host <em class="replaceable">address</em> } ;
      peer <em class="replaceable">address</em>
        [metricout <em class="replaceable">metric</em>]
        [localas <em class="replaceable">as_number</em>]
        [nogendefault]
        [gateway <em class="replaceable">address</em>]
        [preference <em class="replaceable">preference</em>]
        [preference2 <em class="replaceable">preference</em>]
        [lcladdr <em class="replaceable">address</em>]
        [holdtime <em class="replaceable">time</em>]
        [version <em class="replaceable">number</em>]
        [passive]
        [sendbuffer <em class="replaceable">number</em>]
        [recvbuffer <em class="replaceable">number</em>]
        [indelay <em class="replaceable">time</em>]
        [outdelay <em class="replaceable">time</em>]
        [keep all | none]
        [showwarnings]
        [noaggregatorid]
        [keepalivesalways]
        [v3asloopokay]
        [nov4asloop]
        [logupdown]
        [ttl <em class="replaceable">ttl</em>]
        [traceoptions <em class="replaceable">trace_options</em>]  ; }
 ; }] ;</pre></blockquote>

<p>This statement enables or disables BGP. By default, BGP is disabled.
The default preference is 170. By default, BGP does not advertise a
metric. Unlike the RIP metric, the BGP metric does not play a primary
role in determining the best route. The BGP metric is simply an
arbitrary 16-bit value that can be used as one criterion for choosing
a route. The <tt class="literal">defaultmetric</tt> statement can be used
to define a metric that BGP will use when advertising routes.
</p>

<p>Trace options can be specified for all of BGP or for individual BGP
peers. BGP supports most of the standard trace options as well as the
following:
</p>

<dl>
<a name="INDEX-3290" /><dt><b><tt class="literal">packets</tt></b></dt>
<dd>
<p>Traces all BGP packets. Traces BGP OPEN packets. Traces BGP UPDATE
packets. Traces BGP KEEPALIVE packets.
</p>
</dd>

</dl>

<p>BGP <a name="INDEX-3291" />
<a name="INDEX-3292" />peers
must be members of a group. The <tt class="literal">group</tt> statement
declares the group, defines which peers are members of the group, and
defines the group "type." Multiple group statements may
be specified, but each must have a unique combination of type and
autonomous system number. There are five possible
<a name="INDEX-3293" />
<a name="INDEX-3294" />group
types:
</p>

<dl>
<dt><b><tt class="literal">group type external peeras</tt> <em class="replaceable">as_number</em></b></dt>
<dd>
<p>Specifies that BGP will run as a classic exterior gateway protocol.
The peers listed in this group are members of an external autonomous
system. Full policy checking is applied to all incoming and outgoing
routes.
</p>
</dd>


<dt><b><tt class="literal">group type internal peeras</tt> <em class="replaceable">as_number</em></b></dt>
<dd>
<p>Specifies that BGP will be used to distribute routes to an internal
group that has no traditional interior gateway protocol. Routes
received from external BGP peers are re-advertised to this group with
the received metric.
</p>
</dd>


<dt><b><tt class="literal">group type igp peeras</tt> <em class="replaceable">as_number</em> <tt class="literal">proto</tt> <em class="replaceable">proto</em></b></dt>
<dd>
<p>Specifies that BGP will be used to distribute path attributes to an
internal group that runs an interior gateway protocol. BGP advertises
the AS path, path origin, and transitive optional attributes if the
path attributes are provided by the IGP's tag mechanism.
<em class="replaceable">proto</em> is the name of the interior gateway
protocol, e.g., <tt class="literal">proto</tt> <tt class="literal">ospf</tt>.
</p>
</dd>


<dt><b><tt class="literal">group type routing peeras</tt> <em class="replaceable">as_number</em> <tt class="literal">proto</tt> <em class="replaceable">proto</em> <tt class="literal">interface</tt> <em class="replaceable">interface_list</em></b></dt>
<dd>
<p>Specifies that BGP will be used internally to carry external routes,
while an interior gateway protocol is used to carry only internal
routes. Normally the routes learned by BGP from external autonomous
systems are written in the routing table where they are picked up and
distributed by an interior protocol to the local autonomous system.
For this type of group, BGP distributes the external routes itself,
and the interior protocol is limited to distributing only those
routes that are interior to the local autonomous system.
<em class="replaceable">proto</em> is the name of the interior
protocol.
</p>
</dd>


<dt><b><tt class="literal">group type test peeras</tt> <em class="replaceable">as_number</em></b></dt>
<dd>
<p>Specifies that the members of this group are test peers. All routing
information exchanged by test peers is discarded.
</p>
</dd>

</dl>

<p>A <tt class="literal">group</tt><a name="INDEX-3295" /> clause contains
<tt class="literal">peer</tt> subclauses. Any number of
<tt class="literal">peer</tt> subclauses may belong to a group. Peers are
specified explicitly with a <tt class="literal">peer</tt> statement, or
implicitly with the <tt class="literal">allow</tt> statement.
</p>

<dl>
<dt><b><tt class="literal">allow</tt></b></dt>
<dd>
<p>Any peer whose address is contained in the specified address range is
a member of the group. The keyword <tt class="literal">all</tt> matches all
possible addresses. The keyword <tt class="literal">host</tt> precedes an
individual host address. The address and mask pairs define a range of
addresses. Network masks can be defined with the keyword
<tt class="literal">mask</tt> and an address mask written in dotted decimal
notation, or with the keyword <tt class="literal">masklen</tt> and the
prefix length written as a decimal number. All parameters for these
peers must be defined in the <tt class="literal">group</tt> clause.
</p>
</dd>


<dt><b><tt class="literal">peer</tt> <em class="replaceable">address</em></b></dt>
<dd>
<p>The peer identified by <em class="replaceable">address</em> is a member
of the group.
</p>
</dd>

</dl>

<p>The BGP <tt class="literal">peer</tt><a name="INDEX-3296" /> subclause allows the following
parameters, which can also be specified on the
<tt class="literal">group</tt> clause. If placed on the
<tt class="literal">group</tt> clause, the
<a name="INDEX-3297" />parameters affect all peers in the
group. The available options are:
</p>

<dl>
<a name="INDEX-3298" /><dt><b><tt class="literal">metricout</tt> <em class="replaceable">metric</em></b></dt>
<dd>
<p>Defines the primary metric for routes sent to the peer. This
overrides the default metric, a metric specified on the group, and
any metric specified by export policy.
</p>
</dd>


<a name="INDEX-3299" /><dt><b><tt class="literal">localas</tt> <em class="replaceable">as_number</em></b></dt>
<dd>
<p>Defines the local system's autonomous system number (asn). The
default is to use the asn defined in the
<tt class="literal">autonomoussystem</tt> statement.
</p>
</dd>


<a name="INDEX-3300" /><dt><b><tt class="literal">nogendefault</tt></b></dt>
<dd>
<p>Prevents <tt class="literal">gated</tt> from generating a default route
when BGP peers with this neighbor, even if
<tt class="literal">gendefault</tt> is set in the
<tt class="literal">options</tt> directive statement.
</p>
</dd>


<a name="INDEX-3301" /><dt><b><tt class="literal">gateway</tt> <em class="replaceable">address</em></b></dt>
<dd>
<p>Identifies the next-hop gateway through which packets for this peer
are routed. Use this only if the neighbor does not share a network
with the local system. This option is rarely needed.
</p>
</dd>


<a name="INDEX-3302" /><dt><b><tt class="literal">preference</tt> <em class="replaceable">preference</em></b></dt>
<dd>
<p>Defines the preference used for routes learned from this peer, which
permits <tt class="literal">gated</tt> to prefer routes from one peer, or
group of peers, over another.
</p>
</dd>


<dt><b><tt class="literal">preference2</tt> <em class="replaceable">preference</em></b></dt>
<dd>
<p>Defines the "second" preference. In the case of a
preference tie, the second preference is used to break the tie. The
default value is 0.
</p>
</dd>


<a name="INDEX-3303" /><dt><b><tt class="literal">lcladdr</tt> <em class="replaceable">address</em></b></dt>
<dd>
<p>Defines the address of the local interface used to communicate with
this neighbor.
</p>
</dd>


<a name="INDEX-3304" /><dt><b><tt class="literal">holdtime</tt> <em class="replaceable">time</em></b></dt>
<dd>
<p>Defines the number of seconds the peer should wait for a keepalive,
update, or notification message before closing the connection. The
value is sent to the peer in the Hold Time field of the BGP Open
message. The value must be either 0 (no keepalives will be sent) or
at least 3.
</p>
</dd>


<a name="INDEX-3305" /><dt><b><tt class="literal">version</tt> <em class="replaceable">version</em></b></dt>
<dd>
<p>Identifies the version of the BGP protocol to use with this peer. By
default, the version is negotiated when the connection is opened.
Currently supported versions are 2, 3, and 4.
</p>
</dd>


<a name="INDEX-3306" /><dt><b><tt class="literal">passive</tt></b></dt>
<dd>
<p>Specifies that <tt class="literal">gated</tt> should wait for the peer to
issue an OPEN. By default, <tt class="literal">gated</tt> periodically
sends OPEN messages until the peer responds.
</p>
</dd>


<a name="INDEX-3307" /><a name="INDEX-3308" />
<dt><b><tt class="literal">sendbuffer</tt><em class="replaceable">buffer_size</em></b></dt>
<dt><b><tt class="literal">recvbuffer</tt> <em class="replaceable">buffer_size</em></b></dt>
<dd>
<p>Defines the size of the send and receive buffers. The default is
65535 bytes, which is the maximum. These parameters are not used on
normally functioning systems.
</p>
</dd>


<a name="INDEX-3309" /><a name="INDEX-3310" />
<dt><b><tt class="literal">indelay</tt> <em class="replaceable">time</em></b></dt>
<dt><b><tt class="literal">outdelay</tt> <em class="replaceable">time</em></b></dt>
<dd>
<p>Implements "route dampening." <tt class="literal">indelay</tt>
defines the number of seconds a route must be stable before it is
accepted. <tt class="literal">outdelay</tt> is the number of seconds a
route must be present in the <tt class="literal">gated</tt> routing
database before it is exported to this peer. The default value for
each is 0, meaning that these features are disabled. Use this only if
the routing table is fluctuating so rapidly it is unstable.
</p>
</dd>


<a name="INDEX-3311" /><dt><b><tt class="literal">keep all</tt></b></dt>
<dd>
<p>Tells the system to retain routes learned from this peer even if the
routes' AS paths contain our local AS number. Normally, routes
that contain the local AS number are discarded as potential routing
loops.
</p>
</dd>


<a name="INDEX-3312" /><dt><b><tt class="literal">showwarnings</tt></b></dt>
<dd>
<p>Tells the system to issue warning messages for events, such as
duplicate routes, that are normally "silently ignored."
</p>
</dd>


<a name="INDEX-3313" /><dt><i> <tt class="literal">noaggregatorid</tt></i></dt>
<dd>
<p>Sets the routerid in the aggregator attribute to 0. By default, it is
set to the router identifier. Use this to prevent this router from
creating aggregate routes with AS paths that differ from other
routers in the AS.
</p>
</dd>


<a name="INDEX-3314" /><dt><b><tt class="literal">keepalivesalways</tt></b></dt>
<dd>
<p>Instructs the system to send a keepalive even when an update could
have correctly substituted for one. Used for interoperability with
some routers.
</p>
</dd>


<a name="INDEX-3315" /><dt><b><tt class="literal">v3asloopokay</tt></b></dt>
<dd>
<p>Allows advertisement of a route with a loop in the AS path (i.e.,
with an AS appearing more than once in the path) to version 3
external peers.
</p>
</dd>


<a name="INDEX-3316" /><dt><b><tt class="literal">nov4asloop</tt></b></dt>
<dd>
<p>Prevents a route with a loop in the AS path from being advertised to
version 4 external peers. Used to avoid passing such routes to a peer
that incorrectly forwards them to version 3 neighbors.
</p>
</dd>


<a name="INDEX-3317" /><dt><b><tt class="literal">logupdown</tt></b></dt>
<dd>
<p>Logs every time a BGP peer enters or leaves the ESTABLISHED state. </p>
</dd>


<a name="INDEX-3318" /><dt><b><tt class="literal">ttl</tt> <em class="replaceable">ttl</em></b></dt>
<dd>
<p>Defines the IP ttl for local neighbors. By default it is set to 1.
Use this option if the local neighbor discards packets sent with a
ttl of 1. Not all Unix kernels allow the ttl to be specified for TCP
connections.
</p>
</dd>

</dl>

<p>The BGP trace options were covered previously. </p>

</div>
<a name="tcp3-APP-B-SECT-8.5" /><div class="sect2">
<h3 class="sect2">B.8.5. The egp Statement</h3><a name="INDEX-3319" />
<a name="INDEX-3320" />

<blockquote><pre class="code">egp yes | no | on | off [{
    preference <em class="replaceable">preference</em> ;
    defaultmetric <em class="replaceable">metric</em> ;
    packetsize <em class="replaceable">maxpacketsize</em> ;
    traceoptions <em class="replaceable">trace_options</em> ;
    group [peeras <em class="replaceable">as_number</em>] [localas <em class="replaceable">as_number</em>] [maxup <em class="replaceable">number</em>] {
    neighbor <em class="replaceable">address</em>
    [metricout <em class="replaceable">metric</em>]
    [preference <em class="replaceable">preference</em>]
    [preference2 <em class="replaceable">preference</em>]
    [ttl <em class="replaceable">ttl</em>]
    [nogendefault]
    [importdefault]
    [exportdefault]
    [gateway <em class="replaceable">address</em>]
    [lcladdr <em class="replaceable">address</em>]
    [sourcenet <em class="replaceable">network</em>]
    [minhello | p1 <em class="replaceable">interval</em>]
    [minpoll | p2 <em class="replaceable">interval</em>]
    [traceoptions <em class="replaceable">trace_options</em>] ; }
 ; }] ;</pre></blockquote>

<p>This statement enables or disables EGP. By default, EGP is disabled.
The default metric for announcing routes via EGP is 255, and the
default preference for routes learned from EGP is 200.
</p>

<p>The <tt class="literal">packetsize</tt> argument defines the size of the
largest EGP packet that will be sent or accepted.
<em class="replaceable">maxpacketsize</em> is the size in bytes. The
default is 8192 bytes. If <tt class="literal">gated</tt> receives a packet
larger than <em class="replaceable">maxpacketsize</em>, the packet is
discarded, but <em class="replaceable">maxpacketsize</em> is increased
to the size of the larger packet so that future packets won't
have to be discarded.
</p>

<p>The <tt class="literal">traceoptions</tt> statement defines the tracing for
EGP. Tracing can be specified for the EGP protocol or for an
individual EGP neighbor. The EGP trace <a name="INDEX-3321" />options are:
</p>

<dl>
<a name="INDEX-3322" /><dt><b><tt class="literal">packets</tt></b></dt>
<dd>
<p>Traces all EGP packets.</p>
</dd>


<a name="INDEX-3323" /><dt><b><tt class="literal">hello</tt></b></dt>
<dd>
<p>Traces EGP HELLO/I-HEARD-U packets. </p>
</dd>


<a name="INDEX-3324" /><dt><b><tt class="literal">acquire</tt></b></dt>
<dd>
<p>Traces EGP ACQUIRE/CEASE packets. </p>
</dd>


<a name="INDEX-3325" /><dt><b><tt class="literal">update</tt></b></dt>
<dd>
<p>Traces EGP POLL/UPDATE packets. </p>
</dd>

</dl>

<p>The <tt class="literal">egp</tt> statement has two clauses: the
<tt class="literal">group</tt> clause and the <tt class="literal">neighbor</tt>
clause. EGP neighbors must be part of a group, and all of the
neighbors in a group must be members of the same autonomous system.
Use the <tt class="literal">group</tt> clause to define parameters for a
group of EGP neighbors. Values set in a <tt class="literal">group</tt>
clause apply to all neighbor clauses in the group. There can be
multiple <tt class="literal">group</tt> clauses. The following
<a name="INDEX-3326" />parameters are set by the
<tt class="literal">group</tt><a name="INDEX-3327" /> clause:
</p>

<dl>
<a name="INDEX-3328" /><dt><b><tt class="literal">peeras</tt></b></dt>
<dd>
<p>Identifies the autonomous system number of the autonomous system to
which the members of the group belong. If not specified, this number
is learned from the neighbors.
</p>
</dd>


<a name="INDEX-3329" /><dt><b><tt class="literal">localas</tt></b></dt>
<dd>
<p>Defines the local system's autonomous system number. The
default is to use the asn defined in the
<tt class="literal">autonomoussystem</tt> statement.
</p>
</dd>


<a name="INDEX-3330" /><dt><b><tt class="literal">maxup</tt></b></dt>
<dd>
<p>Defines the number of EGP neighbors that <tt class="literal">gated</tt> is
to acquire. The default is to acquire all listed neighbors.
</p>
</dd>

</dl>

<p>The <tt class="literal">neighbor</tt><a name="INDEX-3331" /> clause defines one EGP neighbor. The
only part of the clause that is required is the
<tt class="literal">address</tt> argument, which is the hostname or IP
address of the neighbor. All other parameters are optional. All of
these optional parameters can also be specified in the
<tt class="literal">group</tt> clause if you want to apply the parameter to
all neighbors. The <tt class="literal">neighbor</tt> clause parameters are:
</p>

<dl>
<a name="INDEX-3332" /><dt><b><tt class="literal">metricout</tt> <em class="replaceable">metric</em></b></dt>
<dd>
<p>Used for all routes sent to this neighbor. This value overrides the
<tt class="literal">defaultmetric</tt> value set in the
<tt class="literal">egp</tt> statement, but only for this specific
neighbor.
</p>
</dd>


<a name="INDEX-3333" /><dt><b><tt class="literal">preference</tt> <em class="replaceable">preference</em></b></dt>
<dd>
<p>Defines the preference used for routes learned from this neighbor,
which permits <tt class="literal">gated</tt> to prefer routes from one
neighbor, or group of neighbors, over another.
</p>
</dd>


<dt><b><tt class="literal">preference2</tt> <em class="replaceable">preference</em></b></dt>
<dd>
<p>Defines the "second" preference. In the case of a
preference tie, the second preference is used to break the tie. The
default value is 0.
</p>
</dd>


<a name="INDEX-3334" /><dt><b><tt class="literal">ttl</tt> <em class="replaceable">ttl</em></b></dt>
<dd>
<p>Defines the IP ttl for local neighbors. By default, it is set to 1.
Use this option if the local neighbor discards packets sent with a
ttl of 1.
</p>
</dd>


<a name="INDEX-3335" /><dt><b><tt class="literal">nogendefault</tt></b></dt>
<dd>
<p>Prevents <tt class="literal">gated</tt> from generating a default route
when EGP peers with this neighbor, even if
<tt class="literal">gendefault</tt> is set in the
<tt class="literal">options</tt> directive statement.
</p>
</dd>


<a name="INDEX-3336" /><dt><b><tt class="literal">importdefault</tt></b></dt>
<dd>
<p>Tells the system to accept the default route if it is included in
this neighbor's EGP update. By default, it is ignored.
</p>
</dd>


<a name="INDEX-3337" /><dt><b><tt class="literal">exportdefault</tt></b></dt>
<dd>
<p>Tells the system to send the default route in EGP updates to this EGP
neighbor. Normally a default route is not included in an EGP update.
</p>
</dd>


<a name="INDEX-3338" /><dt><b><tt class="literal">gateway</tt> <em class="replaceable">address</em></b></dt>
<dd>
<p>Identifies the next-hop gateway through which packets for this
neighbor are routed. Use this only if the neighbor does not share a
network with the local system. This option is rarely needed.
</p>
</dd>


<a name="INDEX-3339" /><dt><b><tt class="literal">lcladdr</tt> <em class="replaceable">address</em></b></dt>
<dd>
<p>Defines the address of the local interface used to communicate with
the neighbor.
</p>
</dd>


<a name="INDEX-3340" /><dt><b><tt class="literal">sourcenet</tt> <em class="replaceable">network</em></b></dt>
<dd>
<p>Changes the network queried in EGP POLL packets. By default, this is
the shared network. However, if the neighbor does not share a network
with your system, the neighbor's network address should be
specified here. This parameter is normally not needed. Do not use it
if you share a network with the EGP neighbor.
</p>
</dd>


<a name="INDEX-3341" /><dt><b><tt class="literal">minhello | p1</tt> <em class="replaceable">time</em></b></dt>
<dd>
<p>Sets the interval between the transmission of EGP HELLO packets. The
default HELLO interval is 30 seconds. If the neighbor fails to
respond to three HELLO packets, the system stops trying to acquire
the neighbor. Setting a larger interval gives the neighbor a better
chance to respond. The interval can be defined as seconds,
minutes:seconds, or hours:minutes:seconds. For example, a 3-minute
interval could be specified as 180 (seconds), 3:00 (minutes), or
0:3:00 (no hours and 3 minutes). The keyword <tt class="literal">p1</tt>
can be used instead of the keyword <tt class="literal">minhello.</tt>
</p>
</dd>


<a name="INDEX-3342" /><dt><b><tt class="literal">minpoll | p2</tt> <em class="replaceable">time</em></b></dt>
<dd>
<p>Sets the time interval between sending polls to the neighbor. The
default is 120 seconds. If three polls are sent without a response,
the neighbor is declared "down" and all routes learned
from that neighbor are removed from the routing table. If a neighbor
becomes congested and can't respond to rapid polls, this can
cause the routing table to become very unstable. A longer polling
interval provides a more stable, but less responsive, routing table.
This interval is also defined as seconds, minutes:seconds, or
hours:minutes:seconds.
</p>
</dd>

</dl>

</div>
<a name="tcp3-APP-B-SECT-8.6" /><div class="sect2">
<h3 class="sect2">B.8.6. The smux Statement</h3><a name="INDEX-3343" />
<a name="INDEX-3344" />

<blockquote><pre class="code">smux yes | no | on | off [ {
    port <em class="replaceable">port</em> ;
    password <em class="replaceable">string</em> ;
    traceoptions <em class="replaceable">trace_options</em> ; } ] ;</pre></blockquote>

<p>This command replaces the <tt class="literal">snmp</tt> statement used in
previous versions of <tt class="literal">gated</tt>. The
<tt class="literal">smux</tt> command controls whether
<tt class="literal">gated</tt> informs the SNMP management software of its
status. SNMP is not a routing protocol and is not started by this
command. You must run SNMP software independently. This statement
only controls whether <tt class="literal">gated</tt> keeps the management
software apprised of its status. The default is on, so
<tt class="literal">gated</tt> does inform SNMP of its status.
</p>

<p>The <tt class="literal">smux</tt> statement supports three
<a name="INDEX-3345" />options:
</p>

<dl>
<a name="INDEX-3346" /><dt><b><tt class="literal">port</tt> <em class="replaceable">port</em></b></dt>
<dd>
<p>Changes the SNMP port used by <tt class="literal">gated</tt>. By default,
the SNMP daemon listens to port 199.
</p>
</dd>


<a name="INDEX-3347" /><dt><b><tt class="literal">password</tt> <em class="replaceable">string</em></b></dt>
<dd>
<p>Enables password authentication and defines the password used.</p>
</dd>


<a name="INDEX-3348" /><dt><b><tt class="literal">traceoptions</tt> <em class="replaceable">trace_options</em></b></dt>
<dd>
<p>Traces the interactions between <tt class="literal">gated</tt> and the SNMP
daemon. Three options are supported: <tt class="literal">packets</tt>,
<tt class="literal">send</tt>, and <tt class="literal">receive</tt>.
</p>
</dd>

</dl>

</div>
<a name="tcp3-APP-B-SECT-8.7" /><div class="sect2">
<h3 class="sect2">B.8.7. The redirect Statement</h3><a name="INDEX-3349" />
<a name="INDEX-3350" />

<blockquote><pre class="code">redirect yes | no | on | off [{
    preference <em class="replaceable">preference</em> ;
    interface <em class="replaceable">interface_list</em> [noredirects | redirects]  ;
    trustedgateways <em class="replaceable">gateway_list</em> ;
    traceoptions <em class="replaceable">trace_options</em> ; } ] ;</pre></blockquote>

<p>This statement controls whether ICMP redirects are allowed to modify
the kernel routing table. It does not prevent a system from sending
redirects, only from listening to them. If <tt class="literal">no</tt> or
<tt class="literal">off</tt> is specified, <tt class="literal">gated</tt>
attempts to remove the effects of ICMP redirects from the kernel
routing table whenever the redirects are detected. Remember that ICMP
is part of IP, and the redirects may be installed in the kernel table
before they are seen by <tt class="literal">gated</tt>. If you disable
redirects, <tt class="literal">gated</tt> actively removes the redirected
routes from the routing table. By default, ICMP redirects are enabled
on hosts that quietly listen to interior routing protocols, and
disabled on gateways that actively participate in interior routing
protocols.
</p>

<p>The default preference of a route learned from a redirect is 30,
which can be changed with the <tt class="literal">preference</tt> option.
The <tt class="literal">interface</tt> statement controls how redirects are
handled on an interface-by-interface basis. Redirects are ignored if
<tt class="literal">noredirects</tt> is specified, and are permitted if
<tt class="literal">redirects</tt>, which is the default, is specified. The
<tt class="literal">trustedgateways</tt> statement enables redirects on a
gateway-by-gateway basis. By default, redirects are accepted from all
routers on the local network. If the
<tt class="literal">trustedgateways</tt> statement is used, only redirects
received from a gateway listed in the
<em class="replaceable">gateway_list</em> are accepted. The
<em class="replaceable">gateway_list</em> is simply a list of hostnames
or addresses. The <em class="replaceable">trace_options</em> defined on
the <tt class="literal">traceoptions</tt> statement are the standard
<tt class="literal">gated</tt> trace options.
</p>

</div>
<a name="tcp3-APP-B-SECT-8.8" /><div class="sect2">
<h3 class="sect2">B.8.8. The icmp Statement</h3><a name="INDEX-3351" />
<a name="INDEX-3352" />

<blockquote><pre class="code">icmp {
    traceoptions <em class="replaceable">trace_options</em> ; }</pre></blockquote>

<p>On some systems, <tt class="literal">gated</tt> listens to all ICMP
messages but only processes the ICMP redirect packets. That
processing is controlled by the redirect statement. In the future,
more functionality may be added. At present the
<tt class="literal">icmp</tt> statement is used only to enable tracing of
ICMP messages. The tracing options supported by the
<tt class="literal">icmp</tt>
<a name="INDEX-3353" />statement are:
</p>

<dl>
<a name="INDEX-3354" /><dt><b><tt class="literal">packets</tt></b></dt>
<dd>
<p>Traces all ICMP packets. </p>
</dd>


<a name="INDEX-3355" /><dt><b><tt class="literal">redirect</tt></b></dt>
<dd>
<p>Traces ICMP REDIRECT packets. </p>
</dd>


<a name="INDEX-3356" /><dt><b><tt class="literal">routerdiscovery</tt></b></dt>
<dd>
<p>Traces ICMP ROUTER DISCOVERY packets. </p>
</dd>


<a name="INDEX-3357" /><dt><b><tt class="literal">info</tt></b></dt>
<dd>
<p>Traces ICMP informational packets. </p>
</dd>


<a name="INDEX-3358" /><dt><b><tt class="literal">error</tt></b></dt>
<dd>
<p>Traces ICMP error packets. </p>
</dd>

</dl>

</div>
<a name="tcp3-APP-B-SECT-8.9" /><div class="sect2">
<h3 class="sect2">B.8.9. The routerdiscovery Statement</h3><a name="INDEX-3359" />
<a name="INDEX-3360" />

<p>The Router Discovery Protocol informs hosts of the routers that are
available on the network. It provides an alternative to static
routes, routing protocols, and ICMP redirects for hosts that simply
need to know the address of their default router. The Router
Discovery Protocol is implemented as a server running on the router
and a client running on the host. Both the server (router) software
and the client (host) software are provided by
<tt class="literal">gated</tt>.
</p>

<p>First let's look at the server configuration statement: </p>

<blockquote><pre class="code">routerdiscovery server yes | no | on | off [{
    traceoptions <em class="replaceable">trace_options</em> ;
    interface <em class="replaceable">interface_list</em>
      [minadvinterval <em class="replaceable">time</em>]
      [maxadvinterval <em class="replaceable">time</em>]
      [lifetime <em class="replaceable">time</em>] ;
    address <em class="replaceable">interface_list</em>
      [advertise | ignore]
      [broadcast | multicast]
      [ineligible | preference <em class="replaceable">preference</em>]  ; 
} ] ;</pre></blockquote>

<p>The <tt class="literal">routerdiscovery</tt> statement for both the client
and server supports tracing. The <tt class="literal">state</tt> trace flag
can be used to trace finite state machine transitions. Router
discovery packet tracing, however, is not done here. It is enabled
via the ICMP statement.
</p>

<p>The <tt class="literal">interface</tt> clause defines the physical
interfaces and the parameters that apply to them. Only physical
interfaces can be defined in the <tt class="literal">interface</tt> clause.
Addresses are specified in the address clauses shown below. The
<tt class="literal">interface</tt>
<a name="INDEX-3361" />parameters are:
</p>

<dl>
<a name="INDEX-3362" /><dt><b><tt class="literal">maxadvinterval</tt> <em class="replaceable">time</em></b></dt>
<dd>
<p>Defines the maximum time interval between sending router
advertisements. It must be more than 4 seconds and less than 30:00
minutes. The default is 10:00 minutes (600 seconds).
</p>
</dd>


<a name="INDEX-3363" /><dt><b><tt class="literal">minadvinterval</tt> <em class="replaceable">time</em></b></dt>
<dd>
<p>Defines the minimum time interval between sending router
advertisements. It must be no less than 3 seconds and no greater than
<tt class="literal">maxadvinterval</tt>. The default is 0.75 times the
<tt class="literal">maxadvinterval</tt>.
</p>
</dd>


<a name="INDEX-3364" /><dt><b><tt class="literal">lifetime</tt> <em class="replaceable">time</em></b></dt>
<dd>
<p>Defines how long clients should consider the addresses in a router
advertisement valid. It must be greater than
<tt class="literal">maxadvinterval</tt> and no more than 2:30:00 (two
hours, thirty minutes). The default is 3 times the
<tt class="literal">maxadvinterval</tt>.
</p>
</dd>

</dl>

<p>The address clause defines the IP addresses used and the parameters
that apply to them. The address clause parameters are:
</p>

<dl>
<a name="INDEX-3365" /><a name="INDEX-3366" /><dt><b><tt class="literal">advertise | ignore</tt></b></dt>
<dd>
<p><tt class="literal">advertise</tt> specifies that the address should be
included in router advertisements, which is the default.
<tt class="literal">ignore</tt> specifies that the address should not be
included in router advertisements.
</p>
</dd>


<a name="INDEX-3367" /><a name="INDEX-3368" /><dt><b><tt class="literal">broadcast | multicast</tt></b></dt>
<dd>
<p><tt class="literal">broadcast</tt> specifies that the address should be
included in a broadcast router advertisement because some systems on
the network do not support multicasting. This is the default if the
router does not support multicasting.
</p>

<p><tt class="literal">multicast</tt> specifies that the address should only
be included in a multicast router advertisement. If the system does
not support multicasting, the address is not advertised.
</p>
</dd>


<a name="INDEX-3369" /><a name="INDEX-3370" /><dt><b><tt class="literal">ineligible | preference</tt> <em class="replaceable">preference</em></b></dt>
<dd>
<p>Defines the preference of the address as a default router.
<em class="replaceable">preference</em> is a 32-bit signed integer.
Higher values mean the address is more preferable. Note that this is
not <tt class="literal">gated</tt> preference. This is a value transmitted
as part of the Router Discovery Protocol.
</p>

<p>The keyword <tt class="literal">ineligible</tt> assigns a preference of hex
80000000, which means the address is not eligible to be the default
router. Hosts use ineligible addresses to verify ICMP redirects.
</p>
</dd>

</dl>

<p>For <tt class="literal">routerdiscovery</tt> to work, the hosts must have
the <tt class="literal">routerdiscovery</tt> client software. It is part of
<tt class="literal">gated</tt> and is configured by the
<tt class="literal">routerdiscovery</tt> client statement.
</p>

<a name="tcp3-APP-B-SECT-8.9.1" /><div class="sect3">
<h3 class="sect3">B.8.9.1. The routerdiscovery client statement</h3><a name="INDEX-3371" />
<a name="INDEX-3372" />

<blockquote><pre class="code">routerdiscovery client yes | no | on | off [{
   traceoptions <em class="replaceable">trace_options</em> ;
   preference <em class="replaceable">preference</em> ;
   interface <em class="replaceable">interface_list</em>
     [enable | disable | multicast]
     [quiet | solicit]  ; 
} ] ;</pre></blockquote>

<p>The client uses the same trace options as the server. Other options
are different, however. The full list of client options is:
</p>

<dl>
<dt><b><tt class="literal">preference</tt> <em class="replaceable">preference</em> <tt class="literal">;</tt></b></dt>
<dd>
<p>Defines the preference of default routes learned from
<tt class="literal">routerdiscovery</tt>. The default is 55. Unlike the
server statement, this is <tt class="literal">gated</tt> preference.
</p>
</dd>


<dt><b><tt class="literal">interface</tt> <em class="replaceable">interface_list</em></b></dt>
<dd>
<p>Defines the interfaces used by <tt class="literal">routerdiscovery</tt>.</p>
</dd>


<dt><b><tt class="literal">enable | disable | multicast</tt></b></dt>
<dd>
<p>Enables or disables <tt class="literal">routerdiscovery</tt> on the
interface. <tt class="literal">enable</tt> is the default.
<tt class="literal">multicast</tt> forces <tt class="literal">gated</tt> to use
multicasting for router discovery. If multicasting is unavailable,
router discovery is not attempted. Normally, <tt class="literal">gated</tt>
uses multicasting or broadcasting depending on what is available for
the interface.
</p>
</dd>


<dt><b><tt class="literal">broadcast | multicast</tt></b></dt>
<dd>
<p>Specifies whether router solicitations should be broadcast or
multicast on the interface. By default, router solicitations are
multicast if that is supported; otherwise, router solicitations are
broadcast. If the <tt class="literal">multicast</tt> keyword is specified
and multicast is not available, the router solicitations are not
sent. Generally, if these options are not specified,
<tt class="literal">gated</tt> will do the right thing.
</p>
</dd>


<dt><b><tt class="literal">quiet | solicit</tt></b></dt>
<dd>
<p>Specifies whether router solicitations are sent on this interface.
<tt class="literal">solicit</tt>, which is the default, sends router
solicitations. <tt class="literal">quiet</tt> listens to Router
Advertisements but does not send router solicitations.
</p>
</dd>

</dl>

</div>
</div>
<a name="tcp3-APP-B-SECT-8.10" /><div class="sect2">
<h3 class="sect2">B.8.10. The kernel Statement</h3><a name="INDEX-3373" />
<a name="INDEX-3374" />

<blockquote><pre class="code">kernel {
   options
     [nochange]
     [noflushatexit]
     [protosync];
   remnantholdtime  ;
   routes <em class="replaceable">number</em> ;
   flash
     [limit <em class="replaceable">number</em>]
     [type interface | interior | all]  ;
   background
     [limit <em class="replaceable">number</em>]
     [priority flash | higher | lower]  ;
   traceoptions <em class="replaceable">trace_options</em> ; } ;</pre></blockquote>

<p>The <tt class="literal">kernel</tt> statement defines the interactions
between <tt class="literal">gated</tt>
<a name="INDEX-3375" />and the kernel.
</p>

<dl>
<a name="INDEX-3376" /><dt><b><tt class="literal">options</tt></b></dt>
<dd>
<p>Defines three possible configuration options. These are: </p>

<dl>
<dt><b><tt class="literal">nochange</tt></b></dt>
<dd>
<p>Limits <tt class="literal">gated</tt> to deletes and adds. Use on early
versions of the routing socket code that have a malfunctioning change
operation.
</p>
</dd>


<dt><b><tt class="literal">noflushatexit</tt></b></dt>
<dd>
<p>Prevents route deletions at shutdown. Normally, shutdown processing
deletes routes that do not have a "retain" indication.
Use to speed startup on systems with thousands of routes.
</p>
</dd>


<dt><b><tt class="literal">protosync</tt> </b></dt>
<dd>
<p>Updates the kernel protocol field with the current
<tt class="literal">gated</tt> protocol value.
</p>
</dd>

</dl>
</dd>


<a name="INDEX-3377" /><dt><b><tt class="literal">remnantholdtime</tt></b></dt>
<dd>
<p>Holds routes read from the kernel forwarding table at startup for up
to 3 minutes unless they are overridden.
</p>
</dd>


<a name="INDEX-3378" /><dt><b><tt class="literal">routes</tt> <em class="replaceable">number</em></b></dt>
<dd>
<p>Defines the maximum number of routes <tt class="literal">gated</tt> will
install in the kernel. By default, there is no limit to the number of
routes in the kernel forwarding table.
</p>
</dd>


<a name="INDEX-3379" /><dt><b><tt class="literal">flash</tt></b></dt>
<dd>
<p>Tunes the parameters used for flash updates. When routes change, the
process of notifying the kernel is called a "flash
update."
</p>

<dl>
<dt><b><tt class="literal">limit</tt> <em class="replaceable">number</em></b></dt>
<dd>
<p>Sets the maximum number of routes processed during one flash update.
The default is 20. A value of -1 causes all route changes to be
processed. Large updates can slow the processing of
"time-critical" protocols. 20 is a good default.
</p>
</dd>


<dt><b><tt class="literal">type interface | interior | all</tt></b></dt>
<dd>
<p>Specifies the type of routes processed during a flash update. By
default, only interface routes are installed during a flash update.
<tt class="literal">interior</tt> specifies that interior routes are also
installed, and <tt class="literal">all</tt> specifies that interior and
exterior routes should be processed. Specifying <tt class="literal">flash limit
-1 all</tt> causes all routes to be installed during the flash
update, which mimics the behavior of previous versions of
<tt class="literal">gated</tt>.
</p>
</dd>

</dl>
</dd>


<a name="INDEX-3380" /><dt><b><tt class="literal">background</tt></b></dt>
<dd>
<p>Tunes the parameters used for background processing. Since only
interface routes are normally installed during a flash update, most
routes are processed in batches in the background.
</p>

<dl>
<dt><b><tt class="literal">limit</tt> <em class="replaceable">number</em></b></dt>
<dd>
<p>Sets the number of routes processed in one batch. The default is 120.</p>
</dd>


<dt><b><tt class="literal">priority flash | higher | lower</tt></b></dt>
<dd>
<p>Sets the priority for processing batch updates. The default is
<tt class="literal">lower</tt>, which means that batch updates are
processed at a lower priority than flash updates. To process kernel
updates at the same priority as flash updates, specify
<tt class="literal">flash</tt>.
</p>
</dd>

</dl>
</dd>

</dl>

<p>Many tracing options work for the kernel interface because, in many
cases, the interface is handled as a routing protocol. The
command-line trace options, <tt class="literal">symbols</tt> and
<tt class="literal">iflist</tt>, provide information about the kernel. The
<tt class="literal">kernel</tt> statement trace options are:
</p>

<dl>
<a name="INDEX-3381" /><dt><b><tt class="literal">remnants</tt></b></dt>
<dd>
<p>Traces routes read from the kernel when <tt class="literal">gated</tt>
starts.
</p>
</dd>


<a name="INDEX-3382" /><dt><b><tt class="literal">request</tt></b></dt>
<dd>
<p>Traces <tt class="literal">gated</tt> kernel Add/Delete/Change operations. </p>
</dd>

</dl>

<p>The remaining trace options apply only to systems that use the
routing socket to exchange routing information with the kernel.
</p>

<dl>
<a name="INDEX-3383" /><dt><b><tt class="literal">info</tt></b></dt>
<dd>
<p>Traces informational messages received from the routing socket.</p>
</dd>


<a name="INDEX-3384" /><dt><b><tt class="literal">routes</tt></b></dt>
<dd>
<p>Traces routes exchanged with the kernel. </p>
</dd>


<a name="INDEX-3385" /><dt><b><tt class="literal">redirect</tt></b></dt>
<dd>
<p>Traces redirect messages received from the kernel. </p>
</dd>


<a name="INDEX-3386" /><dt><b><tt class="literal">interface</tt></b></dt>
<dd>
<p>Traces interface status messages received from the kernel.</p>
</dd>


<a name="INDEX-3387" /><dt><b><tt class="literal">other</tt></b></dt>
<dd>
<p>Traces any other messages received from the kernel. </p>
</dd>

</dl>

</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="appb_07.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="appb_09.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">B.7. Definition Statements</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">B.9. static Statements</td></tr></table></div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="index.html" /><area shape="rect" coords="266,0,333,90" href="../nfs/index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="../tshoot/index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="../fire/index-2.html" /></map>

</body>
<!-- Mirrored from nnc3.com/mags/Networking2/tcp/appb_08.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:36 GMT -->
</html>
