<html>
<!-- Mirrored from nnc3.com/mags/Networking2/tshoot/ch07_02.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:57:06 GMT -->
<head><title>SNMP-Based Management Tools (Network Troubleshooting Tools)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Joseph D. Sloan" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="059600186XL" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Network Troubleshooting Tools" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.html" alt="Network Troubleshooting Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch07_01.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"></a></td><td align="right" valign="top" width="228"><a href="ch07_03.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table><div>



<h2 class="sect1">7.2. SNMP-Based Management Tools</h2>

<a name="INDEX-1672" /><a name="INDEX-1673" /><a name="INDEX-1674" /><a name="INDEX-1675" /><a name="INDEX-1676" />There are several extremely powerful and
useful noncommercial SNMP tools. Tools from the NET SNMP project,
<em class="filename">scotty</em>, and <em class="filename">tkined</em> are
described here.
</p>

<a name="nettroubletools-CHP-7-SECT-2.1" /><div class="sect2">
<h3 class="sect2">7.2.1. NET SNMP (UCD SNMP)</h3>

<a name="INDEX-1677" />The
University of California at Davis implementation of SNMP
(<em class="filename">UCD SNMP</em>) has its origin in a similar project
at Carnegie Mellon University under Steve Waldbusser (<em class="filename">CMU
SNMP</em>). In the mid-nineties, the CMU project languished.
During this period, the UCD project was born. The UCD project has
greatly expanded the original CMU work and is flourishing, thanks to
the work of Wes Hardaker. The CMU project reemerged for a while with
a somewhat different focus and has seen a lot of support in the Linux
community. Both are excellent. While only UCD SNMP will be described
here, the basics of each are so similar that you should have no
problem using CMU SNMP once you are familiar with UCD SNMP. Very
recently, UCD SNMP has been renamed NET SNMP to reflect some
organizational changes.
</p>

<a name="INDEX-1678" /><a name="INDEX-1679" /><a name="INDEX-1680" /><a name="INDEX-1681" />NET SNMP is actually a set of tools, a
SNMP library, and an extensible agent. The source code is available
and runs on a number of systems. Binaries are also available for some
systems, including Microsoft Windows. NET SNMP supports SNMPv1,
SNMPv2c, and SNMPv3.
</p>

<a name="INDEX-1682" /><a name="INDEX-1683" />Admittedly, the NET SNMP toolset is not
ideal for the routine management of a large network. But it is ideal
for learning about SNMP, is not an unreasonable toolset for
occasional tasks on smaller networks, and can be particularly useful
in debugging SNMP problems, in part because it separates SNMP
functions into individual utilities. The agent software is a logical
choice for systems using Linux or FreeBSD and is extensible. Most,
but not all, of the utilities will be described.
</p>

<a name="nettroubletools-CHP-7-SECT-2.1.1" /><div class="sect3">
<h3 class="sect3">7.2.1.1. snmpget</h3>

<a name="INDEX-1684" /><a name="INDEX-1685" /><a name="INDEX-1686" /><a name="INDEX-1687" /><a name="INDEX-1688" /><a name="INDEX-1689" /><a name="INDEX-1690" />In
the last section, it was stated that there are three messages that
can be sent by a management station: GET_REQUEST, GET_NEXT_REQUEST,
and SET_REQUEST. NET SNMP provides utilities to send each of these
messages -- <em class="filename">snmpget</em>,
<em class="filename">snmpgetnext</em>, and <em class="filename">snmpset</em>,
respectively. In order to retrieve the value of an object, it is
necessary to specify the name or IP address of the remote host, a
community string for the host, and the OID of the object. For
example:
</p>

<blockquote><pre class="code">bsd4# snmpget 172.16.1.5 public .1.3.6.1.2.1.1.1.0
system.sysDescr.0 = "APC Embedded PowerNet SNMP Agent (SW v2.2, HW vB2, Mod: AP9
605, Mfg 08/10/96, SN: WA9632270847, Agent Loader v1.0)"</pre></blockquote>

<a name="INDEX-1691" />There are a
couple of points to make about the OID. First, notice the
<tt class="literal">0</tt> at the end. This is an offset into the data. It
is a common error to omit this. If you are looking at a table, you
would use the actual offset into the table instead of a
<tt class="literal">0</tt>. For example, the description of the third
interface in the interface table would have the OID
<tt class="literal">ifDescr.3</tt>.
</p>

<a name="INDEX-1692" /><a name="INDEX-1693" />Second, the leading dot is important.
NET SNMP will attempt to attach a prefix to any OIDs not beginning
with a dot. By default, the prefix is <tt class="literal">1.3.6.1.2.1</tt>,
but you can change this by setting the environment variable
<em class="filename">PREFIX</em>. In this example, we have specified the
OID explicitly. Without the leading dot, <em class="filename">snmpget</em>
would have added the prefix to what we had, giving an OID that was
too long. On the other hand, you could just use
<tt class="literal">1.1.0</tt> without the leading dot and you would get
the same results. Initially, using the prefix can be confusing, but
it can save a lot of typing once you are used to it.
</p>

Of course, you can also use names rather than numbers, provided the
appropriate MIB is available. This is shown in the next two examples:
</p>

<blockquote><pre class="code">bsd4# snmpget 172.16.1.5 public iso.org.dod.internet.mgmt.mib-2.system.sysDescr.0
system.sysDescr.0 = "APC Embedded PowerNet SNMP Agent (SW v2.2, HW vB2, Mod: AP9
605, Mfg 08/10/96, SN: WA9632270847, Agent Loader v1.0)"
bsd4# snmpget 172.16.1.5 public system.sysDescr.0
system.sysDescr.0 = "APC Embedded PowerNet SNMP Agent (SW v2.2, HW vB2, Mod: AP9
605, Mfg 08/10/96, SN: WA9632270847, Agent Loader v1.0)"</pre></blockquote>

In the first case, the full path was given, and in the second the
prefix was used. (Don't forget the trailing
<tt class="literal">0</tt>.) Numbers and names can be mixed:
</p>

<blockquote><pre class="code">bsd4# snmpget 172.16.1.5 public .1.3.6.internet.2.1.system.1.0
system.sysDescr.0 = "APC Embedded PowerNet SNMP Agent (SW v2.2, HW vB2, Mod: AP9
605, Mfg 08/10/96, SN: WA9632270847, Agent Loader v1.0)"</pre></blockquote>

(Frankly, I can't see much reason for doing this.)</p>

<a name="INDEX-1694" /><a name="INDEX-1695" />Also, if the MIB is known, you can do
a random-access lookup for unique node names:
</p>

<blockquote><pre class="code">bsd4# snmpget 172.16.1.5 public upsBasicIdentModel.0
enterprises.apc.products.hardware.ups.upsIdent.upsBasicIdent.upsBasicIdentModel.
0 = "APC Smart-UPS 700 "</pre></blockquote>

In this example, only the final identifier in the OID,
<tt class="literal">upsBasicIdentMode.0</tt>, is given, and the MIB is
searched to construct the full OID. This can be particularly helpful
if you want to query several objects with a single
<em class="filename">snmpget</em>. You can also use multiple OIDs in the
same <em class="filename">snmpget</em> command to retrieve the values of
several objects.
</p>

</div>

<a name="nettroubletools-CHP-7-SECT-2.1.2" /><div class="sect3">
<h3 class="sect3">7.2.1.2. Configuration and options</h3>

<a name="INDEX-1696" /><a name="INDEX-1697" /><a name="INDEX-1698" /><a name="INDEX-1699" />Before we look further at the NET SNMP
commands, let's discuss configuration and options. For the most
part, these tools share the same configuration files and options. (A
few exceptions will be noted when appropriate.) The general
configuration file is <em class="filename">snmp.conf</em> and is typically
in the <em class="filename">/usr/local/share/snmp</em>,
<em class="filename">/usr/local/lib/snmp</em>, or
<em class="filename">$HOME/.snmp</em> directory. This search path can be
overridden by setting the <em class="filename">SNMPCONFPATH</em>
environment variable. Further documentation can be found in the
<em class="filename">snmp.conf</em> Unix manpage. This manpage also
describes environment variables.
</p>

<a name="INDEX-1700" /><a name="INDEX-1701" /><a name="INDEX-1702" />One
particular concern in configuring the software is the proper
installation of MIBs. As noted earlier, use of the name form of OIDs
works only if the appropriate MIB<a href="#FOOTNOTE-30">[30]</a> is loaded. Devices may have more than one MIB
associated with them. In the examples just presented, we have been
interacting with an SNMP-controlled uninterruptible power supply
(UPS) manufactured by APC Corp. With this device, we can use the
standard default MIB-II defined in RFC 1213. This standard MIB
defines objects used by most devices. If you have correctly installed
the software, this MIB should be readily available. There are two
additional MIBs that may be installed for this particular device. The
first is the IETF MIB, which defines a generic UPS. This is the
UPS-MIB defined by RFC 1628. The third MIB, PowerNet-MIB, contains
APC Corp.'s custom extensions. These last two MIBs came on a
diskette with the SNMP adapter for this particular UPS.
</p><blockquote class="footnote"> <a name="FOOTNOTE-30" />[30]When
<em class="emphasis">a</em> MIB is loaded, it becomes part of
<em class="emphasis">the</em> MIB. Don't say I didn't warn
you.</p> </blockquote>

<a name="INDEX-1703" />To install
these MIBs, the files are first copied to the appropriate directory,
<em class="filename">/usr/local/share/snmp</em> in this case. (You may
also want to rename them so that all your MIB files have consistent
names.) Next, the environment variable <em class="filename">MIBS</em> is
set so the MIBs will be loaded. This can be a colon-delimited list of
individual MIB names, but setting <em class="filename">MIBS</em> to
<tt class="literal">ALL</tt> is usually simpler. On a Windows computer, use
the command:
</p>

<blockquote><pre class="code">C:\usr\bin&gt;set MIBS=ALL</pre></blockquote>

On a Unix system using the Bash shell, you would use:</p>

<blockquote><pre class="code">export MIBS=ALL</pre></blockquote>

For the C-shell, use:</p>

<blockquote><pre class="code">setenv MIBS ALL</pre></blockquote>

Of course, this may vary depending on the shell you use.</p>

Alternately, you can use the environment variable
<em class="filename">MIBFILES</em> to specify filenames. There is also a
command-line option with most of these utilities,
<em class="filename">-m</em>, to load specific MIBs. If the MIBs are not
installed correctly, you will not be able to use names from the MIB,
but you can still access objects by their numerical OIDs.
</p>

<a name="INDEX-1704" />The NET SNMP commands use the same
basic syntax and command-line options. For example, the earlier
discussion on OID usage applies to each command. This is described in
the <em class="filename">variables</em> manpage. The manpages for the
individual commands are a little sparse. This is because the
descriptions of the options have been collected together on the
<em class="filename">snmpcmd</em> manpage. Options applicable to a
specific command can be displayed by using the
<em class="filename">-h</em> option.
</p>

<a name="INDEX-1705" />Let's return to
<em class="filename">snmpget</em> and look at some of the available
options. The <em class="filename">-O</em> options control how output is
formatted. The default is to print the text form of the OID:
</p>

<blockquote><pre class="code">bsd4# snmpget 172.16.1.5 public .1.3.6.1.4.1.318.1.1.1.1.1.1.0
enterprises.apc.products.hardware.ups.upsIdent.upsBasicIdent.upsBasicIdentModel.
0 = "APC Smart-UPS 700 "</pre></blockquote>

<em class="filename">-On</em> forces the OID to be printed numerically:</p>

<blockquote><pre class="code">bsd4# snmpget -On 172.16.1.5 public .1.3.6.1.4.1.318.1.1.1.1.1.1.0
.1.3.6.1.4.1.318.1.1.1.1.1.1.0 = "APC Smart-UPS 700 "</pre></blockquote>

Sometimes the value of an object will be a cryptic numerical code. By
default, a description will be printed. For example:
</p>

<blockquote><pre class="code">bsd4# snmpget 172.16.1.5 public ip.ipForwarding.0
ip.ipForwarding.0 = not-forwarding(2)</pre></blockquote>

Here, the actual value of the object is <tt class="literal">2</tt>. This
description can be suppressed with the <em class="filename">-Oe</em>
option:
</p>

<blockquote><pre class="code">bsd4# snmpget -Oe 172.16.1.5 public ip.ipForwarding.0
ip.ipForwarding.0 = 2</pre></blockquote>

This could be useful in eliminating any confusion about the actual
stored value, particularly if you are going to use the value
subsequently with a SET command.
</p>

<a name="INDEX-1706" />Use the <em class="filename">-Os</em>,
<em class="filename">-OS</em>, and <em class="filename">-Of</em> commands to
control the amount of information included in the OID. The
<em class="filename">-Os</em> option displays the final identifier only:
</p>

<blockquote><pre class="code">bsd4# snmpget -Os 172.16.1.5 public enterprises.318.1.1.1.1.1.1.0
upsBasicIdentModel.0 = "APC Smart-UPS 700 "</pre></blockquote>

The <em class="filename">-OS</em> option is quite similar to
<em class="filename">-Os</em> except that the name of the MIB is placed
before the identifier:
</p>

<blockquote><pre class="code">sd4# snmpget -OS 172.16.1.5 public enterprises.318.1.1.1.1.1.1.0
PowerNet-MIB::upsBasicIdentModel.0 = "APC Smart-UPS 700 "</pre></blockquote>

<em class="filename">-Of</em> forces the display of the full OID:</p>

<blockquote><pre class="code">bsd4# snmpget -Of 172.16.1.5 public enterprises.318.1.1.1.1.1.1.0
.iso.org.dod.internet.private.enterprises.apc.products.hardware.ups.upsIdent.
upsBasicIdent.upsBasicIdentModel.0 = "APC Smart-UPS 700 "</pre></blockquote>

This leaves no question about what you are looking at.</p>

<a name="INDEX-1707" /><a name="INDEX-1708" /><a name="INDEX-1709" />There are a number of additional
options. The <em class="filename">-V</em> option will return the
program's version. The version of SNMP used can be set with the
<em class="filename">-v</em> option, either <tt class="literal">1</tt>,
<tt class="literal">2c</tt>, or <tt class="literal">3</tt>. The
<em class="filename">-d</em> option can be used to dump all SNMP packets.
You can set the number of retries and timeouts with the
<em class="filename">-r</em> and <em class="filename">-t</em> options. These
few options just scratch the surface. The syntax for many of these
options has changed recently, so be sure to consult the
<em class="filename">snmpcmd</em> manpage for more options and details for
the version you use.<a name="INDEX-1710" /><a name="INDEX-1711" /> 
</p>

</div>

<a name="nettroubletools-CHP-7-SECT-2.1.3" /><div class="sect3">
<h3 class="sect3">7.2.1.3. snmpgetnext, snmpwalk, and snmptable</h3>

<a name="INDEX-1712" /><a name="INDEX-1713" /><a name="INDEX-1714" /><a name="INDEX-1715" /><a name="INDEX-1716" /><a name="INDEX-1717" /><a name="INDEX-1718" />Sometimes you will want to
retrieve several related values that are stored together within the
agent. Several commands facilitate this sort of retrieval. The
<em class="filename">snmpgetnext</em> command is very similar to the
<em class="filename">snmpget</em> command. But while
<em class="filename">snmpget</em> returns the value of the specified OID,
<em class="filename">snmpgetnext</em> returns the value of the next object
in the MIB tree:
</p>

<blockquote><pre class="code">bsd4# snmpget -Os 172.16.1.5 public sysDescr.0
sysDescr.0 = APC Embedded PowerNet SNMP Agent (SW v2.2, HW vB2, Mod: AP9605, Mfg
 08/10/96, SN: WA9632270847, Agent Loader v1.0)
bsd4# snmpgetnext -Os 172.16.1.5 public sysDescr.0
sysObjectID.0 = OID: smartUPS700
bsd4# snmpgetnext -Os 172.16.1.5 public sysObjectID.0
sysUpTime.0 = Timeticks: (77951667) 9 days, 0:31:56.67
bsd4# snmpgetnext -Os 172.16.1.5 public sysUpTime.0
sysContact.0 = Sloan</pre></blockquote>

<a name="INDEX-1719" />As
you can see from this example, <em class="filename">snmpgetnext</em> can
be used to walk through a sequence of values. Incidentally, this is
one of the few cases in which it is OK to omit the trailing
<tt class="literal">0</tt>. This command can be particularly helpful if you
don't know the next identifier.
</p>

<a name="INDEX-1720" />If you want all or most of the
values of adjacent objects, the <em class="filename">snmpwalk</em> command
can be used to retrieve a subtree. For example:
</p>

<blockquote><pre class="code">bsd4# snmpwalk 172.16.1.5 public system
system.sysDescr.0 = APC Embedded PowerNet SNMP Agent (SW v2.2, HW vB2, Mod: 
AP9605, Mfg 08/10/96, SN: WA9632270847, Agent Loader v1.0)
system.sysObjectID.0 = OID: enterprises.apc.products.system.smartUPS.smartUPS700
system.sysUpTime.0 = Timeticks: (78093618) 9 days, 0:55:36.18
system.sysContact.0 = Sloan
system.sysName.0 = Equipment Rack APC
system.sysLocation.0 = Network Laboratory
system.sysServices.0 = 72</pre></blockquote>

Be prepared to be overwhelmed if you don't select a small
subtree. You probably wouldn't want to walk the
<em class="filename">mib-2</em> or <em class="filename">enterprises</em>
subtree:
</p>

<blockquote><pre class="code">bsd4# snmpwalk 172.16.2.1 public enterprises | wc
    3320   10962  121987</pre></blockquote>

In this example, the <em class="filename">enterprises</em> subtree is 3320
lines long. Nonetheless, even with large subtrees this can be helpful
to get a quick idea of what is out there. For example, you might pipe
output from a subtree you aren't familiar with to
<em class="filename">head</em> or <em class="filename">more</em> so you can
skim it.
</p>

<a name="INDEX-1721" /><a name="INDEX-1722" /><a name="INDEX-1723" />Some objects are stored as tables. It can
be painful to work with these tables one item at a time, and once you
have them, they can be almost unreadable.
<em class="filename">snmptable</em> is designed to address this need. Here
is an example of a small route table from a Cisco 3620 router:
</p>

<blockquote><pre class="code">bsd4# snmptable -Cb -Cw 80 172.16.2.1 public ipRouteTable
SNMP table: ip.ipRouteTable

         Dest IfIndex Metric1 Metric2 Metric3 Metric4        NextHop     Type
      0.0.0.0       0       0      -1      -1      -1   205.153.60.2 indirect
   172.16.1.0       2       0      -1      -1      -1     172.16.1.1   direct
   172.16.2.0       3       0      -1      -1      -1     172.16.2.1   direct
   172.16.3.0       4       0      -1      -1      -1     172.16.3.1   direct
 205.153.60.0       1       0      -1      -1      -1 205.153.60.250   direct
 205.153.61.0       0       0      -1      -1      -1   205.153.60.1 indirect
 205.153.62.0       0       0      -1      -1      -1   205.153.60.1 indirect
 205.153.63.0       0       0      -1      -1      -1   205.153.60.1 indirect

SNMP table ip.ipRouteTable, part 2

 Proto Age          Mask Metric5           Info
 local  33       0.0.0.0      -1 .ccitt.nullOID
 local   0 255.255.255.0      -1 .ccitt.nullOID
 local   0 255.255.255.0      -1 .ccitt.nullOID
 local   0 255.255.255.0      -1 .ccitt.nullOID
 local   0 255.255.255.0      -1 .ccitt.nullOID
 local  33 255.255.255.0      -1 .ccitt.nullOID
 local  33 255.255.255.0      -1 .ccitt.nullOID
 local  33 255.255.255.0      -1 .ccitt.nullOID</pre></blockquote>

<a name="INDEX-1724" />Even with
<em class="filename">snmptable</em>, it can be a little tricky to get
readable output. In this case, I have used two options to help.
<em class="filename">-Cb</em> specifies a brief header. <em class="filename">-Cw
80</em> defines a maximum column width of 80 characters,
resulting in a multipart table. You can also specify the column
delimiter with the <em class="filename">-Cf</em> option, and you can
suppress headers altogether with the <em class="filename">-CH</em> option.
(There are also a <em class="filename">snmpbulkget</em> and a
<em class="filename">snmpbulkwalk</em> if you are using SNMPv2.)<a name="INDEX-1725" /><a name="INDEX-1726" /><a name="INDEX-1727" /><a name="INDEX-1728" /><a name="INDEX-1729" /><a name="INDEX-1730" />
</p>

</div>

<a name="nettroubletools-CHP-7-SECT-2.1.4" /><div class="sect3">
<h3 class="sect3">7.2.1.4. snmpset</h3>

<a name="INDEX-1731" /><a name="INDEX-1732" /><a name="INDEX-1733" /><a name="INDEX-1734" />The
<em class="filename">snmpset</em> command is used to change the value of
objects by sending SET_REQUEST messages. The syntax of this command
is a little different from previous commands since you must also
specify a value and a type for the value. You will also need to use a
community string that provides read/write access:
</p>

<blockquote><pre class="code">bsd4# snmpset 172.16.1.5 private sysContact.0 s "el Zorro"
system.sysContact.0 = el Zorro</pre></blockquote>

In this example, the system contact was set using a quote-delimited
string. Legitimate types include integers (<em class="filename">i</em>),
strings (<em class="filename">s</em>), hex strings
(<em class="filename">x</em>), decimal strings (<em class="filename">d</em>),
null objects (<em class="filename">n</em>), object ID
(<em class="filename">o</em>), time ticks (<em class="filename">t</em>), and IP
addresses (<em class="filename">a</em>), among others.
</p>

<a name="INDEX-1735" /><a name="INDEX-1736" />People often think of SNMP as being
appropriate only for collecting information, not as a general
configuration tool, since SNMP only allows objects to be retrieved or
set. However, many objects are configuration parameters that control
the operation of the system. Moreover, agents can react to changes
made to objects by running scripts, and so on. With the appropriate
agent, virtually any action can be taken.<a href="#FOOTNOTE-31">[31]</a> For example, you could change
entries in an IP routing table, enable or disable a second interface
on a device, or enable or disable IP forwarding. With an
SNMP-controlled UPS, you could shut off power to a device. What you
can do, and will want to do, will depend on both the device and the
context. You will need to study the documentation for the device and
the applicable MIBs to know what is possible on a case-by-case basis.
</p><blockquote class="footnote">
<a name="FOOTNOTE-31" />[31]<a name="INDEX-1737" /><a name="INDEX-1738" />In an extremely interesting interview of
John Romkey by Carl Malamud on this topic, Romkey describes an
SNMP-controlled toaster. The interview was originally on the Internet
radio program <em class="emphasis">Geek of the Week</em> (May 29, 1993).
At one time, it was available on audio tape from O'Reilly &amp;
Associates (ISBN 1-56592-997-7). Visit <a href="http://town.hall.org/radio/Geek">http://town.hall.org/radio/Geek</a> and follow
the link to Romkey.</p> </blockquote>

</div>

<a name="nettroubletools-CHP-7-SECT-2.1.5" /><div class="sect3">
<h3 class="sect3">7.2.1.5. snmptranslate</h3>

<a name="INDEX-1739" /><a name="INDEX-1740" /><a name="INDEX-1741" /><a name="INDEX-1742" /><a name="INDEX-1743" /><a name="INDEX-1744" />In all the preceding examples, I have
specified an OID. An obvious question is how did I know the OID?
Available OIDs are determined by the design of the agent and are
described by its MIB. There are several different approaches you can
take to discover the contents of a MIB. The most direct approach is
to read the MIB. This is not a difficult task if you don't
insist on understanding every detail. You'll be primarily
interested in the object definitions.
</p>

<a name="INDEX-1745" />Here is an example of the definition of
the system contact (<em class="filename">sysContact</em>) taken from
MIB-II (RFC 1213):
</p>

<blockquote><pre class="code">sysContact OBJECT-TYPE
              SYNTAX  DisplayString (SIZE (0..255))
              ACCESS  read-write
              STATUS  mandatory
              DESCRIPTION
                      "The textual identification of the contact person
                      for this managed node, together with information
                      on how to contact this person."
              ::= { system 4 }</pre></blockquote>

<a name="INDEX-1746" /><a name="INDEX-1747" /><a name="INDEX-1748" /><a name="INDEX-1749" />The object name is in the first line.
The next line says the object's type is a string and specifies
its maximum size. The third line tells us that this can be read or
written. In addition to <em class="filename">read-write</em>, an object
may be designated <em class="filename">read-only</em> or
<em class="filename">not-accessible</em>. While some objects may not be
implemented in every agent, this object is required, as shown in the
next line. Next comes the description. The last line tells where the
object fits into the MIB tree. This is the fourth node in the
<em class="filename">system</em> group.
</p>

<a name="INDEX-1750" /><a name="INDEX-1751" /><a name="INDEX-1752" />With an enterprise MIB, there is usually
some additional documentation that explains what is available. With
standard MIBs like this one, numerous descriptions in books on SNMP
describe each value in detail. These can be very helpful since they
are usually accompanied by tables or diagrams that can be scanned
quickly. See <a href="appb_01.html">Appendix B, "Resources and References"</a> for specific suggestions.
</p>

NET SNMP provides two tools that can be helpful. We have already
discussed <em class="filename">snmpwalk</em>. Another useful tool is
<em class="filename">snmptranslate</em>. This command is designed to
present a MIB in a human-readable form. snmptranslate can be used in
a number of different ways. First, it can be used to translate
between the text and numeric form of an object. For example:
</p>

<blockquote><pre class="code">bsd4# snmptranslate system.sysContact.0
.1.3.6.1.2.1.1.4.0</pre></blockquote>

We can get the numeric form with the <em class="filename">-On</em> option
as shown in the next two examples:
</p>

<blockquote><pre class="code">bsd4# snmptranslate -On .1.3.6.1.2.1.1.4.0
system.sysContact.0

bsd4# snmptranslate -Ofn system.sysContact.0
.iso.org.dod.internet.mgmt.mib-2.system.sysContact.0</pre></blockquote>

<em class="filename">snmptranslate</em> can be a little particular about
prefixes. In the previous example, <em class="filename">sysContact.0</em>
would not have been sufficient. You can get around this with the
<em class="filename">-IR</em> option. (This is usually the default for
most NET SNMP commands.)
</p>

<blockquote><pre class="code">bsd4# snmptranslate -IR sysContact.0
.1.3.6.1.2.1.1.4.0</pre></blockquote>

<a name="INDEX-1753" /><a name="INDEX-1754" />You can also use regular expression
matching. For example:
</p>

<blockquote><pre class="code">bsd4# snmptranslate -On -Ib 'sys.*ime'
system.sysUpTime</pre></blockquote>

Notice the use of single quotes. (This option can return a few
surprises at times as well.)
</p>

You get extended information by using the <em class="filename">-Td</em>
option:
</p>

<blockquote><pre class="code">bsd4# snmptranslate -Td system.sysContact
.1.3.6.1.2.1.1.4
sysContact OBJECT-TYPE
  -- FROM       SNMPv2-MIB, RFC1213-MIB
  -- TEXTUAL CONVENTION DisplayString
  SYNTAX        OCTET STRING (0..255)
  DISPLAY-HINT  "255a"
  MAX-ACCESS    read-write
  STATUS        current
  DESCRIPTION   "The textual identification of the contact person for this
         managed node, together with information on how to contact
         this person.  If no contact information is known, the value
         is the zero-length string."
::= { iso(1) org(3) dod(6) internet(1) mgmt(2) mib-2(1) system(1) 4 }</pre></blockquote>

This is basically what we saw in the MIB but in a little more detail.
(By the way, the lines starting with  --  are just comments
embedded in the MIB.)
</p>

<a name="INDEX-1755" />We can use
<em class="filename">snmptranslate</em> to generate a tree representation
for subtrees by using the <em class="filename">-Tp</em> option. For
example:
</p>

<blockquote><pre class="code">bsd4# snmptranslate -Tp system
+--system(1)
   |
   +-- -R-- String    sysDescr(1)
   |        Textual Convention: DisplayString
   |        Size: 0..255
   +-- -R-- ObjID     sysObjectID(2)
   +-- -R-- TimeTicks sysUpTime(3)
   +-- -RW- String    sysContact(4)
   |        Textual Convention: DisplayString
   |        Size: 0..255
   +-- -RW- String    sysName(5)
   |        Textual Convention: DisplayString
   |        Size: 0..255
   +-- -RW- String    sysLocation(6)
   |        Textual Convention: DisplayString
   |        Size: 0..255
   +-- -R-- Integer   sysServices(7)
   +-- -R-- TimeTicks sysORLastChange(8)
   |        Textual Convention: TimeStamp
   |
   +--sysORTable(9)
      |
      +--sysOREntry(1)
         |
         +-- ---- Integer   sysORIndex(1)
         +-- -R-- ObjID     sysORID(2)
         +-- -R-- String    sysORDescr(3)
         |        Textual Convention: DisplayString
         |        Size: 0..255
         +-- -R-- TimeTicks sysORUpTime(4)
                  Textual Convention: TimeStamp</pre></blockquote>

<a name="INDEX-1756" /><a name="INDEX-1757" /><a name="INDEX-1758" />Don't forget the final
argument or you'll get the entire MIB. There are also options
to print all objects in labeled form (<em class="emphasis">-Tl</em> ),
numeric form (<em class="emphasis">-To</em>), or symbolic form
(<em class="emphasis">-Tt</em>), but frankly, I've never found much
use for these. These options simply give too much data. One last word
of warning: if you have trouble using
<em class="filename">snmptranslate</em>, the first thing to check is
whether your MIBs are correctly loaded.<a name="INDEX-1759" /><a name="INDEX-1760" /><a name="INDEX-1761" /><a name="INDEX-1762" /><a name="INDEX-1763" /> 
</p>

</div>

<a name="nettroubletools-CHP-7-SECT-2.1.6" /><div class="sect3">
<h3 class="sect3">7.2.1.6. snmpnetstat</h3>

<em class="filename">snmpnetstat</em><a name="INDEX-1764" /><a name="INDEX-1765" /><a name="INDEX-1766" /> is an
SNMP analog to <em class="filename">netstat</em>. Using SNMP, it will
provide <em class="filename">netstat</em>-like information from remote
systems. Many of the major options are the same as with
<em class="filename">netstat</em>. A few examples will show how this tool
is used.
</p>

<a name="INDEX-1767" />The <em class="filename">-an</em> option
will show the sockets in open mode:
</p>

<blockquote><pre class="code">bsd4# snmpnetstat 172.16.2.234 public -an
Active Internet (tcp) Connections (including servers)
Proto Local Address                Foreign Address              (state)
tcp    *.ftp                        *.*                          LISTEN
tcp    *.telnet                     *.*                          LISTEN
tcp    *.smtp                       *.*                          LISTEN
tcp    *.http                       *.*                          LISTEN
tcp    *.sunrpc                     *.*                          LISTEN
tcp    *.printer                    *.*                          LISTEN
tcp    *.659                        *.*                          LISTEN
tcp    *.680                        *.*                          LISTEN
tcp    *.685                        *.*                          LISTEN
tcp    *.690                        *.*                          LISTEN
tcp    *.1024                       *.*                          LISTEN
tcp    172.16.2.234.telnet          sloan.1135                   ESTABLISHED
Active Internet (udp) Connections
Proto Local Address
udp    *.sunrpc
udp    *.snmp
udp    *.who
udp    *.657
udp    *.668
udp    *.678
udp    *.683
udp    *.688
udp    *.1024
udp    *.nfsd</pre></blockquote>

Notice that with <em class="filename">snmpnetstat</em>, the options are
listed at the end of the command.
</p>

<a name="INDEX-1768" />The <em class="filename">-r</em> option
gives the route table. Here is a route table from a Cisco 3620
router:
</p>

<blockquote><pre class="code">bsd4# snmpnetstat 172.16.2.1 public -rn
Routing tables
Destination                Gateway            Flags   Interface
default                    205.153.60.2       UG      if0
172.16.1/24                172.16.1.1         U       Ethernet0/1
172.16.2/24                172.16.2.1         U       Ethernet0/2
172.16.3/24                172.16.3.1         U       Ethernet0/3
205.153.60                 205.153.60.250     U       Ethernet0/0
205.153.61                 205.153.60.1       UG      if0
205.153.62                 205.153.60.1       UG      if0
205.153.63                 205.153.60.1       UG      if0</pre></blockquote>

<a name="INDEX-1769" />In each of these examples, the
<em class="filename">-n</em> option is used to suppress name resolution.
</p>

<a name="INDEX-1770" /><a name="INDEX-1771" />Here are the packet counts for
the interfaces from the same router:
</p>

<blockquote><pre class="code">bsd4# snmpnetstat 172.16.2.1 public -i
Name           Mtu Network     Address         Ipkts Ierrs  Opkts Oerrs Queue
Ethernet0/1   1500 172.16.1/24 172.16.1.1     219805     0 103373     0     0
Ethernet0/0   1500 205.153.60  205.153.60.250 406485     0 194035     0     0
Ethernet0/2   1500 172.16.2/24 172.16.2.1     177489     1 231011     0     0
Ethernet0/3   1500 172.16.3/24 172.16.3.1      18175     0  97954     0     0
Null0         1500                                 0     0      0     0     0</pre></blockquote>

As with <em class="filename">netstat</em>, the <em class="filename">-i</em>
option is used.
</p>

<a name="INDEX-1772" />As a final example, the
<em class="filename">-s</em> option is used with the
<em class="filename">-P</em> option to get general statistics with output
restricted to a single protocol, in this case IP:
</p>

<blockquote><pre class="code">bsd4# snmpnetstat 172.16.2.1 public -s -P ip
ip:
        533220 total datagrams received
        0 datagrams with header errors
        0 datagrams with an invalid destination address
        231583 datagrams forwarded
        0 datagrams with unknown protocol
        0 datagrams discarded
        301288 datagrams delivered
        9924 output datagram requests
        67 output datagrams discarded
        4 datagrams with no route
        0 fragments received
        0 datagrams reassembled
        0 reassembly failures
        0 datagrams fragmented
        0 fragmentation failures
        0 fragments created</pre></blockquote>

This should all seem very familiar to <em class="filename">netstat</em>
users.
</p>

</div>

<a name="nettroubletools-CHP-7-SECT-2.1.7" /><div class="sect3">
<h3 class="sect3">7.2.1.7. snmpstatus</h3>

<a name="INDEX-1773" /><a name="INDEX-1774" /><a name="INDEX-1775" />The <em class="filename">snmpstatus</em>
command is a quick way to get a few pieces of basic information from
an agent:
</p>

<blockquote><pre class="code">bsd4# snmpstatus 172.16.2.1 public
[172.16.2.1]=&gt;[Cisco Internetwork Operating System Software
IOS (tm) 3600 Software (C3620-IO3-M), Version 12.0(7)T,  RELEASE SOFTWARE (fc2)
Copyright (c) 1986-1999 by Cisco Systems, Inc.
Compiled Wed 08-Dec-99 10:08 by phanguye] Up: 11 days, 1:31:43.66
Interfaces: 5, Recv/Trans packets: 1113346/629074 | IP: 533415/9933</pre></blockquote>

<a name="INDEX-1776" /><a name="INDEX-1777" />It gets the IP address, text
description, time since the system was booted, total received and
transmitted packets, and total received and transmitted IP packets.
</p>

</div>

<a name="nettroubletools-CHP-7-SECT-2.1.8" /><div class="sect3">
<h3 class="sect3">7.2.1.8. Agents and traps</h3>

<a name="INDEX-1778" /><a name="INDEX-1779" /><a name="INDEX-1780" /><a name="INDEX-1781" /><a name="INDEX-1782" />In addition to management software, NET
SNMP also includes the agent <em class="filename">snmpd</em>. As with any
agent, <em class="filename">snmpd</em> responds to SNMP messages,
providing basic management for the host on which it is run.
<em class="filename">snmpd</em> uses the <em class="filename">snmpd.conf</em>
configuration file (not to be confused with
<em class="filename">snmp.conf</em>, the configuration file for the
utilities). <em class="filename">snmpd</em> functionality will depend, in
part, on what is enabled by its configuration file. The distribution
comes with the MIB <em class="filename">UCD-SNMP-MIB.txt</em> and the file
<em class="filename">EXAMPLE.conf</em>, an example configuration file that
is fairly well documented. The manpage for
<em class="filename">snmpd.conf</em> provides additional information.
</p>

<a name="INDEX-1783" /><a name="INDEX-1784" /><a name="INDEX-1785" /><a name="INDEX-1786" />At a minimum, you'll want to
edit the security entries. The <em class="filename">com2sec</em> entry is
used to set the community names for a host or network. The
<em class="filename">group</em> entry defines an access class. For
example, consider these three lines from a configuration file:
</p>

<blockquote><pre class="code">com2sec    local    172.16.2.236    private
...
group    MyRWGroup v1    local
...
access   MyRWGroup ""      any       noauth    prefix      all    all    none</pre></blockquote>

The first line sets the community string to
<tt class="literal">private</tt> for the single host
<em class="emphasis">172.16.2.236</em>. The last two establish that this
host is using SNMPv1 and has both read and write privileges.
</p>

<a name="INDEX-1787" /><a name="INDEX-1788" /><a name="INDEX-1789" /><a name="INDEX-1790" />Even without further editing
of the configuration file, the agent provides a number of useful
pieces of information. These include things like information on
processes (<em class="filename">prTable</em>), memory usage
(<em class="filename">memory</em>), processor load
(<em class="filename">laTable</em>), and disk usage
(<em class="filename">dskTable</em>). For example, here is the disk
information from a Linux system:
</p>

<blockquote><pre class="code">bsd4# snmpwalk 172.16.2.234 public dskTable
enterprises.ucdavis.dskTable.dskEntry.dskIndex.1 = 1
enterprises.ucdavis.dskTable.dskEntry.dskPath.1 = /
enterprises.ucdavis.dskTable.dskEntry.dskDevice.1 = /dev/sda1
enterprises.ucdavis.dskTable.dskEntry.dskMinimum.1 = 10000
enterprises.ucdavis.dskTable.dskEntry.dskMinPercent.1 = -1
enterprises.ucdavis.dskTable.dskEntry.dskTotal.1 = 202182
enterprises.ucdavis.dskTable.dskEntry.dskAvail.1 = 133245
enterprises.ucdavis.dskTable.dskEntry.dskUsed.1 = 58497
enterprises.ucdavis.dskTable.dskEntry.dskPercent.1 = 31
enterprises.ucdavis.dskTable.dskEntry.dskErrorFlag.1 = 0
enterprises.ucdavis.dskTable.dskEntry.dskErrorMsg.1 =</pre></blockquote>

Most of the entries are just what you would guess. The
<em class="filename">dskPath</em> entry says we are looking at the root
partition. The <em class="filename">dskDevice</em> gives the path to the
partition being examined, <em class="filename">/dev/sda1</em>. The next
two items are parameters for triggering error messages. The
<em class="filename">dskTotal</em> entry is the size of the partition in
kilobytes. This partition is 202MB. The next two entries,
<em class="filename">dskAvail</em> and <em class="filename">dskUsed</em>, give
the amount of available and used space; 31% of the disk is in use.
Here is the output from <em class="filename">df</em> for the same system:
</p>

<blockquote><pre class="code">lnx1# df -k /
Filesystem           1k-blocks      Used Available Use% Mounted on
/dev/sda1               202182     58497    133245  31% /</pre></blockquote>

The last two entries are objects used to signal errors. By editing
the configuration file, you can get information on other partitions.
Brief descriptions for each object are included within the MIB,
<em class="filename">UCD-SNMP-MIB.txt</em>. Directions for changing the
configuration file are given in the example file.
</p>

<a name="INDEX-1791" /><a name="INDEX-1792" /><a name="INDEX-1793" />It is also possible to extend the agent.
This will allow you to run external programs or scripts. The output,
in its simplest form, is limited to a single line and an exit code
that can be retrieved as an MIB object. For example, the following
line could be added to the configuration file:
</p>

<blockquote><pre class="code">exec datetest /bin/date -j -u</pre></blockquote>

Here, <em class="filename">exec</em> is a keyword,
<em class="filename">datetest</em> is a label,
<em class="filename">/bin/date</em> is the command, and the rest of the
line is treated as a set of arguments and parameters to the command.
The <em class="filename">-j</em> option prevents a query to set the date,
and <em class="filename">-u</em> specifies Coordinated Universal time. The
command is run by the agent each time you try to access the object.
For example, <em class="filename">snmpwalk</em> could be used to retrieve
the following information:
</p>

<blockquote><pre class="code">bsd4# snmpwalk 172.16.2.236 private extTable
enterprises.ucdavis.extTable.extEntry.extIndex.1 = 1
enterprises.ucdavis.extTable.extEntry.extNames.1 = datetest
enterprises.ucdavis.extTable.extEntry.extCommand.1 = /bin/date -j -u
enterprises.ucdavis.extTable.extEntry.extResult.1 = 0
enterprises.ucdavis.extTable.extEntry.extOutput.1 = Mon Jun 26 14:10:50 GMT 2000
enterprises.ucdavis.extTable.extEntry.extErrFix.1 = 0
enterprises.ucdavis.extTable.extEntry.extErrFixCmd.1 =</pre></blockquote>

You should be able to recognize the label, command with options, exit
code, and output in this table. The command will be run each time you
retrieve a value from this table.
</p>

<a name="INDEX-1794" /><a name="INDEX-1795" /><a name="INDEX-1796" />Running <em class="filename">snmpd</em> on a
system is straightforward. As root, type <tt class="literal">snmpd</tt>,
and it will immediately fork and return the prompt. There are several
options you can use. If you don't want it to fork, you can use
the <em class="filename">-f</em> option. This is useful with options that
return additional runtime information. I've found that it is
also useful when testing the configuration file. I'll start
<em class="filename">snmpd</em> in one window and test the configuration
in another. When I'm ready to change configurations, I jump
back to the original window and kill and restart the process. Of
course, you can always use <em class="filename">ps</em> to look up the
process and then send the process a <em class="filename">-HUP</em> signal.
Or you could use <em class="filename">snmpset</em> to set the OID
<em class="filename">versionUpdateConfig</em> to <tt class="literal">1</tt> to
force a reload of the configuration file:
</p>

<blockquote><pre class="code">bsd4# snmpset 172.16.2.236 private versionUpdateConfig.0 i 1
enterprises.ucdavis.version.versionUpdateConfig.0 = 1</pre></blockquote>

Take your pick, but you must reload the file before changes will take
effect.
</p>

<a name="INDEX-1797" /><a name="INDEX-1798" />It is
possible to use <em class="filename">snmpd</em> options in a couple of
ways to trace packet exchanges. You can use the options
<em class="filename">-f</em>, <em class="filename">-L</em>, and
<em class="filename">-d</em>, respectively, to prevent forking, to
redirect messages to standard output, and to dump packets. Here is an
example:
</p>

<blockquote><pre class="code">bsd4# snmpd -f -L -d
UCD-SNMP version 4.1.2

Received 49 bytes from 205.153.63.30:1055
0000: 30 82 00 2D  02 01 00 04  06 70 75 62  6C 69 63 A0    0..-.....public.
0016: 82 00 1E 02  02 0B 78 02  01 00 02 01  00 30 82 00    ......x......0..
0032: 10 30 82 00  0C 06 08 2B  06 01 02 01  01 06 00 05    .0.....+........
0048: 00                                                    .

Received SNMP packet(s) from 205.153.63.30
  GET message
    -- system.sysLocation.0
    &gt;&gt; system.sysLocation.0 = 303 Laura Lander Hall

Sending 70 bytes to 205.153.63.30:1055
0000: 30 82 00 42  02 01 00 04  06 70 75 62  6C 69 63 A2    0..B.....public.
0016: 82 00 33 02  02 0B 78 02  01 00 02 01  00 30 82 00    ..3...x......0..
0032: 25 30 82 00  21 06 08 2B  06 01 02 01  01 06 00 04    %0..!..+........
0048: 15 33 30 33  20 4C 61 75  72 61 20 4C  61 6E 64 65    .303 Laura Lande
0064: 72 20 48 61  6C 6C                                    r Hall</pre></blockquote>

<a name="INDEX-1799" />This is
probably more information than you want. As previously noted, you
probably don't want to delve into the hex. You can replace the
<em class="filename">-d</em> option with the <em class="filename">-V</em>
option to get a verbose display but without the dump:
</p>

<blockquote><pre class="code">bsd4# snmpd -f -L -V
UCD-SNMP version 4.1.2
Received SNMP packet(s) from 205.153.63.30
  GET message
    -- system.sysLocation.0
    &gt;&gt; system.sysLocation.0 = 303 Laura Lander Hall</pre></blockquote>

This should give you an adequate idea of what is going on for most
troubleshooting needs. See the manpage for other options.
</p>

<a name="INDEX-1800" /><a name="INDEX-1801" /><a name="INDEX-1802" /><a name="INDEX-1803" /><a name="INDEX-1804" /><a name="INDEX-1805" /><a name="INDEX-1806" />NET
SNMP also includes two applications for dealing with traps.
<em class="filename">snmptrapd</em> starts a daemon to receive and respond
to traps. It uses the configuration file
<em class="filename">snmptrapd.conf</em>. The
<em class="filename">snmptrap</em> is an application used to generate
traps. While these can be useful in troubleshooting, their use is
arcane to say the least. You will need to edit the appropriate MIB
files before using these. There are simpler ways to test
traps.<a name="INDEX-1807" /><a name="INDEX-1808" /><a name="INDEX-1809" /><a name="INDEX-1810" /><a name="INDEX-1811" /><a name="INDEX-1812" /><a name="INDEX-1813" /><a name="INDEX-1814" /><a name="INDEX-1815" /> 
</p>

</div>
</div>
<a name="nettroubletools-CHP-7-SECT-2.2" /><div class="sect2">
<h3 class="sect2">7.2.2. scotty</h3>

<em class="filename">scotty</em><a name="INDEX-1816" /><a name="INDEX-1817" /><a name="INDEX-1818" /><a name="INDEX-1819" /> was introduced in <a href="ch06_01.html">Chapter 6, "Device Discovery and Mapping"</a>. Now that we've talked a little about
SNMP, here are a few more examples of using
<em class="filename">scotty</em>. These are based on examples given in one
of the <em class="filename">README</em> files that comes with
<em class="filename">scotty</em>. Since you will have to install
<em class="filename">scotty</em> to get <em class="filename">tkined</em>, it is
helpful to know a few <em class="filename">scotty</em> commands to test
your setup. These <em class="filename">scotty</em> commands also provide a
quick-and-dirty way of getting a few pieces of information.
</p>

To use SNMP with <em class="filename">scotty</em>, you must first
establish an SNMP session:
</p>

<blockquote><pre class="code">lnx1# scotty
% set s [snmp session -address 172.16.1.5 -community private]
snmp0</pre></blockquote>

<a name="INDEX-1820" /><a name="INDEX-1821" />Once you have a session, you can
retrieve a single object, multiple objects, the successor of an
object, or subtrees. Here are some examples:
</p>

<blockquote><pre class="code">% $s get sysDescr.0
{1.3.6.1.2.1.1.1.0 {OCTET STRING} {APC Embedded PowerNet SNMP Agent (SW v2.2, HW
 vB2, Mod: AP9605, Mfg 08/10/96, SN: WA9632270847, Agent Loader v1.0)}}
% $s get "sysDescr.0 sysContact.0"
{1.3.6.1.2.1.1.1.0 {OCTET STRING} {APC Embedded PowerNet SNMP Agent (SW v2.2, HW
 vB2, Mod: AP9605, Mfg 08/10/96, SN: WA9632270847, Agent Loader v1.0)}} {1.3.6.1
.2.1.1.4.0 {OCTET STRING} {Sloan &lt;jsloan@lander.edu&gt;}}
% $s getnext sysUpTime.0
{1.3.6.1.2.1.1.4.0 {OCTET STRING} {Sloan &lt;jsloan@lander.edu&gt;}}
% $s getnext [mib successor system]
{1.3.6.1.2.1.1.1.0 {OCTET STRING} {APC Embedded PowerNet SNMP Agent (SW v2.2, HW
 vB2, Mod: AP9605, Mfg 08/10/96, SN: WA9632270847, Agent Loader v1.0)}} {1.3.6.1
.2.1.1.2.0 {OBJECT IDENTIFIER} PowerNet-MIB!smartUPS700} {1.3.6.1.2.1.1.3.0 Time
Ticks {4d 22:27:07.42}} {1.3.6.1.2.1.1.4.0 {OCTET STRING} {Joe Sloan}} {1.3.6.1.
2.1.1.5.0 {OCTET STRING} {APC UPS}} {1.3.6.1.2.1.1.6.0 {OCTET STRING} {214 Laura
 Lander Hall, Equipment Rack}} {1.3.6.1.2.1.1.7.0 INTEGER 72} {1.3.6.1.2.1.2.1.0
 INTEGER 1} {1.3.6.1.2.1.2.1.0 INTEGER 1}</pre></blockquote>

<a name="INDEX-1822" />Once you know the syntax, it is
straightforward to change the value of objects as can be seen here:
</p>

<blockquote><pre class="code">% $s set [list [list sysContact.0 "OCTET STRING" "Joe Sloan"] ]
{1.3.6.1.2.1.1.4.0 {OCTET STRING} {Joe Sloan}}
% $s get sysContact.0
{1.3.6.1.2.1.1.4.0 {OCTET STRING} {Joe Sloan}}</pre></blockquote>

Notice that after the object is set, I have retrieved it to verify
the operation. I strongly recommend doing this each time you change
something.
</p>

<a name="INDEX-1823" />If you aren't familiar with
<em class="emphasis">Tcl</em>, then defining a trap handler will seem
arcane. Here is an example:
</p>

<blockquote><pre class="code">% % proc traphandler {ip list} {
     set msg "SNMP trap from $ip:"
     foreach vb $list {
         append msg " [mib name [lindex $vb 0]]=\"[lindex $vb 2]\""
     }
     puts stderr $msg
  }
% set t [snmp session -port 162]
snmp1
% $t bind "" trap {traphandler %A "%V"}</pre></blockquote>

Once the trap handler is defined, we can test it by interrupting the
power to the UPS by unplugging the UPS.<a href="#FOOTNOTE-32">[32]</a> This test
generated the following trap messages:
</p><blockquote class="footnote"> <a name="FOOTNOTE-32" />[32]This is OK
with this particular UPS. In fact, it's suggested in the
documentation. However, you don't want to do this with just any
UPS. While UPSs are designed to deal with power interruptions, some
are not necessarily designed to deal with the ground being removed,
as happens when you unplug a UPS.</p> </blockquote>

<blockquote><pre class="code">% SNMP trap from 172.16.1.5: sysUpTime.0="2d 21:15:50.44" snmpTrapOID.0="PowerNe
t-MIB!upsOnBattery" smartUPS700="57:41:52:4E:49:4E:47:3A:20:54:68:65:20:55:50:53
:20:6F:6E:20:73:65:72:69:61:6C:20:70:6F:72:74:20:31:20:69:73:20:6F:6E:20:62:61:7
4:74:65:72:79:20:62:61:63:6B:75:70:20:70:6F:77:65:72:2E" snmpTrapEnterprise.0="a
pc"
SNMP trap from 172.16.1.5: sysUpTime.0="2d 21:15:50.55" snmpTrapOID.0="1.3.6.1.2
.1.33.2.0.1" upsEstimatedMinutesRemaining="31" upsSecondsOnBattery="0" upsConfig
LowBattTime="2" snmpTrapEnterprise.0="upsTraps"
SNMP trap from 172.16.1.5: sysUpTime.0="2d 21:15:50.66" snmpTrapOID.0="1.3.6.1.2
.1.33.2.0.3" upsAlarmId="12" upsAlarmDescr="UPS-MIB!upsAlarmInputBad" snmpTrapEn
terprise.0="upsTraps"
SNMP trap from 172.16.1.5: sysUpTime.0="2d 21:15:55.27" snmpTrapOID.0="1.3.6.1.2
.1.33.2.0.4" upsAlarmId="11" upsAlarmDescr="UPS-MIB!upsAlarmOnBattery" snmpTrapE
nterprise.0="upsTraps"
SNMP trap from 172.16.1.5: sysUpTime.0="2d 21:15:55.38" snmpTrapOID.0="1.3.6.1.2
.1.33.2.0.4" upsAlarmId="12" upsAlarmDescr="UPS-MIB!upsAlarmInputBad" snmpTrapEn
terprise.0="upsTraps"
SNMP trap from 172.16.1.5: sysUpTime.0="2d 21:15:55.50" snmpTrapOID.0="PowerNet-
MIB!powerRestored" smartUPS700="49:4E:46:4F:52:4D:41:54:49:4F:4E:3A:20:4E:6F:72:
6D:61:6C:20:70:6F:77:65:72:20:68:61:73:20:62:65:65:6E:20:72:65:73:74:6F:72:65:64
:20:74:6F:20:74:68:65:20:55:50:53:20:6F:6E:20:73:65:72:69:61:6C:20:70:6F:72:74:2
0:31:2E" snmpTrapEnterprise.0="apc"</pre></blockquote>

From this example, you can see a sequence of traps as the power is
lost and restored. Most messages should be self-explanatory, and all
are explained in the UPS documentation.
</p>

Generating traps is much simpler. In this example, a session is
started and a trap is sent to that session:
</p>

<blockquote><pre class="code">% set u [snmp session -port 162 -address 172.16.2.234]
snmp2
% $u trap coldStart ""</pre></blockquote>

You can terminate a session without exiting
<em class="filename">scotty</em> with the <tt class="command">destroy</tt>
command:
</p>

<blockquote><pre class="code">% $u destroy</pre></blockquote>

If you are thinking about writing <em class="emphasis">Tcl</em> scripts,
this should give you an idea of the power of the
<em class="filename">tnm</em> extensions supplied by
<em class="filename">scotty</em>.
</p>

<a name="INDEX-1824" />If you
aren't familiar with the syntax of <em class="emphasis">Tcl</em>,
these examples will seem fairly opaque but should give you an idea of
what is possible. You could try these on your system as presented
here, but if you are really interested is doing this sort of thing,
you'll probably want to learn some <em class="emphasis">Tcl</em>
first. Several sources of information are given in <a href="appb_01.html">Appendix B, "Resources and References"</a>.<a name="INDEX-1825" /><a name="INDEX-1826" /><a name="INDEX-1827" /><a name="INDEX-1828" /> 
</p>

</div>
<a name="nettroubletools-CHP-7-SECT-2.3" /><div class="sect2">
<h3 class="sect2">7.2.3. tkined</h3>

<em class="filename">tkined</em><a name="INDEX-1829" /><a name="INDEX-1830" /><a name="INDEX-1831" /><a name="INDEX-1832" /> was introduced in the last chapter. Here
we will look at how it can be used to retrieve information and do
basic monitoring. <em class="filename">tkined</em> is a versatile tool,
and only some of the more basic features will be described here. This
should be enough to get you started and help you decide if
<em class="filename">tkined</em> is the right tool for your needs. A small
test network is shown in <a href="ch07_02.html#nettroubletools-CHP-7-FIG-3">Figure 7-3</a>. (We will be
looking at this network, along with minor variations, in the
following examples.)
</p>

<a name="nettroubletools-CHP-7-FIG-3" /><div class="figure"><img height="285" alt="Figure 7-3" src="figs/ntt_0703.gif" width="453" /></div><h4 class="objtitle">Figure 7-3. Demo network</h4>

<a name="nettroubletools-CHP-7-SECT-2.3.1" /><div class="sect3">
<h3 class="sect3">7.2.3.1. ICMP monitoring</h3>

<a name="INDEX-1833" /><a name="INDEX-1834" /><a name="INDEX-1835" />ICMP monitoring periodically sends
an ECHO_REQUEST packet to a remote device to see if the connection is
viable. (We've seen examples of this before.) SNMP monitoring
is superior when available since it can be used to retrieve
additional information. But if the device doesn't support SNMP,
or if you don't have SNMP access, ICMP monitoring may be your
only option. Your ISP, for example, probably won't give you
SNMP access to their routers even though you depend on them.
</p>

<a name="INDEX-1836" /><a name="INDEX-1837" />To use ICMP monitoring with
<em class="filename">tkined</em>, use Tools <img alt="Figure 7.2.3.1" src="figs/U2192.gif" /> IP-Monitor. This will
add an IP-Monitor menu to the menu bar. Next, select a device on your
map by clicking on the Select tool and then the device's icon.
Now, use IP-Monitor <img alt="Figure 7.2.3.1" src="figs/U2192.gif" /> Check Reachability. (See <a href="ch07_02.html#nettroubletools-CHP-7-FIG-4">Figure 7-4</a>.) Since the idea of monitoring is to alert you
to problems, if your device is reachable, you shouldn't see any
changes. If the device is nearby and it won't create any
problems, you can test your setup by disconnecting the device from
the network. The device's icon should turn red and start
flashing. A message will also be displayed on the map under the icon.
</p>

<a name="nettroubletools-CHP-7-FIG-4" /><div class="figure"><img height="368" alt="Figure 7-4" src="figs/ntt_0704.gif" width="88" /></div><h4 class="objtitle">Figure 7-4. IP-Monitor menu</h4>

<a name="INDEX-1838" /><a name="INDEX-1839" /><a name="INDEX-1840" />If the device is in a collapsed group,
the icon for the group will flash. Thus, you don't have to have
an icon displayed for every device you are monitoring. You could
start a monitor on each device of interest, put related devices into
a group, and collapse the group. By creating a number of groups, all
collapsed, you can monitor a large number of machines from a small,
uncluttered map and still be able to drill down on a problem.
</p>

When you reconnect the device, the icon should turn black and then
stop flashing. It may take a minute to see these changes. By default,
the system polls devices every 60 seconds. You can check which
devices are being monitored by selecting IP-Monitor <img alt="Figure 7.2.3.1" src="figs/U2192.gif" /> Monitor
Job Info. A pop-up box will display a list of the monitors that are
running.
</p>

<a name="INDEX-1841" />If you want to change parameters,
select IP-Monitor <img alt="Figure 7.2.3.1" src="figs/U2192.gif" /> Modify Monitor Job. This will bring up a box
displaying a list of running jobs. Select the job of interest by
clicking on it, then click on the Modify button. The box listing jobs
will be replaced by a box giving job parameters, as shown in <a href="ch07_02.html#nettroubletools-CHP-7-FIG-5">Figure 7-5</a>. 
</p>

<a name="nettroubletools-CHP-7-FIG-5" /><div class="figure"><img height="198" alt="Figure 7-5" src="figs/ntt_0705.gif" width="259" /></div><h4 class="objtitle">Figure 7-5. Monitor job parameters</h4>

<a name="INDEX-1842" /><a name="INDEX-1843" /><a name="INDEX-1844" /><a name="INDEX-1845" /><a name="INDEX-1846" />You can reset the polling rate by
changing the Intervaltime field. The next two radio buttons allow you
to suspend or restart a suspended job. The two Threshold fields allow
you to establish limits on response times. If your system normally
responds within, say, 100ms, you could set Rising Threshold to 200ms.
If the quality of the connection degrades so that response time rises
above 200ms, the system will alert you. The Threshold Action buttons
allow you to say how you want to be notified when thresholds are
crossed. Finally, you can commit to the changes, terminate the job,
or cancel any changes.
</p>

<a name="INDEX-1847" /><a name="INDEX-1848" />If you are really interested in tracking
how response time is changing, you can select IP-Monitor <img alt="Figure 7.2.3.1" src="figs/U2192.gif" /> Round
Trip Time. A small box will appear on the map, partially obscuring
the icon. (You can drag it to a more convenient location.) This is
called a <em class="emphasis">stripchart</em> and will plot round-trip
times against time. You can change parameters using IP-Monitor <img alt="Figure 7.2.3.1" src="figs/U2192.gif" />
Modify Monitor Job. You can change labels and scale by right-clicking
on the chart.
</p>

<a href="ch07_02.html#nettroubletools-CHP-7-FIG-6">Figure 7-6</a> shows two stripcharts. The chart in the
upper right really isn't very revealing since the device is on
the local network and everything is working OK. The latest round-trip
time is displayed below the stripchart and is updated dynamically. A
device does not have to be integrated into the map. The site
www.infoave.net, an ISP at the bottom of the
figure, has been added to the site and is being monitored. This icon
is partially obscured by a slider used to adjust the scale. Other
ICMP monitoring options, shown in <a href="ch07_02.html#nettroubletools-CHP-7-FIG-4">Figure 7-4</a>, are
available.<a name="INDEX-1849" /><a name="INDEX-1850" /> 
</p>

<a name="nettroubletools-CHP-7-FIG-6" /><div class="figure"><img height="285" alt="Figure 7-6" src="figs/ntt_0706.gif" width="453" /></div><h4 class="objtitle">Figure 7-6. Map with stripcharts</h4>

</div>

<a name="nettroubletools-CHP-7-SECT-2.3.2" /><div class="sect3">
<h3 class="sect3">7.2.3.2. SNMP traps</h3>

<a name="INDEX-1851" /><a name="INDEX-1852" /><a name="INDEX-1853" /><a name="INDEX-1854" /><a name="INDEX-1855" /><a name="INDEX-1856" />Before you begin using
<em class="filename">tkined</em> for SNMP-based monitoring, you want to
make sure the appropriate MIBs are installed. These will usually be
located in a common <em class="filename">mibs</em> directory under the
<em class="filename">tnm</em> library directory, e.g.,
<em class="filename">/usr/lib/tnm2.1.10/mibs</em> or
<em class="filename">/usr/local/lib/tnm2.1.10/mibs</em>. You will want to
copy any enterprise MIB you plan to use to that directory. Next, you
should verify that the files are compatible. Try loading them into
<em class="filename">scotty</em> with the <em class="filename">mib load</em>
command, e.g., <em class="filename">mib load toaster.mib</em>. If the file
loads without comment, you are probably OK. Finally, you will want to
edit the <em class="filename">init.tcl</em> file to automatically load the
MIBs. Ideally, you will have a site-specific version of the file for
changes, but you can edit the standard default file. You will want to
add a line that looks something like <tt class="literal">lappend</tt>
<tt class="literal">tnm(mibs) toaster.mib</tt>. You are now ready to start
<em class="filename">tkined</em> and do SNMP-based monitoring.
</p>

The first step is to go to Tools <img alt="Figure 7.2.3.2" src="figs/U2192.gif" /> SNMP-Monitor. This will add
the SNMP-Monitor menu to the menu bar. This menu is shown in <a href="ch07_02.html#nettroubletools-CHP-7-FIG-7">Figure 7-7</a>. To receive traps, select SNMP-Monitor <img alt="Figure 7.2.3.2" src="figs/U2192.gif" />
Trap Sink. A pop-up box will give you the option of listening to or
ignoring traps. Select the Listen button and click on Accept to start
receiving traps. At this point, the station is now configured to
receive traps.
</p>

<a name="nettroubletools-CHP-7-FIG-7" /><div class="figure"><img height="261" alt="Figure 7-7" src="figs/ntt_0707.gif" width="103" /></div><h4 class="objtitle">Figure 7-7. SNMP-Monitor menu</h4>

To test that this is really working, we need to generate some traps
for the system to receive. If you are a <em class="filename">scotty</em>
user, you might use the code presented in the last section. For this
example, a UPS that was being monitored was unplugged. Regardless of
how the trap is generated, <em class="filename">tkined</em> responds in
the same way. The device icon blinks, a message is written on the
map, and a new window, shown in <a href="ch07_02.html#nettroubletools-CHP-7-FIG-8">Figure 7-8</a>, is
displayed with the trap messages generated by the UPS. Note that the
duration of this problem was under 5 seconds. It is likely this event
would have been missed with polling.
</p>

<a name="nettroubletools-CHP-7-FIG-8" /><div class="figure"><img height="188" alt="Figure 7-8" src="figs/ntt_0708.gif" width="424" /></div><h4 class="objtitle">Figure 7-8. SNMP monitor report</h4>

</div>

<a name="nettroubletools-CHP-7-SECT-2.3.3" /><div class="sect3">
<h3 class="sect3">7.2.3.3. Examining MIBs</h3>

<a name="INDEX-1857" /><a name="INDEX-1858" /><a name="INDEX-1859" /><a name="INDEX-1860" /><a name="INDEX-1861" /><a name="INDEX-1862" /><a name="INDEX-1863" /><a name="INDEX-1864" /><a name="INDEX-1865" />Tools <img alt="Figure 7.2.3.3" src="figs/U2192.gif" /> SNMP Tree provides one way
of examining MIBs. Or, if you prefer, you can use Tools <img alt="Figure 7.2.3.3" src="figs/U2192.gif" />
SNMP-Browser. The SNMP Tree command displays a graphical
representation of a subtree of the MIB. This is shown in <a href="ch07_02.html#nettroubletools-CHP-7-FIG-9">Figure 7-9</a>. 
</p>

<a name="nettroubletools-CHP-7-FIG-9" /><div class="figure"><img height="248" alt="Figure 7-9" src="figs/ntt_0709.gif" width="460" /></div><h4 class="objtitle">Figure 7-9. SNMP tree</h4>

<a name="INDEX-1866" /><a name="INDEX-1867" /><a name="INDEX-1868" />Menu items allow you to focus in on a
particular subtree. For example, the MIB-2 menu shows the various
subtrees under the MIB-2 node. The Enterprises menu shows various
enterprise MIBs that have been loaded. You simply select the MIB of
interest from the menu, and it will be displayed in the window. You
can click on an item on the tree and a pop-up window will give you
the option of displaying a description of the item, retrieving its
value, changing its value, or displaying just the subtree of the node
in question. Of course, you will need to select a system before you
can retrieve system-specific information.
</p>

The SNMP-Browser option provides much the same functionality but
displays information in a different format. If you select
SNMP-Browser <img alt="Figure 7.2.3.3" src="figs/U2192.gif" /> MIB Browser, you will be given a text box listing
the nodes below the <em class="filename">internet</em> node
(<em class="filename">.1.3.6.1</em>) of the MIB tree. If you click on any
of these nodes, the text box will be replaced with one of the nodes
under the selected node. In this manner, you can move down the MIB
tree. After the first box, you will also be given the option to move
up the tree or, if appropriate, to the previous or next node in the
subtree. If you reach a leaf, you will be given a description of the
object, as shown in <a href="ch07_02.html#nettroubletools-CHP-7-FIG-10">Figure 7-10</a>. If the object can
be changed, you will be given that choice as well.
</p>

<a name="nettroubletools-CHP-7-FIG-10" /><div class="figure"><img height="220" alt="Figure 7-10" src="figs/ntt_0710.gif" width="424" /></div><h4 class="objtitle">Figure 7-10. MIB Browser</h4>

<a name="INDEX-1869" />You
are also given the option to walk a subtree. This option will attempt
to retrieve all the object values for leaves under the current node.
This can be quite lengthy depending on where you are in the tree.
<a href="ch07_02.html#nettroubletools-CHP-7-FIG-11">Figure 7-11</a> shows the last few entries under
<em class="emphasis">ip</em>. Most of the values have scrolled off the
window.
</p>

<a name="nettroubletools-CHP-7-FIG-11" /><div class="figure"><img height="305" alt="Figure 7-11" src="figs/ntt_0711.gif" width="424" /></div><h4 class="objtitle">Figure 7-11. Walk for IP</h4>

SNMP Tree provides a nice visual display, but it can be a little
easier to move around with the MIB Browser. Take your
choice.<a name="INDEX-1870" /><a name="INDEX-1871" /><a name="INDEX-1872" /><a name="INDEX-1873" /><a name="INDEX-1874" /> 
</p>

</div>

<a name="nettroubletools-CHP-7-SECT-2.3.4" /><div class="sect3">
<h3 class="sect3">7.2.3.4. Monitoring SNMP objects</h3>

<a name="INDEX-1875" /><a name="INDEX-1876" /><a name="INDEX-1877" />In much the same way you monitor
devices, you can monitor SNMP objects. First, you will need to
identify the object you want to monitor. This can be done using the
techniques just described. With MIB Browser you can select monitoring
at a leaf. Alternately, you can select SNMP-Monitor <img alt="Figure 7.2.3.4" src="figs/U2192.gif" /> Monitor
Variable. This is a little easier if you already know the name of the
object you want to monitor. A pop-up box will request the name of the
object to monitor. Type in the name of the object and click on Start.
(Don't forget to select a system first.) A stripchart will be
created on your map displaying the values for the monitored object.
</p>

</div>

<a name="nettroubletools-CHP-7-SECT-2.3.5" /><div class="sect3">
<h3 class="sect3">7.2.3.5. Other commands</h3>

<a name="INDEX-1878" /><a name="INDEX-1879" /><a name="INDEX-1880" /><a name="INDEX-1881" /><a name="INDEX-1882" />Tools <img alt="Figure 7.2.3.5" src="figs/U2192.gif" /> SNMP Trouble installs
the SNMP-Trouble menu. The name is somewhat misleading. Generally,
the SNMP-Trouble menu provides quick ways to collect common, useful
information. First, it can be used to locate SNMP-aware devices on
your network. By selecting multiple devices on the map and then
choosing SNMP-Trouble <img alt="Figure 7.2.3.5" src="figs/U2192.gif" /> SNMP Devices,
<em class="filename">tkined</em> will poll each of the devices. The output
for the test network is shown in <a href="ch07_02.html#nettroubletools-CHP-7-FIG-12">Figure 7-12</a>.
</p>

<a name="nettroubletools-CHP-7-FIG-12" /><div class="figure"><img height="148" alt="Figure 7-12" src="figs/ntt_0712.gif" width="424" /></div><h4 class="objtitle">Figure 7-12. SNMP devices</h4>

Please note that noResponse does not necessarily mean that the device
is down or that it doesn't support SNMP. For example, it may
simply mean that you are not using the correct community string.
</p>

<a name="INDEX-1883" /><a name="INDEX-1884" /><a name="INDEX-1885" /><a name="INDEX-1886" />The SNMP-Trouble menu also provides
menu options that will return some of the more commonly needed pieces
of information such as system information, ARP tables, IP routing
tables, interface information, or TCP connections. A few of these
reports are shown in <a href="ch07_02.html#nettroubletools-CHP-7-FIG-13">Figure 7-13</a>.
</p>

<a name="nettroubletools-CHP-7-FIG-13" /><div class="figure"><img height="305" alt="Figure 7-13" src="figs/ntt_0713.gif" width="424" /></div><h4 class="objtitle">Figure 7-13. SNMP-Trouble reports</h4>

</div>

<a name="nettroubletools-CHP-7-SECT-2.3.6" /><div class="sect3">
<h3 class="sect3">7.2.3.6. Caveats</h3>

<em class="filename">tkined</em><a name="INDEX-1887" /><a name="INDEX-1888" /><a name="INDEX-1889" /> is a fine
program, but it does have a couple of problems. As noted in the last
chapter, it will let you exit without saving changes. Another problem
is that it doesn't recover well from one particular type of
user error. When you are through with a window or display, you should
shrink the window rather than closing it. If you close the window,
<em class="filename">tkined</em> will not automatically reopen it for you.
When you later use a command that needs the closed window, it will
appear that <em class="filename">tkined</em> has simply ignored your
command. Usually, you can simply unload and then reload the menu that
contains the selection used to initially create the window.
Typically, the last item on a menu (for example, see <a href="ch07_02.html#nettroubletools-CHP-7-FIG-4">Figure 7-4</a> and <a href="ch07_02.html#nettroubletools-CHP-7-FIG-7">Figure 7-7</a>) will remove
or delete the menu and unload the subsystem. Then go to the Tools
menu and reload the menu. The appropriate subsystem will be reloaded,
correcting the problem. This can be very frustrating when you first
encounter it, but it is easy to work around or avoid once you know to
look for it.
</p>

<a name="INDEX-1890" /><a name="INDEX-1891" />One
other problem with <em class="filename">tkined</em> is that it uses a
single community string when talking with devices. This can be
changed with Set SNMP Parameters, which is available on several
menus. But if you are using different community strings within your
network or prefer using read-only strings most of the time but
occasionally need to change something, changing the community string
can be a nuisance. Overall, these few problems seem to be minor
inconveniences for an otherwise remarkably useful program. The
program has a number of additional features -- such as sending
reports to the <em class="filename">syslog</em> system -- that were not
discussed here. You should, however, have a pretty good idea of how
to get started using <em class="filename">tkined</em> from this
discussion.<a name="INDEX-1892" /><a name="INDEX-1893" /><a name="INDEX-1894" /><a name="INDEX-1895" /> 
</p>

</div>
</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch07_01.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch07_03.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">7. Device Monitoring with SNMP</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">7.3. Non-SNMP Approaches</td></tr></table><div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="../tcp/index.html" /><area shape="rect" coords="266,0,333,90" href="../nfs/index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="../fire/index-2.html" /></map>

</body>
<!-- Mirrored from nnc3.com/mags/Networking2/tshoot/ch07_02.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:57:10 GMT -->
</html>