<html>
<!-- Mirrored from nnc3.com/mags/Networking2/tshoot/ch06_04.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:57:05 GMT -->
<head><title>Scripts (Network Troubleshooting Tools)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Joseph D. Sloan" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="059600186XL" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Network Troubleshooting Tools" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.html" alt="Network Troubleshooting Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch06_03.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"></a></td><td align="right" valign="top" width="228"><a href="ch06_05.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table><div>



<h2 class="sect1">6.4. Scripts</h2>

<a name="INDEX-1475" /><a name="INDEX-1476" /><a name="INDEX-1477" />Since most networks have evolved over
time, they are frequently odd collections of equipment for which no
single tool may be ideal. And even when the same tool can be used,
differences in equipment may necessitate minor differences in how the
tool is used. Since many of the tasks may need to be done on a
regular basis, it should come as no surprise that scripting languages
are a popular way to automate these tasks. Getting started can be
labor intensive, but if your current approach is already labor
intensive, it can be justified.
</p>

You will want to use a scripting language with extensions that
support the collection of network data. To give an idea of this
approach, <em class="filename">Tcl</em> and its extensions are briefly
described here. Even if you don't really want to write your own
tools, you may want to consider one of the tools based on
<em class="filename">Tcl</em> that are freely available, most notably
<em class="filename">tkined</em>.
</p>

<em class="filename">Tcl</em><a name="INDEX-1478" /><a name="INDEX-1479" /><a name="INDEX-1480" /><a name="INDEX-1481" /><a name="INDEX-1482" /><a name="INDEX-1483" /><a name="INDEX-1484" /> was selected because it is provides a
natural introduction to <em class="filename">tkined</em>. Of course, there
are other scripting languages that you may want to consider. Perl is
an obvious choice. Several packages and extensions are available for
system and network administration. For example, you may want to look
at <em class="filename">spidermap</em>. This is a set of Perl scripts that
do network scans. For SNMP-based management, you'll probably
want to get Simon Leinen's SNMP extensions
<em class="filename">SNMP_Session.pm</em> and <em class="filename">BER.pm</em>.
(Other tools you might also look at include <em class="filename">mon</em>
and <em class="filename">nocol</em>.)
</p>

<a name="nettroubletools-CHP-6-SECT-4.1" /><div class="sect2">
<h3 class="sect2">6.4.1. Tcl/Tk and scotty</h3>

<em class="filename">Tool Command Language</em><a name="INDEX-1485" /><a name="INDEX-1486" /><a name="INDEX-1487" />, or <em class="filename">Tcl</em>
(pronounced "tickle"), is a scripting language that is
well suited for network administration. <em class="filename">Tcl</em> was
developed in the late 1980s by John Ousterhout, then a faculty member
at UC Berkeley. <em class="filename">Tcl</em> was designed to be a
generic, embeddable, and extensible interpreted language. Users
frequently cite studies showing <em class="filename">Tcl</em> requires
one-tenth the development time required by C/C++. Its major weakness
is that it is not well suited for computationally intensive tasks,
but that shouldn't pose much of a problem for network
management. You can also write applets or <em class="filename">tclets</em>
(pronounced "tik-lets") in <em class="filename">Tcl</em>.
</p>

<em class="filename">Tcl</em><a name="INDEX-1488" /> can be invoked interactively using the
shell <em class="filename">tclsh</em> (pronounced "ticklish")
or with scripts. You may need to include a version number as part of
the name. Here is an example:
</p>

<blockquote><pre class="code">bsd2# tclsh8.2
%</pre></blockquote>

<a name="INDEX-1489" />This really is a shell. You can change
directories, print the working directory, copy files, remove files,
and so forth, using the usual Unix commands. You can use the
<em class="filename">exit</em> command to leave the program.
</p>

<a name="INDEX-1490" /><a name="INDEX-1491" /><a name="INDEX-1492" /><a name="INDEX-1493" /><a name="INDEX-1494" />One
thing that makes <em class="filename">Tcl</em> interesting is the number
and variety of extensions that are available. <em class="filename">Tk</em>
is a set of extensions that provides the ability to create GUIs in an
X Window environment. These extensions make it easy to develop
graphical interfaces for tools. <em class="filename">Tk</em> can be
invoked interactively using the windowing shell
<em class="filename">wish</em>. Both <em class="filename">Tcl</em> and
<em class="filename">Tk</em> are implemented as C library packages that
can be included in programs if you prefer.
</p>

<em class="filename">scotty</em><a name="INDEX-1495" /><a name="INDEX-1496" /><a name="INDEX-1497" /><a name="INDEX-1498" /><a name="INDEX-1499" /><a name="INDEX-1500" />,
primarily the work of J&uuml;rgen Sch&ouml;nw&auml;lder, adds network
management extensions to <em class="filename">Tcl/Tk</em>. The
<em class="filename">tnm</em> portion of <em class="filename">scotty</em> adds
network administration support. The <em class="filename">tkined</em>
portion of <em class="filename">scotty</em>, described in the next
section, is a graphical network administration program. What
<em class="filename">tnm</em> adds is a number of network management
commands. These include support for a number of protocols including
ICMP, UDP, DNS, HTTP, Sun's RPC, NTP, and, most significantly,
SNMP. In addition, there are several sets of commands that simplify
writing network applications. The <em class="filename">netdb</em> command
gives access to local network databases such as
<em class="filename">/etc/hosts</em>, the <em class="filename">syslog</em>
command supports sending messages to the system logging facilities,
and the <em class="filename">job</em> command simplifies scheduling tasks.
A few examples should give an idea of how these commands could be
used.
</p>

You can invoke the <em class="filename">scotty</em> interpreter directly
as shown here. In this example, the <em class="filename">netdb</em>
command is used to list the <em class="filename">/etc/host</em> table on a
computer:
</p>

<blockquote><pre class="code">bsd4# scotty
% netdb hosts
{localhost.lander.edu 1.0.0.127} {bsd4.lander.edu 239.63.153.205} {bsd4.lander.e
du. 239.63.153.205} {bsd1.lander.edu 231.60.153.205} {sol1.lander.edu 233.60.153
.205} {lnx1.lander.edu 234.60.153.205}
% exit</pre></blockquote>

The results are returned with each entry reduced to the canonical
name and IP address in brackets. Here is the host table for the same
system:
</p>

<blockquote><pre class="code">bsd4# cat /etc/hosts
127.0.0.1               localhost.lander.edu localhost
205.153.63.239          bsd4.lander.edu bsd4
205.153.63.239          bsd4.lander.edu.
205.153.60.231          bsd1.lander.edu bsd1
205.153.60.233          sol1.lander.edu sol1
205.153.60.234          lnx1.lander.edu lnx1</pre></blockquote>

Note that there is not a separate entry for the alias bsd4.</p>

Here are a few examples of other commands. In the first example, the
name of the protocol with a value of 1 is looked up in
<em class="filename">/etc/protocols</em> using the
<em class="filename">netdb</em> command:
</p>

<blockquote><pre class="code">% netdb protocols name 1
icmp</pre></blockquote>

In the second example, a reverse DNS lookup is done for the host at
<em class="emphasis">205.153.63.30:</em> 
</p>

<blockquote><pre class="code">% dns name 205.153.63.30
sloan.lander.edu</pre></blockquote>

Finally, an ICMP ECHO_REQUEST is sent to
<em class="filename">www.cisco.com</em>:
</p>

<blockquote><pre class="code">% icmp echo www.cisco.com
{www.cisco.com 321}</pre></blockquote>

The response took 321 ms. Other commands, such as
<em class="filename">snmp</em>, require multiple steps to first establish
a session and then access information. (Examples are given in <a href="ch07_01.html">Chapter 7, "Device Monitoring with SNMP"</a>.) If you are interested in using these tools
in this manner, you will first want to learn
<em class="filename">Tcl</em>. You can then consult the manpages for these
extensions. A number of books and articles describe
<em class="filename">Tcl</em>, some of them listed in <a href="appb_01.html">Appendix B, "Resources and References"</a>. The source is freely available for all these
tools.<a name="INDEX-1501" /><a name="INDEX-1502" /><a name="INDEX-1503" /> 
</p>

</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch06_03.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch06_05.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">6.3. Device Identification</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">6.5. Mapping or Diagramming</td></tr></table><div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="../tcp/index.html" /><area shape="rect" coords="266,0,333,90" href="../nfs/index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="../fire/index-2.html" /></map>

</body>
<!-- Mirrored from nnc3.com/mags/Networking2/tshoot/ch06_04.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:57:05 GMT -->
</html>