<html>
<!-- Mirrored from nnc3.com/mags/Networking2/tshoot/ch05_02.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:57:03 GMT -->
<head><title>Access to Traffic (Network Troubleshooting Tools)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Joseph D. Sloan" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="059600186XL" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Network Troubleshooting Tools" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.html" alt="Network Troubleshooting Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_01.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"></a></td><td align="right" valign="top" width="228"><a href="ch05_03.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table><div>



<h2 class="sect1">5.2. Access to Traffic</h2>

<a name="INDEX-913" /><a name="INDEX-914" /><a name="INDEX-915" />You can capture traffic only on a link
that you have access to. If you can't get traffic to an
interface, you can't capture it with that interface. While this
might seem obvious, it may be surprisingly difficult to get access to
some links on your network. On some networks, this won't be a
problem. For example, 10Base2 and 10Base5 networks have shared media,
at least between bridges and switches. Computers connected to a hub
are effectively on a shared medium, and the traffic is exposed. But
on other systems, watch out!
</p>

<a name="INDEX-916" /><a name="INDEX-917" /><a name="INDEX-918" />Clearly, if you are trying
to capture traffic from a host on one network, it will never see the
local traffic on a different network. But the problem doesn't
stop there. Some networking devices, such as bridges and switches,
are designed to contain traffic so that it is seen only by parts of
the local network. On a switched network, only a limited amount of
traffic will normally be seen at any interface.<a href="#FOOTNOTE-23">[23]</a> Traffic will be limited to traffic to or from the host or
to multicast and broadcast traffic. If this includes the traffic you
are interested in, so much the better. But if you are looking at
general network traffic, you will use other approaches.
</p><blockquote class="footnote"> <a name="FOOTNOTE-23" />[23]This
assumes the switches have been running long enough to have a
reasonably complete address table. Most switches forward traffic onto
all ports if the destination address is unknown. So when they are
first turned on, switches look remarkably like hubs.</p>
</blockquote>

<a name="INDEX-919" /><a name="INDEX-920" /><a name="INDEX-921" /><a name="INDEX-922" />Not being able to capture data on an
interface has both positive and negative ramifications. The primary
benefit is that it is possible to control access to traffic with an
appropriate network design. By segmenting your network, you can limit
access to data, improving security and enhancing privacy.
</p>

<a name="INDEX-923" />Lack of
access to data can become a serious problem, however, when you must
capture that traffic. There are several basic approaches to overcome
this problem. First, you can try to physically go to the traffic by
using a portable computer to collect the data. This has the obvious
disadvantage of requiring that you travel to the site. This may not
be desirable or possible. For example, if you are addressing a
security problem, it may not be feasible to monitor at the source of
the suspected attack without revealing what you are doing. If you
need to collect data at multiple points simultaneously, being at
different places at the same time is clearly not possible by
yourself.
</p>

<a name="INDEX-924" /><a name="INDEX-925" /><a name="INDEX-926" /><a name="INDEX-927" /><a name="INDEX-928" /><a name="INDEX-929" /><a name="INDEX-930" />Another approach is to have multiple
probe computers located throughout your network. For example, if you
have computers on your network that you can reach using
<em class="filename">telnet</em>, <em class="filename">ssh</em>, X Window
software, or <em class="filename">vnc</em>, you can install the
appropriate software on each. Some software has been designed with
remote probing in mind. For example, Microsoft's
<em class="filename">netmon</em> supports the use of a Windows platform as
a probe for collecting traffic. Data from the agents on these
machines can be collected by a central management station. Some RMON
probes will also do this. (<em class="filename">vnc</em> and
<em class="filename">ssh</em> are described in <a href="ch11_01.html">Chapter 11, "Miscellaneous Tools"</a>. <em class="filename">netmon</em> is briefly
described later in this chapter, and RMON is described in <a href="ch08_01.html">Chapter 8, "Performance Measurement Tools"</a>.) 
</p>

<a name="INDEX-931" />When dealing with switches, there are two
common approaches you can take. (Several other techniques that I
can't recommend are described later in this chapter.) One
approach is to augment the switch with a spare hub. Attach the hub to
the switch and move from the switch to the hub only the connections
that need to be examined. You could try replacing the switch with a
hub, but this can be disruptive and, since a hub inherently has a
lower capacity, you may have more traffic than the hub can handle.
Augmenting the switch with a hub is a better solution.
</p>

<a name="INDEX-932" /><a name="INDEX-933" /><a name="INDEX-934" /><a name="INDEX-935" /><a name="INDEX-936" /><a name="INDEX-937" />Buying a small portable hub to use in
establishing a probe point into your network is certainly worth the
expense. Because you will be connecting a hub to a switch, you will
be using both crossover and patch cables. Be sure you work out the
details of the cabling well before you have to try this approach on a
problematic network. Alternately, there are several commercially
available devices designed specifically for patching into networks.
These devices include monitoring switches, fiber splitters, and
devices designed to patch into 100-Mbps links or links with special
protocols. If your hardware dictates such a need, these devices are
worth looking into.
<a name="INDEX-938" /><a name="INDEX-939" /><a name="INDEX-940" /><a name="INDEX-941" />
</p>


<a name="ch05-5-fm2xml" /><blockquote><b>TIP: </b>
Here is a riddle for
you -- when is a hub not a hub? In recent years, the distinction
between hubs and switches has become blurred. For example, a 10/100
autoswitching hub may be implemented, internally, as a 10-Mbps hub
and a 100-Mbps hub connected by a dual-port switch. With such a
device, you may not be able to see all the traffic. In the next few
years, true hubs may disappear from the market. You may want to keep
this in mind when looking for a hub for traffic monitoring.
</p>
</blockquote>

<a name="INDEX-942" /><a name="INDEX-943" /><a name="INDEX-944" /><a name="INDEX-945" /><a name="INDEX-946" /><a name="INDEX-947" /><a name="INDEX-948" /><a name="INDEX-949" /><a name="INDEX-950" />A second possibility with some switches
is to duplicate the traffic from one port onto another port. If your
switch supports this, it can be reconfigured dynamically to copy
traffic to a monitoring port. Other ports continue functioning
normally so the monitoring appears transparent to the rest of the
switch's operation. This technique is known by a variety of
names. With Bay Network products, this is known as
<em class="emphasis">conversation steering</em>. Cisco refers to this as
<em class="filename">monitoring</em> or using a
<em class="filename">spanning</em> port. Other names include
<em class="filename">port aliasing</em> and <em class="filename">port
mirroring.</em>
</p>

Unfortunately, many switches either don't support this behavior
or place limitations on what can be done. For instance, some switches
will allow traffic to be redirected only to a high-speed port.
Implementation details determining exactly what can be examined vary
greatly. Another problem is that some types of errors will be
filtered by the switch, concealing possible problems. For example, if
there are any framing errors, these will typically be discarded
rather than forwarded. Normally, discarding these packets is exactly
what you want the switch to do, just not in this context.
You'll have to consult the documentation with your switch to
see what is possible.
</p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch05_01.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch05_03.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">5. Packet Capture</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">5.3. Capturing Data</td></tr></table><div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="../tcp/index.html" /><area shape="rect" coords="266,0,333,90" href="../nfs/index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="../fire/index-2.html" /></map>

</body>
<!-- Mirrored from nnc3.com/mags/Networking2/tshoot/ch05_02.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:57:03 GMT -->
</html>
