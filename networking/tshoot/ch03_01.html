<html>
<!-- Mirrored from nnc3.com/mags/Networking2/tshoot/ch03_01.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:54:48 GMT -->
<head><title>Connectivity Testing (Network Troubleshooting Tools)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Joseph D. Sloan" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="059600186XL" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Network Troubleshooting Tools" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.html" alt="Network Troubleshooting Tools" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch02_03.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"></a></td><td align="right" valign="top" width="228"><a href="ch03_02.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table><div>




<h1 class="chapter">Chapter 3. Connectivity Testing</h1>
<div class="htmltoc"><h4 class="tochead">Contents:</h4>
      <a href="#nettroubletools-CHP-3-SECT-1">Cabling</a><br />
<a href="ch03_02.html">Testing Adapters</a><br />
<a href="ch03_03.html">Software Testing with ping</a><br />
<a href="ch03_04.html">Microsoft Windows</a><br /></p><p></div>

<a name="INDEX-415" /></a><a name="INDEX-416" /></a><a name="INDEX-417" /></a>This chapter describes simple tests for
individual network links and for end-to-end connectivity between
networked devices. The tools described in this chapter are used to
show that there is a functioning connection between two devices.
These tools can also be used for more sophisticated testing,
including the discovery of path characteristics and the general
performance measurements. These additional uses are described in
<a href="ch04_01.html">Chapter 4, "Path Characteristics"</a>. Tools used for testing protocol issues
related to connectivity are described in <a href="ch09_01.html">Chapter 9, "Testing Connectivity Protocols"</a>. You may want to turn next to these chapters
if you need additional information in either of these areas.
</p><p>

This chapter begins with a quick review of cabling practices. If your
cabling isn't adequate, that's the first thing you need
to address. Next, there is a lengthy discussion of using
<em class="filename">ping</em> to test connectivity along with issues that
might arise when using <em class="filename">ping</em>, such as security
problems. Next, I describe alternatives to <em class="filename">ping</em>.
Finally, I discuss alternatives that run on Microsoft Windows
platforms.
</p><p>

<div class="sect1"><a name="nettroubletools-CHP-3-SECT-1" /></a>
<h2 class="sect1">3.1. Cabling</h2>

<a name="INDEX-418" /></a><a name="INDEX-419" /></a><a name="INDEX-420" /></a>For most
managers, cabling is the most boring part of a network. Even
administrators who are normally control freaks will often jump at the
opportunity to delegate or cede responsibility for cabling to
somebody else. It has none of the excitement of new equipment or new
software. It is often hidden away in wiring closets, walls, and
ceilings. When it is visible, it is usually in the way or an eyesore.
The only time most managers think about cabling is when it is causing
problems. Yet, unless you are one of a very small minority running a
wireless network, it is the core of your network. Without adequate
cabling, you don't have a network.
</p><p>

Although this is a book about software tools, not cabling, the topics
are not unrelated. If you have a cabling problem, you may need to
turn to the tools described later in this chapter to pinpoint the
problem. Conversely, to properly use these tools, you can't
ignore cabling, as it may be the real source of your problems.
</p><p>

<a name="INDEX-421" /></a>If a cable is damaged, it won't
be difficult to recognize the problem. But intermittent cabling
problems can be a nightmare to solve. The problem may be difficult to
recognize as a cabling problem. It may come and go, working correctly
most of the time. The problem may arise in cables that have been in
use for years. For example, I once watched a technician try to deal
with a small classroom LAN that had been in use for more than five
years and would fail only when the network was heavily loaded, i.e.,
if and only if there was a scheduled class in the room. The problem
took weeks before what proved to be a cabling problem was resolved.
In the meantime, several classes were canceled.
</p><p>

A full discussion of cabling practices, standards, and
troubleshooting has been the topic of several books, so this coverage
will be very selective. I am assuming that you are familiar with the
basics. If not, several references in <a href="appb_01.html">Appendix B, "Resources and References"</a>
provide a general but thorough introduction to cabling.
</p><p>

With cabling, as with most things, it is usually preferable to
prevent problems than to have to subsequently deal with them. The
best way to avoid cabling problems is to take a proactive approach.
While some of the following suggestions may seem excessive, the costs
are minimal when compared to what can be involved in solving a
problem.
</p><p>

<a name="nettroubletools-CHP-3-SECT-1.1" /></a><div class="sect2">
<h3 class="sect2">3.1.1. Installing New Cabling</h3>

<a name="INDEX-422" /></a><a name="INDEX-423" /></a>If
you are faced with a new installation, take the time to be sure it is
done correctly from the start. While it is fairly straightforward to
wire a few machines together in a home office, cabling should not
generally be viewed as a do-it-yourself job. Large cabling projects
should be left to trained professionals whenever possible.
</p><p>

<a name="INDEX-424" /></a><a name="INDEX-425" /></a><a name="INDEX-426" /></a><a name="INDEX-427" /></a>Cabling is usually a large investment.
Correcting cabling problems can be very costly in lost time both for
diagnosing the problem and for correcting the problem. Also, cabling
must conform to all applicable building and fire codes. For example,
using nonplenum cabling in plenum spaces can, in the event of a fire,
greatly endanger the safety of you and your fellow workers.
(<em class="emphasis">Plenum cabling</em> is cabling designed to be used
in <em class="emphasis">plenum spaces</em>, spaces used to recirculate air
in a building. It uses materials that have low flame-spread and low
smoke-producing properties.)
</p><p>

<a name="INDEX-428" /></a><a name="INDEX-429" /></a><a name="INDEX-430" /></a><a name="INDEX-431" /></a><a name="INDEX-432" /></a><a name="INDEX-433" /></a>Cabling
can also be very sensitive to its physical environment. Cable that
runs too near fluorescent lights or large motors, e.g., elevator
motors, can be problematic. Proximity to power lines can also cause
problems. The network cable acts like an antenna, picking up other
nearby electrical activity and introducing unwanted signals or noise
onto the network. This can be highly intermittent and very difficult
to identify. Concerns such as these should be enough to discourage
you from doing the job yourself unless you are very familiar with the
task.
</p><p>

Unfortunately, sometimes budget or organizational policies are such
that you will have no choice but to do the job yourself or use
internal personnel. If you must do the job yourself, take the time to
learn the necessary skills before you begin. Get formal training if
at all possible. Invest in the appropriate tools and test equipment
to do the job correctly. And make sure you aren't violating any
building or fire codes.
</p><p>

<a name="INDEX-434" /></a><a name="INDEX-435" /></a><a name="INDEX-436" /></a><a name="INDEX-437" /></a>If the wiring is handled by others, you
will need to evaluate whether those charged with the task really have
the skill to complete the job. Most electricians and telephone
technicians are not familiar with data cabling practices. Worse
still, many don't realize this. So, if asked, they will
reassure you they can do the job. If possible, use an installer who
has been certified in data cabling. Once you have identified a likely
candidate, follow up on her references. Ask for the names of some
past customers and call those customers. If possible, ask to see some
of her work.
</p><p>

When planning a project, you should install extra cable whenever
feasible. It is much cheaper to pull extra cable as you go than to go
back and install new cable or replace a faulty cable. You should also
consider technologies that will support higher speeds than you are
currently using. For example, if you are using 10-Mbps Ethernet to
the desktop, you should install cable that will support 100 Mbps. In
the past it has been a common recommendation to install fiber-optic
cables to the desk as well, even if you aren't using fiber
technologies at the desk at this time. Recent developments with
copper cables have made this more of a judgment call. Certainly, you
will want to pull spare fiber to any point your backbone may
eventually include.
</p><p>

If at all feasible, cabling should be certified. This means that each
cable is tested to ensure that it meets appropriate performance
standards for the intended application. This can be particularly
important for spare cabling. When it is time to use that cable, you
don't want any nasty surprises.
</p><p>

<a name="INDEX-438" /></a>Adequate
documentation is essential. Maintenance will be much simpler if you
follow cabling standards and use one of the more common structured
cable schemes. More information can be found in the sources given in
<a href="appb_01.html">Appendix B, "Resources and References"</a>.
</p><p>

</div>
<a name="nettroubletools-CHP-3-SECT-1.2" /></a><div class="sect2">
<h3 class="sect2">3.1.2. Maintaining Existing Cabling</h3>

<a name="INDEX-439" /></a><a name="INDEX-440" /></a>For existing cabling, you
won't have as much latitude as with a new installation. You
certainly won't want to go back and replace working cable just
because it does not follow some set of standards. But there are
several things you can do to make your life simpler when you
eventually encounter problems.
</p><p>

<a name="INDEX-441" /></a>The first step in cable management is
knowing which cable is which and where each cable goes. Perhaps the
most important tool for the management and troubleshooting of cabling
is a good label maker. Even if you weren't around when the
cable was originally installed, you should be able, over time, to
piece together this information. You will also want to collect basic
information about each cable such as cable types and lengths.
</p><p>

<a name="INDEX-442" /></a><a name="INDEX-443" /></a>You will want to know which of your
cables don't meet standards. If you have one of the more
sophisticated cable testers, you can self-certify your cabling plant.
You probably won't want to do either of these tasks all at
once, but you may be able to do a little at a time. And you will
definitely want to do it for any changes or additions you make.
</p><p>

<a name="nettroubletools-CHP-3-SIDEBAR-1" /></a><blockquote><table border="1" cellpadding="6"><tr><td>
<h4 class="objtitle">Labeling Cables</h4>

<a name="INDEX-444" /></a><a name="INDEX-445" /></a>This
should be a self-explanatory topic. Unfortunately for some, this is
not the case. I have very vivid memories of working with a wiring
technician with years of experience. The individual had worked for
major organizations and should have been quite familiar with labeling
practices.
</p><p>

We were installing a student laboratory. The laboratory has a switch
mounted in a box on the wall. Cabling went from the box into the wall
and then through cable raceways down the length of the room. Along
the raceway, it branched into raceways built into computer tables
going to the individual computers. The problem should be clear. Once
the cable disappears into the wall and raceways, it is impossible to
match the end at the switch with the corresponding end that emerges
at the computer.
</p><p>

While going over what needed to be done, I mentioned, needlessly I
thought, that the cable should be clearly labeled. This was just one
part of my usual lengthy litany. He thought for a moment and then
said, "I guess I can do that." Then a puzzled expression
came over his face and he added in dead earnest, "Which end do
you want labeled?" I'd like to think he was just putting
me on, but I don't think so.
</p><p>

<a name="INDEX-446" /></a>You
should use some method of attaching labels that is reasonably
permanent. It can be very discouraging to find several labels lying
on the floor beneath your equipment rack. Also, you should use a
meaningful scheme for identifying your cables. <em class="emphasis">TIA/EIA-606
Administration Standard for Telecommunications Infrastructure of
Commercial Buildings</em> provides one possibility. (See <a href="appb_01.html">Appendix B, "Resources and References"</a> for more information of TIA/EIA standards.)
And, at the risk of stating the obvious, unless you can see the
entire cable at the same time, it should be labeled at both ends.
</p><p>
</td></tr></table><p></blockquote>

</div>
<a name="nettroubletools-CHP-3-SECT-1.3" /></a><div class="sect2">
<h3 class="sect2">3.1.3. Testing Cabling</h3>

<a name="INDEX-447" /></a><a name="INDEX-448" /></a>Cable
testing can be a simple, quick check for continuity or a complex set
of measurements that carefully characterizes a cable's
electrical properties. If you are in a hurry to get up and running,
you may be limited to simple connectivity tests, but the more
information you collect, the better prepared you will be to deal with
future problems. If you must be up quickly, make definite plans to
return and finish the job, and stick to those plans.
</p><p>

<a name="nettroubletools-CHP-3-SECT-1.3.1" /></a><div class="sect3">
<h3 class="sect3">3.1.3.1. Link lights</h3>

<a name="INDEX-449" /></a><a name="INDEX-450" /></a><a name="INDEX-451" /></a><a name="INDEX-452" /></a>Perhaps the simplest test is to rely
on the network interface's <em class="emphasis">link lights</em>.
Almost all networking equipment now has status lights that show, when
lit, that you have functioning connections. If these do not light
when you make a connection, you definitely have a problem somewhere.
Keep in mind, however, a lit link light does not necessarily indicate
the absence of a problem.
</p><p>

<a name="INDEX-453" /></a><a name="INDEX-454" /></a><a name="INDEX-455" /></a>Many devices have additional indicators
that give you more information. It is not uncommon to have a
<em class="emphasis">transmit light</em> that blinks each time a packet is
sent, a <em class="emphasis">receive light</em> that blinks each time a
packet is received, and a <em class="emphasis">collision light</em> that
blinks each time the device detects a collision. To get an idea of
what is normal, look at the lights on other computers on the same
network.
</p><p>

<a name="INDEX-456" /></a><a name="INDEX-457" /></a>Typically, you would expect to see the
receive light blinking intermittently as soon as you connect the
device to an active network. Generally, anomalous behavior with the
receive light indicates a problem somewhere else on your network. If
it doesn't ever light, you may have a problem with your
connection to the network. For example, you could be plugged into a
hub that is not connected to the network. If the light is on all or
most of the time, you probably have an overloaded network.
</p><p>

The transmit light should come on whenever you access the network but
should remain off otherwise. You may be surprised, however, how often
a computer will access the network. It will almost certainly blink
several times when your computer is booted. If in doubt, try some
basic networking tasks while watching for activity. If it does not
light when you try to access the network, you have problems on that
computer. If it stays lit, you not only have a problem but also are
probably flooding the network with packets, thereby causing problems
for others on the network as well. You may want to isolate this
machine until the problem is resolved.
</p><p>

In the ideal network, from the user's perspective at least, the
collision light should remain relatively inactive. However, excessive
collision light flashing or even one that remains on most of the time
may not indicate a problem. A collision is a very brief event. If the
light only remained on for the length of the event, the flash would
be too brief to be seen. Consequently, these lights are designed to
remain on much longer than the actual event. A collision light that
remains on doesn't necessarily mean that your network is
saturated with collisions. On the other hand, this is something
you'll want to investigate further.
</p><p>

<a name="INDEX-458" /></a>For any
of the cases in which you have an indication of a network overload,
unless your network is completely saturated, you should be able to
get some packets through. And you should see similar problems on
every computer on that network segment. If your network is completely
saturated, then you may have a malfunctioning device that is
continuously transmitting. Usually, this can be easily located by
turning devices off one at a time until the problem suddenly
disappears.
</p><p>

If you have an indication of a network overload, you should look at
the overall behavior and structure of your network. A good place to
start is with <em class="filename">netstat</em> as discussed in <a href="ch04_01.html">Chapter 4, "Path Characteristics"</a>. For a more thorough discussion of network
performance monitoring, turn to <a href="ch08_01.html">Chapter 8, "Performance Measurement Tools"</a>.
</p><p>

<a name="ch03-8-fm2xml" /></a><blockquote><b>WARNING: </b>
One last word of warning -- you may see anomalous behavior with
any of these lights if your interface is misconfigured or has the
wrong driver installed.
</p><p>
</blockquote>

</div>

<a name="nettroubletools-CHP-3-SECT-1.3.2" /></a><div class="sect3">
<h3 class="sect3">3.1.3.2. Cable testers</h3>

<a name="INDEX-459" /></a><a name="INDEX-460" /></a>A wide variety of cable testers are
available. Typically, you get what you pay for. Some check little
more than continuity and the cable's pin-out (that the
individual wires are connected to the appropriate pins). Others are
extremely sophisticated and fully characterize the electrical
properties of your cabling. These can easily cost thousands of
dollars. Better testers typically consist of a pair of
units -- the actual tester and a termination device that creates a
signal loop. These devices commonly check the following:
</p><p>

<dl>
<dt><i>Wire-map (or pin-outs)</i></dt>
<dd>
<a name="INDEX-461" /></a><a name="INDEX-462" /></a><a name="INDEX-463" /></a><a name="INDEX-464" /></a><a name="INDEX-465" /></a>This checks to see if the corresponding pins on each end of a cable are correctly paired. Failure indicates an improperly terminated cable, such as crossed wires or faulty connections.
</p><p>
</dd>


<dt><i>Near End Cross-Talk (NEXT)</i></dt>
<dd>
<a name="INDEX-466" /></a><a name="INDEX-467" /></a>This is a measure of how much a signal on one wire interferes with
other signals on adjacent wires. High values can indicate improper
termination or the wrong type of cable or connectors.
</p><p>
</dd>


<dt><i>Attenuation</i></dt>
<dd>
<a name="INDEX-468" /></a>This measures how much of the original signal is lost over the length
of the cable. As this is frequency dependent, this should be done at
a number of different frequencies over the range used. It will
determine the maximum data rates the cable can support. Problem
causes include the wrong cable type, faulty connectors, and excessive
lengths.
</p><p>
</dd>


<dt><i>Impedance</i></dt>
<dd>
<a name="INDEX-469" /></a>This is the opposition to changes in current and arises from the
resistance and the inductance of the cable. Impedance measurements
may be useful for finding an impedance mismatch that may cause
reflected signals at the point where cables are joined. It can also
be useful in ascertaining whether or not you are using the right type
of cable.
</p><p>
</dd>


<dt><i>Attenuation to Cross-talk Ratio (ARC)</i></dt>
<dd>
<a name="INDEX-470" /></a><a name="INDEX-471" /></a>This is a comparison of signal strength to noise. Values that are too low indicate excessive cable length or poor connections.
</p><p>
</dd>


<dt><i>Capacitance</i></dt>
<dd>
<a name="INDEX-472" /></a>This is the electrical field energy that can be stored in the cable.
Anomalous values can indicate problems with the cable such as shorts
or broken wires.
</p><p>
</dd>


<dt><i>Length</i></dt>
<dd>
<a name="INDEX-473" /></a><a name="INDEX-474" /></a>By timing the return of a signal injected onto the cable, the length of a cable can be discovered. This can reveal how much cable is hidden in the walls, allowing you to verify that cable lengths are not exceeding the maximum allowed by the applicable standards.
</p><p>
</dd>

</dl>

The documentation with your cable tester will provide more details in
understanding and using these tests.
</p><p>

The better cable testers may be preprogrammed with appropriate values
for different types of cable, allowing you to quickly identify
parameters that are out of specification. A good tester should also
allow you to print or upload measurements into a database. This
allows you to easily compare results over time to identify changes.
</p><p>

</div>

<a name="nettroubletools-CHP-3-SECT-1.3.3" /></a><div class="sect3">
<h3 class="sect3">3.1.3.3. Other cable tests</h3>

In general, moving cables around is a poor way to test them. You may
jiggle a nearby poor connection, changing the state of the problem.
But if you can't afford a cable tester, you may have little
choice.
</p><p>

<a name="INDEX-475" /></a><a name="INDEX-476" /></a>If
the cable in question is not installed in the wall, you can try to
test it by swapping it with a cable known to be good. However, it is
usually better to replace a working cable with a questionable cable
and see if things continue to work rather than the other way around.
This method is more robust to multiple failures. You will immediately
know the status of the questionable cable. If you replace a
questionable cable with a good cable and you still have problems, you
clearly have a problem other than the cable. But you don't know
if it is just a different problem or an additional problem. Of
course, this approach ties up more systems.
</p><p>

<a name="INDEX-477" /></a><a name="INDEX-478" /></a>Remember,
electrical connectivity does not equate to network connectivity.
I've seen technicians plug different subnets into the same hub
and then wonder why the computers can't communicate.<a href="#FOOTNOTE-10">[10]</a><a name="INDEX-479" /></a><a name="INDEX-480" /></a><a name="INDEX-481" /></a><a name="INDEX-482" /></a> 
</p><p><blockquote class="footnote">
<a name="FOOTNOTE-10" /></a>[10]There are also circumstances in which this will work, but
mixing subnets this way is an extremely bad idea.</p><p>
</blockquote>

</div>
</div>
</div>








<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch02_03.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch03_02.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">2.3. Microsoft Windows</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">3.2. Testing Adapters</td></tr></table><div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="../tcp/index.html" /><area shape="rect" coords="266,0,333,90" href="../nfs/index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="../fire/index-2.html" /></map>

</div></div></div></div></body>
<!-- Mirrored from nnc3.com/mags/Networking2/tshoot/ch03_01.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:54:49 GMT -->
</html>