<html>
<!-- Mirrored from nnc3.com/mags/Networking2/fire/ch10_09.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:51:34 GMT -->
<head><title>Securing the Machine (Building Internet Firewalls, 2nd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Elizabeth D. Zwicky, Simon Cooper and D. Brent Chapman" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1565928717L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Building Internet Firewalls, 2nd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index-2.html" alt="Building Internet Firewalls" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch10_08.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"></td><td align="right" valign="top" width="228"><a href="ch10_10.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table><div>



<h2 class="sect1">10.9. Securing the Machine</h2>





<a name="INDEX-788" /><a name="INDEX-789" />To start with,
build a machine with a standard operating system, secured as much as
possible. Start with a clean operating system and follow the
procedures we describe in this section:</p><p>





<ol><li>Start with a minimal clean operating system installation.</p><p></li><li>Fix all known system bugs.</p></li><li><p>Use a checklist.</p></li><li><p>Safeguard the system logs.</p></li></ol>
<a name="ch10-2904" /><div class="sect2">
<h3 class="sect2">10.9.1. Start with a Minimal Clean Operating System Installation</h3>





<a name="INDEX-790" /><a name="INDEX-791" />Start with a clean operating system
installation, straight from vendor distribution media. If you do
this, you will know exactly what you're working with. You
won't need to retrofit something that may already have
problems. Using such a system will also make later work easier. Most
vendor security patches you later obtain, as well as the vendor
configuration instructions and other documentation, assume that
you're starting from an unmodified installation.</p><p>





While you're installing the operating system, install as little
as you can get away with. It's much easier to avoid installing
items than it is to delete them completely later on. For that matter,
once your operating system is minimally functional, it's not
hard to add components if you discover you need them. Don't
install any optional subsystems unless you know you will need them.</p><p>





If you are reusing a machine that has already had an operating system
installed on it, be sure to erase all data from the disks before
doing the reinstall. Otherwise, you cannot guarantee that all traces
of the old system are gone.</p><p>
</div>
















<a name="ch10-2914" /><div class="sect2">
<h3 class="sect2">10.9.2. Fix All Known System Bugs</h3>





<a name="INDEX-792" /><a name="INDEX-793" /><a name="INDEX-794" /><a name="INDEX-795" />
<a name="INDEX-796" />Get a list of known security
patches and advisories for your operating system; work through them
to determine which are relevant for your own particular system, and
correct all of the problems described in the patches and advisories.
You can get this information from your vendor sales or technical
support contacts, or from the user groups, newsgroups, or electronic
mailing lists devoted to your particular platform.</p><p>





In addition, be sure to get from the Computer Emergency Response Team
Coordination Center (CERT-CC) any advisories relevant to your
platform, and work through them. (For information on how to contact
CERT-CC and retrieve its information, see the list of resources in
<a href="appa_01.html">Appendix A, "Resources"</a>.)</p><p>





any operating systems have both recommended and optional patches or
have periodic patch sets (called <em class="emphasis">service packs</em>
for Windows NT) with individual patches issued in between (Microsoft
calls these <em class="emphasis">hot fixes</em>). You should install the
current recommended patch set, plus all other security-related
patches that are relevant to your installation.</p><p>
</div>
















<a name="ch10-2940" /><div class="sect2">
<h3 class="sect2">10.9.3. Use a Checklist</h3>





To be sure you don't overlook anything in securing your bastion
host, use a security checklist. Several excellent checklists are
around. Be sure to use one that corresponds to your own platform and
operating system version.</p><p>
</div>
















<a name="ch10-2947" /><div class="sect2">
<h3 class="sect2">10.9.4. Safeguard the System Logs</h3>





<a name="INDEX-797" /><a name="INDEX-798" />As
a security-critical host, the bastion host requires considerable
logging. The next step in building the bastion host is to make sure
that you have a way of safeguarding the system logs for the bastion
host. The system logs on the bastion host are important for two
reasons:</p><p>





<ul><li>They're one of the best methods of determining if your bastion
host is performing as it should be. If everything the bastion host
does is logged (and it should be), you should be able to examine the
logs to determine exactly what it's doing and decide if
that's what it's supposed to be doing. <a href="ch26_01.html">Chapter 26, "Maintaining Firewalls"</a>, describes the use of system logs in
maintaining your firewall.</p><p></li><li>When (not if!) someday someone does successfully break in to the
bastion host, the system logs are one of the primary mechanisms that
determine exactly what happened. By examining the logs and figuring
out what went wrong, you should be able to keep such a break-in from
happening again.</p><p></li></ul>
Where should you put the system logs? On the one hand, you want the
system logs to be somewhere convenient; you want them to be where
they can be easily examined to determine what the bastion host is
doing. On the other hand, you want the system logs to be somewhere
safe; this will keep them from any possible tampering in case you
need to use them to reconstruct an incident.</p><p>





The solution to these seemingly contradictory requirements is to keep
two copies of the system logs  --  one for convenience, the other
for catastrophes. The details of the logging services are
operating-system dependent and are discussed in the chapters on
individual operating systems.</p><p>





<a name="ch10-2963" /><div class="sect3">
<h3 class="sect3">10.9.4.1. System logs for convenience</h3>





The first copy of the system logs is the one you'll use on a
regular basis to monitor the ongoing activity of the machine. These
are the logs against which you run your daily and weekly automated
analysis reports. You can keep these logs either on the bastion host
itself or on some internal host.</p><p>





The advantage of keeping them on the bastion host is simplicity: you
don't have to set up logging to go to some other system, nor do
you have to configure the packet filters to allow this. The advantage
to keeping them on an internal host is ease of access: you
don't have to go to the bastion host, which doesn't have
any tools anyway, to examine the logs. Avoid logging in to the
bastion host, in any case.</p><p>
</div>









<a name="ch10-2967" /><div class="sect3">
<h3 class="sect3">10.9.4.2. System logs for catastrophes</h3>





<a name="INDEX-799" />The second
copy of the system logs is the one you'll use after a
catastrophe. You can't use your convenience logs at a time like
this. Either the convenience logs won't be available, or you
won't be sure of their integrity any longer.</p><p>





These logs need to be kept separate from the bastion host and kept
for a long time. Sometimes you will discover an intruder a long time
after the original compromise (among other things, it's not
unusual for an intruder to break into a bunch of machines and install
back doors for later use; a compromised machine may be left alone for
months).</p><p>





If you have a write-once device available to you, use that device;
doing so is probably the technically easiest way to keep the logs,
especially if your write-once device can emulate a filesystem. Be
sure you can trust the write-once feature. Some magneto-optical
drives are capable of both multiple-write and write-once operations
and keep track of the mode they're in via software. If the
system is compromised, it may be possible to overwrite or damage
previously written parts of the supposedly write-once media.</p><p>





The other methods available to you will differ depending on the
operating system you are using and are discussed in <a href="ch11_01.html">Chapter 11, "Unix and Linux Bastion Hosts"</a>, and <a href="ch12_01.html">Chapter 12, "Windows NT and Windows 2000 Bastion Hosts "</a>.</p><p>
</div>









<a name="ch10-6-fm2xml" /><div class="sect3">
<h3 class="sect3">10.9.4.3. Logging and time</h3>





Knowing the time (within minutes and sometimes seconds) when
something occurred can be very useful when dealing with break-ins.
You will need date and time information if you (or law enforcement
agencies) need to request information from other sites. You should
make sure that your bastion hosts have accurate and synchronized
times in their logs. See <a href="ch22_01.html">Chapter 22, "Administrative Services"</a>, for more
information about time synchronization protocols.</p><p>
</div>









<a name="ch10-7-fm2xml" /><div class="sect3">
<h3 class="sect3">10.9.4.4. Choosing what to log </h3>





Choosing the information you want to log is a delicate business. You
don't want gigantic logs full of routine events; that just
wastes space and time and makes it harder to find important
information. On the other hand, you do want logs that are general
enough that you can debug problems and figure out what intruders did.</p><p>





What you would like to do is to log everything except events that are
frequent and nonthreatening. Don't try to limit your logging to
dangerous or interesting events because it's hard to
successfully predict which those are going to be. Instead, log
everything you can stand, eliminating only the known clutter.</p><p>





For instance, Windows NT provides the ability to log all accesses to
files. You don't want to turn this on for all files on a
bastion host; you'll drown in routine accesses to files that
are accessed as it provides services. On the other hand, you probably
do want to log all accesses to system files that aren't
accessed by the services. These files shouldn't be touched
often, and the nuisance caused by the log entries when you do
maintenance work will be compensated for by the number of attacks you
can detect.<a name="INDEX-800" /><a name="INDEX-801" /> <a name="INDEX-802" /></p><p>
</div>
</div>


<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch10_08.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index-2.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch10_10.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">10.8. Building a Bastion Host</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">10.10. Disabling Nonrequired Services</td></tr></table><div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p><p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="../tcp/index.html" /><area shape="rect" coords="266,0,333,90" href="../nfs/index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="../tshoot/index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="index-2.html" /></map>

</body>
<!-- Mirrored from nnc3.com/mags/Networking2/fire/ch10_09.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:51:34 GMT -->
</html>