<html>
<!-- Mirrored from nnc3.com/mags/Networking2/nfs/ch14_05.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:42 GMT -->
<head><title>Version 2 and Version 3 differences (Managing NFS and NIS, 2nd Edition)</title><link rel="stylesheet" type="text/css" href="../style/style1.css" />

<meta name="DC.Creator" content="Hal Stern, Mike Eisler and Ricardo Labiaga" /><meta name="DC.Format" content="text/xml" scheme="MIME" /><meta name="DC.Language" content="en-US" /><meta name="DC.Publisher" content="O'Reilly &amp; Associates, Inc." /><meta name="DC.Source" scheme="ISBN" content="1565925106L" /><meta name="DC.Subject.Keyword" content="stuff" /><meta name="DC.Title" content="Managing NFS and NIS, 2nd Edition" /><meta name="DC.Type" content="Text.Monograph" />

</head><body bgcolor="#ffffff">

<img alt="Book Home" border="0" src="gifs/smbanner.gif" usemap="#banner-map" /><map name="banner-map"><area shape="rect" coords="1,-2,616,66" href="index.html" alt="Managing NFS &amp; NIS" /><area shape="rect" coords="629,-11,726,25" href="jobjects/fsearch.html" alt="Search this book" /></map>

<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch14_04.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"></a></td><td align="right" valign="top" width="228"><a href="ch14_06.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr></table><div>



<h2 class="sect1">14.5. Version 2 and Version 3 differences</h2>

NFS Version 2 and NFS Version 3 are entirely <a name="INDEX-2229" />
<a name="INDEX-2230" />
<a name="INDEX-2231" />
<a name="INDEX-2232" />separate protocols and should be treated
as such. The two protocols define different over-the-wire operations.
For example, a single over-the-wire NFS Version 3 operation may
correspond to several over-the-wire NFS Version 2 operations.
Consider the case of a long list (<em class="emphasis">ls -l</em> ) of an
NFS-mounted directory that generates a series of
<em class="emphasis">readdir</em>/<em class="emphasis">lookup</em>/<em class="emphasis">getattr</em>
NFS Version 2 calls. The same operation generates one or more
<em class="emphasis">readdir+</em> NFS Version 3 calls instead.
</p>

In general, NFS Version 3 attempts to reduce the number of
over-the-wire requests by placing more information into each RPC.
This makes NFS Version 3 more efficient under certain circumstances
but less under others. The important point here is to understand that
it is not possible to compare many of the NFS operations between the
two protocols.
</p>

For example, writing a several megabyte file over NFS Version 3 will
generate far fewer RPC write operations than the same file written
over NFS Version 2. This is because NFS Version 3 writes generated by
current Solaris clients are 32 KB in length.<a href="#FOOTNOTE-35">[35]</a> In contrast, NFS Version 2
writes can only be up to 8 KB. You should be careful not to assume
that NFS Version 2 writes are faster only because <em class="emphasis">nfsstat
-c</em> reports that the server handles more of them.
</p><blockquote class="footnote"> <a name="FOOTNOTE-35" />[35]The NFS
Version 3 protocol does not impose a size limit on the write request.
The fact that many NFSVersion 3 clients use 32 KB is an
implementation detail.</p> </blockquote>

You may also notice that NFS Version 3 generates fewer
<em class="emphasis">lookup</em> and <em class="emphasis">getattr</em>
operations than NFS Version 2. The reduction in lookups in NFS
Version 3 is partly due to the use of <em class="emphasis">readdir+,</em>
which includes the filehandle of the directory entries along with the
directory names. The reduction of <em class="emphasis">getattrs</em> is
mostly due to the fact that NFS Version 3 operations include
post-operation attributes in all <a name="INDEX-2233" /> <a name="INDEX-2234" /> <a name="INDEX-2235" /> <a name="INDEX-2236" />replies. 
</p>



<hr width="684" align="left" />
<div class="navbar"><table width="684" border="0"><tr><td align="left" valign="top" width="228"><a href="ch14_04.html"><img alt="Previous" border="0" src="../gifs/txtpreva.gif" /></a></td><td align="center" valign="top" width="228"><a href="index.html"><img alt="Home" border="0" src="../gifs/txthome.gif" /></a></td><td align="right" valign="top" width="228"><a href="ch14_06.html"><img alt="Next" border="0" src="../gifs/txtnexta.gif" /></a></td></tr><tr><td align="left" valign="top" width="228">14.4. Publicly available diagnostics</td><td align="center" valign="top" width="228"><a href="index/index.html"><img alt="Book Index" border="0" src="../gifs/index.gif" /></a></td><td align="right" valign="top" width="228">14.6. NFS server logging</td></tr></table><div>
<hr width="684" align="left" />

<img alt="Library Navigation Links" border="0" src="../gifs/navbar.gif" usemap="#library-map" />
<p><font size="-1"><a href="copyrght.html">Copyright &copy; 2002</a> O'Reilly &amp; Associates. All rights reserved.</font></p>

<map name="library-map"><area shape="rect" coords="1,0,84,90" href="../index.html" /><area shape="rect" coords="86,-7,176,90" href="../ssh/index.html" /><area shape="rect" coords="178,0,265,101" href="../tcp/index.html" /><area shape="rect" coords="266,0,333,90" href="index.html" /><area shape="rect" coords="334,-1,429,93" href="../snmp/index.html" /><area shape="rect" coords="431,0,529,116" href="../tshoot/index.html" /><area shape="rect" coords="534,0,594,104" href="../dns/index.html" /><area shape="rect" coords="595,1,704,108" href="../fire/index-2.html" /></map>

</body>
<!-- Mirrored from nnc3.com/mags/Networking2/nfs/ch14_05.htm by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 28 Jul 2017 17:56:42 GMT -->
</html>